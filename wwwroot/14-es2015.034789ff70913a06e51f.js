(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"/ysL":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n("fXoL"),o=n("J3i2"),c=n("f0Cb"),a=n("ofXK");let s=(()=>{class t{constructor(t){this.mytranslate=t,this.title=""}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(i.Nb(o.a))},t.\u0275cmp=i.Hb({type:t,selectors:[["app-title"]],inputs:{title:"title"},decls:7,vars:4,consts:[[1,"d-flex","w-100","mb-3"],[3,"className"]],template:function(t,e){1&t&&(i.Tb(0,"div",0),i.Tb(1,"section",1),i.fc(2,"async"),i.Tb(3,"div"),i.Tb(4,"h3"),i.Cc(5),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Ob(6,"mat-divider")),2&t&&(i.Bb(1),i.kc("className","fr"===i.gc(2,2,e.mytranslate.lang)?"super-title border-left":"super-title border-right"),i.Bb(4),i.Dc(e.title))},directives:[c.a],pipes:[a.b],styles:["section[_ngcontent-%COMP%]{display:flex!important;justify-content:space-between!important;align-items:center!important}.border-left[_ngcontent-%COMP%]{border-left:10px solid #d17c36}.border-right[_ngcontent-%COMP%]{border-right:10px solid #d17c36}.super-title[_ngcontent-%COMP%]{height:45px}.super-title[_ngcontent-%COMP%], .super-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center}.super-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#a19b9e;height:35px}.super-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin:0;padding:0 5px}"]}),t})()},"5F3i":function(t,e,n){"use strict";n.d(e,"a",function(){return l});var i=n("0IaG"),o=n("fXoL"),c=n("/t3+"),a=n("f0Cb"),s=n("bTqV");let r=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.model=""}ngOnInit(){this.model=this.data.model}onNoClick(){this.dialogRef.close()}onOkClick(){this.dialogRef.close("ok")}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(i.g),o.Nb(i.a))},t.\u0275cmp=o.Hb({type:t,selectors:[["app-delete"]],decls:15,vars:1,consts:[[1,"dialog"],["mat-dialog-title",""],["role","toolbar",1,"task-header"],[1,"content"],["mat-dialog-content",""],["mat-dialog-actions","",1,"actions"],["mat-button","","type","button",3,"click"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"mat-dialog-close","click"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Tb(1,"h1",1),o.Tb(2,"mat-toolbar",2),o.Tb(3,"span"),o.Cc(4),o.Sb(),o.Sb(),o.Ob(5,"mat-divider"),o.Sb(),o.Tb(6,"div",3),o.Tb(7,"div",4),o.Tb(8,"p"),o.Cc(9,"Voulez-vous vraiment supprimer?"),o.Sb(),o.Sb(),o.Tb(10,"div",5),o.Tb(11,"button",6),o.ac("click",function(){return e.onNoClick()}),o.Cc(12,"Annuler"),o.Sb(),o.Tb(13,"button",7),o.ac("click",function(){return e.onOkClick()}),o.Cc(14,"Ok"),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&t&&(o.Bb(4),o.Ec("Suppression ",e.model," "))},directives:[i.h,c.a,a.a,i.e,i.c,s.a,i.d],styles:[".dialog[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:hidden}.dialog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 5px}.dialog[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 20px 25px}.dialog[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse}"]}),t})(),l=(()=>{class t{constructor(t){this.dialog=t}openDialog(t){return this.dialog.open(r,{width:"750px",disableClose:!0,data:{model:t}}).afterClosed()}}return t.\u0275fac=function(e){return new(e||t)(o.Xb(i.b))},t.\u0275prov=o.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},CQGt:function(t,e,n){"use strict";n.r(e),n.d(e,"SyntheseModule",function(){return Xt});var i=n("Dgsr"),o=n("ofXK"),c=n("tyNb"),a=n("fXoL");let s=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Hb({type:t,selectors:[["app-synthese"]],decls:1,vars:0,template:function(t,e){1&t&&a.Ob(0,"router-outlet")},directives:[c.i],styles:[""]}),t})();var r=n("mrSG"),l=n("VRyK"),b=n("0IaG"),d=n("/t3+"),m=n("f0Cb"),u=n("bTqV"),f=n("f6nW"),h=n("+0xr");function p(t,e){1&t&&(a.Tb(0,"th",15),a.Cc(1," No. "),a.Sb())}function g(t,e){if(1&t&&(a.Tb(0,"td",16),a.Cc(1),a.Sb()),2&t){const t=e.$implicit;a.Bb(1),a.Ec(" ",t.position," ")}}function S(t,e){if(1&t&&(a.Tb(0,"th",15),a.Cc(1),a.Sb()),2&t){const t=a.ec(2);a.Bb(1),a.Dc(t.columnDefs[0].headName)}}function C(t,e){if(1&t&&(a.Tb(0,"td",16),a.Cc(1),a.Sb()),2&t){const t=e.$implicit,n=a.ec(2);a.Bb(1),a.Dc(t[n.columnDefs[0].columnDef])}}function T(t,e){if(1&t&&(a.Tb(0,"th",15),a.Cc(1),a.Sb()),2&t){const t=a.ec(2);a.Bb(1),a.Dc(t.columnDefs[1].headName)}}function y(t,e){if(1&t&&(a.Tb(0,"td",16),a.Cc(1),a.Sb()),2&t){const t=e.$implicit,n=a.ec(2);a.Bb(1),a.Dc(t[n.columnDefs[1].columnDef])}}function v(t,e){if(1&t&&(a.Tb(0,"th",15),a.Cc(1),a.Sb()),2&t){const t=a.ec(2);a.Bb(1),a.Dc(t.columnDefs[2].headName)}}function D(t,e){if(1&t&&(a.Tb(0,"td",16),a.Cc(1),a.Sb()),2&t){const t=e.$implicit,n=a.ec(2);a.Bb(1),a.Dc(t[n.columnDefs[2].columnDef])}}function B(t,e){if(1&t&&(a.Tb(0,"th",15),a.Cc(1),a.Sb()),2&t){const t=a.ec(2);a.Bb(1),a.Dc(t.columnDefs[3].headName)}}function k(t,e){if(1&t&&(a.Tb(0,"td",16),a.Cc(1),a.Sb()),2&t){const t=e.$implicit,n=a.ec(2);a.Bb(1),a.Dc(t[n.columnDefs[3].columnDef])}}function O(t,e){if(1&t&&(a.Tb(0,"th",15),a.Cc(1),a.Sb()),2&t){const t=a.ec(2);a.Bb(1),a.Dc(t.columnDefs[4].headName)}}function w(t,e){if(1&t&&(a.Tb(0,"td",16),a.Cc(1),a.Sb()),2&t){const t=e.$implicit,n=a.ec(2);a.Bb(1),a.Dc(t[n.columnDefs[4].columnDef]?t[n.columnDefs[4].columnDef].label:"")}}function x(t,e){if(1&t&&(a.Tb(0,"th",15),a.Cc(1),a.Sb()),2&t){const t=a.ec(2);a.Bb(1),a.Dc(t.columnDefs[5].headName)}}function P(t,e){if(1&t&&(a.Tb(0,"td",16),a.Cc(1),a.Sb()),2&t){const t=e.$implicit,n=a.ec(2);a.Bb(1),a.Dc(t[n.columnDefs[5].columnDef]?t[n.columnDefs[5].columnDef].label:"")}}function N(t,e){if(1&t&&(a.Tb(0,"th",15),a.Cc(1),a.Sb()),2&t){const t=a.ec(2);a.Bb(1),a.Dc(t.columnDefs[6].headName)}}function R(t,e){if(1&t&&(a.Tb(0,"td",16),a.Cc(1),a.Sb()),2&t){const t=e.$implicit,n=a.ec(2);a.Bb(1),a.Dc(t[n.columnDefs[6].columnDef]?t[n.columnDefs[6].columnDef].label:"")}}function M(t,e){1&t&&a.Ob(0,"tr",17)}function _(t,e){1&t&&a.Ob(0,"tr",18)}function I(t,e){if(1&t&&(a.Tb(0,"section"),a.Tb(1,"h5"),a.Cc(2,"Recommandations"),a.Sb(),a.Tb(3,"table",8),a.Rb(4,9),a.Bc(5,p,2,0,"th",10),a.Bc(6,g,2,1,"td",11),a.Qb(),a.Rb(7,12),a.Bc(8,S,2,1,"th",10),a.Bc(9,C,2,1,"td",11),a.Qb(),a.Rb(10,12),a.Bc(11,T,2,1,"th",10),a.Bc(12,y,2,1,"td",11),a.Qb(),a.Rb(13,12),a.Bc(14,v,2,1,"th",10),a.Bc(15,D,2,1,"td",11),a.Qb(),a.Rb(16,12),a.Bc(17,B,2,1,"th",10),a.Bc(18,k,2,1,"td",11),a.Qb(),a.Rb(19,12),a.Bc(20,O,2,1,"th",10),a.Bc(21,w,2,1,"td",11),a.Qb(),a.Rb(22,12),a.Bc(23,x,2,1,"th",10),a.Bc(24,P,2,1,"td",11),a.Qb(),a.Rb(25,12),a.Bc(26,N,2,1,"th",10),a.Bc(27,R,2,1,"td",11),a.Qb(),a.Bc(28,M,1,0,"tr",13),a.Bc(29,_,1,0,"tr",14),a.Sb(),a.Sb()),2&t){const t=a.ec();a.Bb(3),a.kc("dataSource",t.dataSource),a.Bb(4),a.kc("cdkColumnDef",t.columnDefs[0].columnDef),a.Bb(3),a.kc("cdkColumnDef",t.columnDefs[1].columnDef),a.Bb(3),a.kc("cdkColumnDef",t.columnDefs[2].columnDef),a.Bb(3),a.kc("cdkColumnDef",t.columnDefs[3].columnDef),a.Bb(3),a.kc("cdkColumnDef",t.columnDefs[4].columnDef),a.Bb(3),a.kc("cdkColumnDef",t.columnDefs[5].columnDef),a.Bb(3),a.kc("cdkColumnDef",t.columnDefs[6].columnDef),a.Bb(3),a.kc("cdkHeaderRowDef",t.displayedColumns),a.Bb(1),a.kc("cdkRowDefColumns",t.displayedColumns)}}let A=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.title="",this.dataSource=[],this.columnDefs=[{columnDef:"codeRecommendation",headName:"CODE"},{columnDef:"nom",headName:""},{columnDef:"etat",headName:""},{columnDef:"mecanisme",headName:""},{columnDef:"axe",headName:""},{columnDef:"sousAxe",headName:"SOUS AXE"},{columnDef:"cycle",headName:""}].map(t=>(t.headName=""===t.headName?t.columnDef.toUpperCase():t.headName,t)),this.displayedColumns=this.columnDefs.map(t=>t.columnDef)}ngOnInit(){this.o=this.data.model,this.dataSource=this.o.syntheseRecommandations.map(t=>t.recommendation),this.title=this.data.title,console.log(this.o)}onNoClick(){this.dialogRef.close()}onOkClick(t){}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(b.g),a.Nb(b.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-update"]],decls:16,vars:3,consts:[[1,"dialog"],["mat-dialog-title",""],["role","toolbar",1,"task-header"],[1,"content"],["mat-dialog-content",""],[4,"ngIf"],["mat-dialog-actions","",1,"actions"],["mat-button","","type","button",3,"click"],["cdk-table","",3,"dataSource"],["cdkColumnDef","position"],["cdk-header-cell","",4,"cdkHeaderCellDef"],["cdk-cell","",4,"cdkCellDef"],[3,"cdkColumnDef"],["mat-header-row","",4,"cdkHeaderRowDef"],["mat-row","",4,"cdkRowDef","cdkRowDefColumns"],["cdk-header-cell",""],["cdk-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"h1",1),a.Tb(2,"mat-toolbar",2),a.Tb(3,"span"),a.Cc(4),a.Sb(),a.Sb(),a.Ob(5,"mat-divider"),a.Sb(),a.Tb(6,"div",3),a.Tb(7,"div",4),a.Tb(8,"ul"),a.Tb(9,"li"),a.Cc(10),a.Sb(),a.Sb(),a.Ob(11,"mat-divider"),a.Bc(12,I,30,10,"section",5),a.Sb(),a.Tb(13,"div",6),a.Tb(14,"button",7),a.ac("click",function(){return e.onNoClick()}),a.Cc(15,"Retour"),a.Sb(),a.Sb(),a.Sb(),a.Sb()),2&t&&(a.Bb(4),a.Dc(e.title),a.Bb(6),a.Ec("Datail: ",e.o.detail,""),a.Bb(2),a.kc("ngIf",0!==e.dataSource.length))},directives:[b.h,d.a,m.a,b.e,o.m,b.c,u.a,f.q,f.e,f.k,f.c,f.m,f.p,f.j,f.b,h.f,h.h],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.dialog[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:hidden}.dialog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 5px}.dialog[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 20px 25px}.dialog[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse}.myrow[_ngcontent-%COMP%]{display:flex;align-items:center}section[_ngcontent-%COMP%]{margin:20px 0 0 50px}"]}),t})();var F=n("3Pt+"),L=n("eIep"),U=n("ZTdd"),E=n("M9IT"),$=n("Dh3D"),Q=n("7q3A"),H=n("5F3i"),q=n("dNgK"),X=n("Xa2L");let j=(()=>{class t{constructor(t){this.snackBar=t,this.afterDismissed=()=>this.snackBarRef.afterDismissed(),this.onAction=()=>this.snackBarRef.onAction(),this.dismiss=()=>this.snackBarRef.dismiss()}openMySnackBar(t,e){this.snackBarRef=this.snackBar.openFromComponent(V,{panelClass:["customClass"],data:t})}openSnackBar(t,e="close"){this.snackBarRef=this.snackBar.open(t,e,{duration:1e4})}}return t.\u0275fac=function(e){return new(e||t)(a.Xb(q.b))},t.\u0275prov=a.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),V=(()=>{class t{constructor(t){this.data=t}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(q.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-snack-bar"]],decls:4,vars:1,consts:[[1,"row"],["color","warn","diameter","27",1,"custom-spinner"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"p"),a.Cc(2),a.Sb(),a.Ob(3,"mat-spinner",1),a.Sb()),2&t&&(a.Bb(2),a.Dc(e.data))},directives:[X.b],styles:[".row[_ngcontent-%COMP%] {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    }"]}),t})();var G=n("M0ag"),K=n("J3i2"),z=n("2ChS"),J=n("/ysL"),Z=n("7EHt"),W=n("NFeN"),Y=n("kmnG"),tt=n("d3UM"),et=n("FKr1"),nt=n("qFsG"),it=n("/1cH"),ot=n("Qu3c"),ct=n("sYmb");const at=function(){return["/admin/synthese/update",0]};function st(t,e){1&t&&(a.Tb(0,"button",31),a.Tb(1,"mat-icon"),a.Cc(2,"add"),a.Sb(),a.Cc(3),a.fc(4,"translate"),a.Sb()),2&t&&(a.kc("routerLink",a.mc(4,at)),a.Bb(3),a.Ec(" ",a.gc(4,2,"admin.synthese.list.Synth\xe8se")," "))}function rt(t,e){if(1&t&&(a.Tb(0,"mat-option",32),a.Cc(1),a.Sb()),2&t){const t=e.$implicit;a.kc("value",t.id),a.Bb(1),a.Dc(t.nom)}}function lt(t,e){if(1&t&&(a.Tb(0,"mat-option",32),a.Cc(1),a.Sb()),2&t){const t=e.$implicit;a.kc("value",t.id),a.Bb(1),a.Dc(t.titre)}}function bt(t,e){if(1&t&&(a.Tb(0,"mat-option",32),a.Cc(1),a.Sb()),2&t){const t=e.$implicit;a.kc("value",t),a.Bb(1),a.Ec("",t.label," ")}}function dt(t,e){if(1&t&&(a.Tb(0,"mat-option",32),a.Cc(1),a.Sb()),2&t){const t=e.$implicit;a.kc("value",t.id),a.Bb(1),a.Dc(t.label)}}function mt(t,e){if(1&t&&(a.Tb(0,"mat-option",32),a.Cc(1),a.Sb()),2&t){const t=e.$implicit;a.kc("value",t.id),a.Bb(1),a.Dc(t.label)}}function ut(t,e){1&t&&a.Ob(0,"mat-spinner")}function ft(t,e){if(1&t&&(a.Tb(0,"div",33),a.Bc(1,ut,1,0,"mat-spinner",34),a.Sb()),2&t){const t=a.ec();a.Bb(1),a.kc("ngIf",t.isLoadingResults)}}function ht(t,e){1&t&&(a.Tb(0,"th",35),a.Cc(1),a.fc(2,"translate"),a.Sb()),2&t&&(a.Bb(1),a.Dc(a.gc(2,1,"admin.synthese.list.CODE")))}function pt(t,e){if(1&t&&(a.Tb(0,"td",36),a.Cc(1),a.Sb()),2&t){const t=e.$implicit,n=a.ec();a.Bb(1),a.Dc(t[n.columnDefs[0].columnDef])}}function gt(t,e){1&t&&(a.Tb(0,"th",35),a.Cc(1),a.fc(2,"translate"),a.Sb()),2&t&&(a.Bb(1),a.Dc(a.gc(2,1,"admin.synthese.list.DETAIL")))}function St(t,e){if(1&t&&(a.Tb(0,"td",36),a.Cc(1),a.Sb()),2&t){const t=e.$implicit,n=a.ec();a.Bb(1),a.Ec(" ",n.subString("fr"===n.mytranslate.langSync?t.detail:t.detailAr)," ")}}function Ct(t,e){1&t&&(a.Tb(0,"th",37),a.Cc(1),a.fc(2,"translate"),a.Sb()),2&t&&(a.Bb(1),a.Dc(a.gc(2,1,"admin.synthese.list.Rapport")))}function Tt(t,e){if(1&t){const t=a.Ub();a.Tb(0,"td",36),a.Tb(1,"button",38),a.ac("click",function(){a.sc(t);const n=e.$implicit;return a.ec().showPieceJoin(n.lienUpload)}),a.Tb(2,"mat-icon"),a.Cc(3,"cloud_download"),a.Sb(),a.Sb(),a.Sb()}if(2&t){const t=e.$implicit,n=a.ec();a.Bb(1),a.kc("disabled",n.disable(t.lienUpload))("matTooltip",t.lienUpload)}}function yt(t,e){1&t&&a.Ob(0,"th",37)}const vt=function(t){return["/admin/synthese/update",t]};function Dt(t,e){if(1&t&&(a.Tb(0,"button",43),a.Tb(1,"mat-icon"),a.Cc(2,"create"),a.Sb(),a.Sb()),2&t){const t=a.ec().$implicit;a.kc("routerLink",a.nc(1,vt,t.id))}}function Bt(t,e){if(1&t){const t=a.Ub();a.Tb(0,"button",44),a.ac("click",function(){a.sc(t);const e=a.ec().$implicit;return a.ec().delete(e)}),a.Tb(1,"mat-icon"),a.Cc(2,"delete_sweep"),a.Sb(),a.Sb()}}function kt(t,e){if(1&t){const t=a.Ub();a.Tb(0,"td",36),a.Tb(1,"div",39),a.Tb(2,"button",40),a.ac("click",function(){a.sc(t);const n=e.$implicit;return a.ec().detail(n)}),a.Tb(3,"mat-icon"),a.Cc(4,"visibility"),a.Sb(),a.Sb(),a.Bc(5,Dt,3,3,"button",41),a.Bc(6,Bt,3,0,"button",42),a.Sb(),a.Sb()}if(2&t){const t=a.ec();a.Bb(5),a.kc("ngIf",!t.session.isPointFocal&&!t.session.isSuperViseur),a.Bb(1),a.kc("ngIf",!t.session.isPointFocal&&!t.session.isSuperViseur)}}function Ot(t,e){1&t&&a.Ob(0,"tr",45)}function wt(t,e){1&t&&a.Ob(0,"tr",46)}const xt=function(){return[10,25,50,100,250]};let Pt=(()=>{class t{constructor(t,e,n,i,o,c,s,r){this.uow=t,this.dialog=e,this.mydialog=n,this.snack=i,this.route=o,this.session=c,this.mytranslate=s,this.bottomSheet=r,this.update=new a.o,this.isLoadingResults=!0,this.resultsLength=0,this.isRateLimitReached=!1,this.dataSource=[],this.columnDefs=[{columnDef:"code",headName:"CODE"},{columnDef:"detail",headName:"DETAIL"},{columnDef:"lienUpload",headName:"lienUpload"},{columnDef:"option",headName:"OPTION"}],this.axes=this.uow.axes.get(),this.sousAxes=[],this.traites=this.uow.traites.get(),this.organismes=this.uow.organismes.get(),this.rapports=[],this.idTraite=new F.e(0),this.idAxe=new F.e(0),this.idSousAxe=new F.e(0),this.idRapport=new F.e(0),this.idOrganismeEmetteur=new F.e(0),this.panelOpenState=!1,this.displayedColumns=this.columnDefs.map(t=>t.columnDef),this.myAuto=new F.e("")}ngOnInit(){this.getPage(0,10,"id","desc",this.session.isPublic?0:this.session.user.idOrganisme,0,0,0,0,0),Object(l.a)(this.sort.sortChange,this.paginator.page,this.update).subscribe(t=>{!0===t?this.paginator.pageIndex=0:t=t,this.paginator.pageSize?t=t:this.paginator.pageSize=10;const e=this.paginator.pageIndex*this.paginator.pageSize;this.isLoadingResults=!0,this.getPage(e,this.paginator.pageSize,this.sort.active?this.sort.active:"id",this.sort.direction?this.sort.direction:"desc",this.session.isPublic?0:this.session.user.idOrganisme,this.idOrganismeEmetteur.value?this.idOrganismeEmetteur.value:0,this.idTraite.value?this.idTraite.value:0,this.idRapport.value?this.idRapport.value:0,this.idAxe.value?this.idAxe.value:0,this.idSousAxe.value?this.idSousAxe.value:0)}),this.route.queryParams.subscribe(t=>{const e=t.data;e&&this.uow.syntheses.getDetail(e).subscribe(t=>{this.openDialog(t)})}),this.autoComplete()}autoComplete(){this.filteredOptions=this.myAuto.valueChanges.pipe(Object(L.a)(t=>t.length>1?this.uow.organismes.autocompletePost("label",t):[]))}selected(t){const e=t.option.value;this.myAuto.setValue(e.label),this.idOrganismeEmetteur.setValue(e.id)}getPage(t,e,n,i,o,c,a,s,r,l){this.uow.syntheses.getAll(t,e,n,i,o,c,a,s,r,l).subscribe(t=>{console.log(t.list),this.dataSource=t.list,this.resultsLength=t.count,this.isLoadingResults=!1})}showPieceJoin(t){this.bottomSheet.open(U.a,{data:{fileName:t,folder:"synthese"}})}disable(t){return!t||""===t}delete(t){return Object(r.a)(this,void 0,void 0,function*(){if("ok"===(yield this.mydialog.openDialog("synth\xe8se").toPromise())){this.uow.syntheses.delete(t.id).subscribe(()=>this.update.next(!0));let e=[];""!==t.lienUpload?e.push(...this.uow.decoupe(t.lienUpload)):e=e,this.uow.files.deleteFiles(e,"synthese").subscribe(e=>{this.uow.examens.delete(t.id).subscribe(()=>this.update.next(!0))})}})}detail(t){this.uow.syntheses.getDetail(t.id).subscribe(t=>{this.openDialog(t)})}axeChange(t){this.uow.sousAxes.getByIdAxe(t).subscribe(t=>{this.sousAxes=t})}search(){0===Number(this.idTraite.value)&&0===Number(this.idRapport.value)&&0===Number(this.idOrganismeEmetteur.value)&&0===Number(this.idAxe.value)&&0===Number(this.idSousAxe.value)||this.update.next(!0)}openDialog(t){return this.dialog.open(A,{width:"7100px",disableClose:!0,data:{model:t,title:"Synth\xe8se"}}).afterClosed()}selectChange(t){this.uow.rapports.getByIdTraite(t).subscribe(t=>{this.rapports=t,console.log(t)})}subString(t){return t.length>255?t.substring(0,255)+"...":t}get isAllEmpty(){return 0===this.idTraite.value&&0===this.idRapport.value&&0===this.idOrganismeEmetteur.value&&0===this.idAxe.value&&0===this.idSousAxe.value}reset(){this.idTraite.setValue(0),this.idRapport.setValue(0),this.idOrganismeEmetteur.setValue(0),this.getPage(0,10,"id","desc",this.session.user.idOrganisme,0,0,0,0,0)}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(Q.a),a.Nb(b.b),a.Nb(H.a),a.Nb(j),a.Nb(c.a),a.Nb(G.a),a.Nb(K.a),a.Nb(z.b))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-list"]],viewQuery:function(t,e){if(1&t&&(a.xc(E.a,!0),a.xc($.a,!0)),2&t){let t;a.pc(t=a.bc())&&(e.paginator=t.first),a.pc(t=a.bc())&&(e.sort=t.first)}},decls:94,vars:57,consts:[[1,"host"],[3,"title"],[1,"right"],["class","mt-3","style","margin: 0px 0","mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],[1,"expension"],[3,"opened","closed"],[1,"inputs2"],["appearance","fill"],[3,"formControl","selectionChange"],["value","0"],[3,"value",4,"ngFor","ngForOf"],[3,"formControl"],["matInput","",3,"formControl","matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","",3,"disabled","click"],[1,"example-container","mat-elevation-z8"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container"],["mat-table","","multiTemplateDataRows","","aria-label","Elements","matSort","",3,"dataSource"],["table",""],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","option",2,"flex-direction","row-reverse"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageIndex","0","pageSize","10","showFirstLastButtons","",3,"length","pageSizeOptions"],["paginator",""],["mat-raised-button","","color","primary",1,"mt-3",2,"margin","0px 0",3,"routerLink"],[3,"value"],[1,"example-loading-shade"],[4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","","color","accent",3,"disabled","matTooltip","click"],[1,"button-row"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","primary",3,"routerLink",4,"ngIf"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"routerLink"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){if(1&t&&(a.Tb(0,"div",0),a.Ob(1,"app-title",1),a.fc(2,"translate"),a.Tb(3,"div",2),a.Bc(4,st,5,5,"button",3),a.Sb(),a.Tb(5,"div",4),a.Tb(6,"mat-accordion"),a.Tb(7,"mat-expansion-panel",5),a.ac("opened",function(){return e.panelOpenState=!0})("closed",function(){return e.panelOpenState=!1}),a.Tb(8,"mat-expansion-panel-header"),a.Tb(9,"mat-panel-title"),a.Tb(10,"mat-icon"),a.Cc(11,"search"),a.Sb(),a.Tb(12,"p"),a.Cc(13),a.fc(14,"translate"),a.Sb(),a.Sb(),a.Ob(15,"mat-panel-description"),a.Sb(),a.Ob(16,"mat-divider"),a.Tb(17,"div",6),a.Tb(18,"mat-form-field",7),a.Tb(19,"mat-label"),a.Cc(20),a.fc(21,"translate"),a.Sb(),a.Tb(22,"mat-select",8),a.ac("selectionChange",function(t){return e.selectChange(t.value)}),a.Tb(23,"mat-option",9),a.Cc(24,"..."),a.Sb(),a.Bc(25,rt,2,2,"mat-option",10),a.fc(26,"async"),a.Sb(),a.Sb(),a.Tb(27,"mat-form-field",7),a.Tb(28,"mat-label"),a.Cc(29),a.fc(30,"translate"),a.Sb(),a.Tb(31,"mat-select",11),a.Tb(32,"mat-option",9),a.Cc(33,"..."),a.Sb(),a.Bc(34,lt,2,2,"mat-option",10),a.Sb(),a.Sb(),a.Tb(35,"mat-form-field",7),a.Tb(36,"mat-label"),a.Cc(37),a.fc(38,"translate"),a.Sb(),a.Ob(39,"input",12),a.Tb(40,"mat-autocomplete",13,14),a.ac("optionSelected",function(t){return e.selected(t)}),a.Bc(42,bt,2,2,"mat-option",10),a.fc(43,"async"),a.Sb(),a.Sb(),a.Tb(44,"mat-form-field",7),a.Tb(45,"mat-label"),a.Cc(46),a.fc(47,"translate"),a.Sb(),a.Tb(48,"mat-select",8),a.ac("selectionChange",function(t){return e.axeChange(t.value)}),a.Tb(49,"mat-option",9),a.Cc(50,"..."),a.Sb(),a.Bc(51,dt,2,2,"mat-option",10),a.fc(52,"async"),a.Sb(),a.Sb(),a.Tb(53,"mat-form-field",7),a.Tb(54,"mat-label"),a.Cc(55),a.fc(56,"translate"),a.Sb(),a.Tb(57,"mat-select",11),a.Tb(58,"mat-option",9),a.Cc(59,"..."),a.Sb(),a.Bc(60,mt,2,2,"mat-option",10),a.Sb(),a.Sb(),a.Sb(),a.Tb(61,"div",2),a.Tb(62,"button",15),a.ac("click",function(){return e.search()}),a.Tb(63,"mat-icon"),a.Cc(64,"search"),a.Sb(),a.Cc(65),a.fc(66,"translate"),a.Sb(),a.Cc(67," \xa0 "),a.Tb(68,"button",16),a.ac("click",function(){return e.reset()}),a.Tb(69,"mat-icon"),a.Cc(70,"refresh"),a.Sb(),a.Cc(71),a.fc(72,"translate"),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(73,"div",17),a.Bc(74,ft,2,1,"div",18),a.Tb(75,"div",19),a.Tb(76,"table",20,21),a.Rb(78,22),a.Bc(79,ht,3,3,"th",23),a.Bc(80,pt,2,1,"td",24),a.Qb(),a.Rb(81,22),a.Bc(82,gt,3,3,"th",23),a.Bc(83,St,2,1,"td",24),a.Qb(),a.Rb(84,22),a.Bc(85,Ct,3,3,"th",25),a.Bc(86,Tt,4,2,"td",24),a.Qb(),a.Rb(87,26),a.Bc(88,yt,1,0,"th",25),a.Bc(89,kt,7,2,"td",24),a.Qb(),a.Bc(90,Ot,1,0,"tr",27),a.Bc(91,wt,1,0,"tr",28),a.Sb(),a.Sb(),a.Ob(92,"mat-paginator",29,30),a.Sb(),a.Sb()),2&t){const t=a.qc(41);a.Bb(1),a.lc("title",a.gc(2,32,"admin.synthese.list.Synth\xe8ses")),a.Bb(3),a.kc("ngIf",!e.session.isPointFocal&&!e.session.isSuperViseur),a.Bb(9),a.Dc(a.gc(14,34,"admin.synthese.list.Recherche")),a.Bb(7),a.Dc(a.gc(21,36,"admin.synthese.list.Traite")),a.Bb(2),a.kc("formControl",e.idTraite),a.Bb(3),a.kc("ngForOf",a.gc(26,38,e.traites)),a.Bb(4),a.Dc(a.gc(30,40,"admin.synthese.list.Rapport")),a.Bb(2),a.kc("formControl",e.idRapport),a.Bb(3),a.kc("ngForOf",e.rapports),a.Bb(3),a.Dc(a.gc(38,42,"admin.synthese.list.Emetteur")),a.Bb(2),a.kc("formControl",e.myAuto)("matAutocomplete",t),a.Bb(3),a.kc("ngForOf",a.gc(43,44,e.filteredOptions)),a.Bb(4),a.Dc(a.gc(47,46,"admin.synthese.list.Axe")),a.Bb(2),a.kc("formControl",e.idAxe),a.Bb(3),a.kc("ngForOf",a.gc(52,48,e.axes)),a.Bb(4),a.Dc(a.gc(56,50,"admin.synthese.list.Sous_axe")),a.Bb(2),a.kc("formControl",e.idSousAxe),a.Bb(3),a.kc("ngForOf",e.sousAxes),a.Bb(2),a.kc("disabled",e.isAllEmpty),a.Bb(3),a.Ec(" ",a.gc(66,52,"admin.synthese.list.Rechercher")," "),a.Bb(3),a.kc("disabled",e.isAllEmpty),a.Bb(3),a.Ec(" ",a.gc(72,54,"admin.synthese.list.R\xe9initialiser")," "),a.Bb(3),a.kc("ngIf",e.isLoadingResults),a.Bb(2),a.kc("dataSource",e.dataSource),a.Bb(2),a.kc("matColumnDef",e.columnDefs[0].columnDef),a.Bb(3),a.kc("matColumnDef",e.columnDefs[1].columnDef),a.Bb(3),a.kc("matColumnDef",e.columnDefs[2].columnDef),a.Bb(6),a.kc("matHeaderRowDef",e.displayedColumns),a.Bb(1),a.kc("matRowDefColumns",e.displayedColumns),a.Bb(1),a.kc("length",e.resultsLength)("pageSizeOptions",a.mc(56,xt))}},directives:[J.a,o.m,Z.a,Z.c,Z.e,Z.f,W.a,Z.d,m.a,Y.c,Y.f,tt.a,F.m,F.f,et.o,o.l,nt.b,F.c,it.c,it.a,u.a,h.j,$.a,h.c,h.e,h.b,h.g,h.i,E.a,c.f,X.b,h.d,$.b,h.a,ot.a,h.f,h.h],pipes:[ct.c,o.b],styles:["section[_ngcontent-%COMP%]{display:flex!important;justify-content:space-between!important;align-items:center!important}  h3{margin:0!important}.host[_ngcontent-%COMP%]{margin:1em!important}.expension[_ngcontent-%COMP%]{margin:20px 0}.right[_ngcontent-%COMP%]{margin:0 20px 20px}mat-panel-title[_ngcontent-%COMP%]{display:flex;align-items:center}mat-panel-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 0 10px}mat-panel-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-top:5px}.inputs2[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(25vw,1fr));grid-column-gap:6px;grid-row-gap:6px;align-items:center;margin:15px 15px 0}"]}),t})();var Nt=n("ukCm"),Rt=n("XNiG"),Mt=n("0kbX");let _t=(()=>{class t{constructor(){this.navigateTo=new a.o}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=a.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var It=n("wZkO"),At=n("3IEU");const Ft=["matgroup"],Lt=function(){return["/admin/synthese/list"]};function Ut(t,e){if(1&t){const t=a.Ub();a.Tb(0,"form",6),a.Tb(1,"div",7),a.Tb(2,"div",8),a.Tb(3,"mat-form-field",9),a.Tb(4,"mat-label"),a.Cc(5),a.fc(6,"translate"),a.Sb(),a.Ob(7,"input",10),a.Sb(),a.Tb(8,"mat-form-field",9),a.Tb(9,"mat-label"),a.Cc(10),a.fc(11,"translate"),a.Sb(),a.Ob(12,"textarea",11),a.Sb(),a.Tb(13,"mat-form-field",9),a.Tb(14,"mat-label"),a.Cc(15),a.fc(16,"translate"),a.Sb(),a.Ob(17,"textarea",12),a.Sb(),a.Ob(18,"app-upload-select",13),a.fc(19,"translate"),a.Sb(),a.Sb(),a.Sb(),a.Tb(20,"div",14),a.Tb(21,"button",15),a.Cc(22),a.fc(23,"translate"),a.Sb(),a.Cc(24,"\xa0\xa0 "),a.Tb(25,"button",16),a.ac("click",function(){a.sc(t);const e=a.ec();return e.submit(e.myForm)}),a.Cc(26),a.fc(27,"translate"),a.Sb(),a.Sb()}if(2&t){const t=a.ec();a.kc("formGroup",t.myForm),a.Bb(5),a.Dc(a.gc(6,13,"admin.synthese.update.Code")),a.Bb(5),a.Dc(a.gc(11,15,"admin.synthese.update.Synth\xe8se")),a.Bb(5),a.Dc(a.gc(16,17,"admin.synthese.update.Synth\xe8seAr")),a.Bb(3),a.lc("nameBtn",a.gc(19,19,"admin.synthese.list.Rapport")),a.kc("folderToSaveInServer",t.folderToSaveInServer)("propertyOfParent",t.lienUploadTo)("eventSubmitToParent",t.lienUploadFrom)("eventSubmitFromParent",t.eventSubmitFromParent),a.Bb(3),a.kc("routerLink",a.mc(25,Lt)),a.Bb(1),a.Dc(a.gc(23,21,"admin.Retour")),a.Bb(3),a.kc("disabled",t.myForm.invalid),a.Bb(1),a.Dc(a.gc(27,23,"admin.Enregistre"))}}const Et=[{path:"",redirectTo:"",pathMatch:"full"},{path:"",component:s,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:Pt},{path:"update/:id",component:(()=>{class t{constructor(t,e,n,i,o,c,s){this.route=t,this.snack=e,this.uow=n,this.fb=i,this.session=o,this.navTab=c,this.router=s,this.recommendations=this.uow.recommendations.get(),this.cycles=this.uow.cycles.get(),this.o=new Nt.n,this.id=0,this.title="Synthese",this.folderToSaveInServer="synthese",this.lienUploadTo=new Rt.a,this.lienUploadFrom=new Rt.a,this.eventSubmitFromParent=new Rt.a,this.listRecommendation=[],this.eventToChild=new a.o}ngOnInit(){this.o.idUser=this.session.user.id,this.createForm(),this.id=+this.route.snapshot.paramMap.get("id"),this.lienUploadFrom.subscribe(t=>this.myForm.get("lienUpload").setValue(t)),setTimeout(()=>{this.lienUploadTo.next(this.o.lienUpload)},100),0!==this.id&&this.uow.syntheses.getOne(this.id).subscribe(t=>{this.o=t,this.title="Modifier synthese",this.eventToChild.emit(this.o.syntheseRecommandations),this.createForm()}),this.navTab.navigateTo.subscribe(t=>this.matTab.selectedIndex=t)}createForm(){this.myForm=this.fb.group({id:this.o.id,code:[this.o.code,F.s.required],detail:[this.o.detail,F.s.required],detailAr:[this.o.detailAr,F.s.required],idUser:[this.o.idUser,F.s.required],lienUpload:[this.o.lienUpload,F.s.required]})}submit(t){const e=t.value;0===this.id?this.uow.syntheses.post(e).subscribe(t=>{this.eventSubmitFromParent.next(!0),this.router.navigateByUrl("/admin/synthese/list")}):this.uow.syntheses.put(e.id,e).subscribe(t=>{this.eventSubmitFromParent.next(!0),this.router.navigateByUrl("/admin/synthese/list")})}reset(){this.o=new Nt.n,this.createForm()}updateListRecommendation(t){this.listRecommendation=t;let e=0,n=!0;this.listRecommendation=this.listRecommendation.filter(t=>(t.id===e&&(n=!1),e=t.id,n))}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(c.a),a.Nb(Mt.a),a.Nb(Q.a),a.Nb(F.d),a.Nb(G.a),a.Nb(_t),a.Nb(c.e))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-update"]],viewQuery:function(t,e){if(1&t&&a.xc(Ft,!0),2&t){let t;a.pc(t=a.bc())&&(e.matTab=t.first)}},decls:8,vars:7,consts:[[1,"host"],[3,"title"],[1,"example-stretched-tabs","mat-elevation-z4",2,"margin-top","15px"],["matgroup",""],[3,"label","disabled"],["matTabContent",""],[3,"formGroup"],[1,"myForm",2,"margin","15px","height","100%"],[1,"inputs"],["appearance","fill"],["matInput","","formControlName","code","required",""],["matInput","","rows","6","formControlName","detail","required",""],["matInput","","rows","6","formControlName","detailAr","required",""],[3,"nameBtn","folderToSaveInServer","propertyOfParent","eventSubmitToParent","eventSubmitFromParent"],[1,"actions"],["mat-button","","type","button",3,"routerLink"],["mat-raised-button","","cdkFocusInitial","","color","primary",3,"disabled","click"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Ob(1,"app-title",1),a.fc(2,"translate"),a.Tb(3,"mat-tab-group",2,3),a.Tb(5,"mat-tab",4),a.fc(6,"translate"),a.Bc(7,Ut,28,26,"ng-template",5),a.Sb(),a.Sb(),a.Sb()),2&t&&(a.Bb(1),a.lc("title",a.gc(2,3,"admin.synthese.list.Synth\xe8se")),a.Bb(4),a.lc("label",a.gc(6,5,"admin.synthese.list.Synth\xe8se")),a.kc("disabled",!1))},directives:[J.a,It.c,It.a,It.b,F.t,F.n,F.h,Y.c,Y.f,nt.b,F.c,F.m,F.g,F.r,At.a,u.a,c.f],pipes:[ct.c],styles:["mat-card[_ngcontent-%COMP%]{margin:0 15px}mat-card[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.actions[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;margin:0 15px 15px 0}.host[_ngcontent-%COMP%]{margin:1em!important}.inputs[_ngcontent-%COMP%]{display:flex!important;flex-direction:column}  .mat-tab-body-content{height:calc(100vh - 210px)!important;overflow:auto}"]}),t})()}],canActivate:[n("xjdI").a]}];let $t=(()=>{class t{}return t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},imports:[[c.h.forChild(Et)],c.h]}),t})();var Qt=n("tk/3"),Ht=n("2thQ"),qt=n("Fr4G");let Xt=(()=>{class t{}return t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},imports:[[o.c,$t,Qt.c,Ht.a,F.i,F.q,i.a,ct.b,qt.a]]}),t})()},Dgsr:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n("2thQ"),o=n("ofXK"),c=n("tk/3"),a=n("fXoL");let s=(()=>{class t{}return t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},imports:[[o.c,i.a,c.c]]}),t})()},ZTdd:function(t,e,n){"use strict";n.d(e,"a",function(){return d});var i=n("mrSG"),o=n("2ChS"),c=n("fXoL"),a=n("MutI"),s=n("ofXK"),r=n("FKr1");function l(t,e){if(1&t){const t=c.Ub();c.Tb(0,"a",2),c.ac("click",function(){c.sc(t);const e=c.ec().$implicit;return c.ec().openLink(e)}),c.Tb(1,"span",3),c.Cc(2),c.Sb(),c.Sb()}if(2&t){const t=c.ec().$implicit;c.Bb(2),c.Ec("- ",t.substring(14,t.length-1),"")}}function b(t,e){if(1&t&&(c.Tb(0,"div"),c.Bc(1,l,3,1,"a",1),c.Sb()),2&t){const t=e.$implicit,n=c.ec();c.Bb(1),c.kc("ngIf",n.show(t))}}let d=(()=>{class t{constructor(t,e,n){this.bottomSheetRef=t,this.data=e,this.url=n,this.list=[],this.folder=""}ngOnInit(){if(this.data.fileName){const t=this.data.fileName.split(";");t.pop(),this.folder=this.data.folder,console.log(t),this.list=t}}openLink(t){return Object(i.a)(this,void 0,void 0,function*(){const e=+t.substring(t.length-1,t.length);t=isNaN(e)?t:t.substring(0,t.length-1),window.open(`${this.url}/${this.folder}/${t}`)})}show(t){if(""===t)return!1;const e=+t.substring(t.length-1,t.length);return!!isNaN(e)||1===e}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(o.d),c.Nb(o.a),c.Nb("BASE_URL"))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-download-sheet"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],["mat-list-item","",3,"click",4,"ngIf"],["mat-list-item","",3,"click"],["mat-line",""]],template:function(t,e){1&t&&(c.Tb(0,"mat-nav-list"),c.Bc(1,b,2,1,"div",0),c.Sb()),2&t&&(c.Bb(1),c.kc("ngForOf",e.list))},directives:[a.d,s.l,s.m,a.b,r.k],styles:[""]}),t})()}}]);