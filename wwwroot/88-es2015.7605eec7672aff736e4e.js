(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[88],{94589:function(t,e,n){"use strict";n.d(e,{b:function(){return m}});var i=n(92935),a=n(35366),o=n(37112),s=n(36278),r=n(84369);let l=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.model=""}ngOnInit(){this.model=this.data.model}onNoClick(){this.dialogRef.close()}onOkClick(){this.dialogRef.close("ok")}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(i.so),a.Y36(i.WI))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-delete"]],decls:15,vars:1,consts:[[1,"dialog"],["mat-dialog-title",""],["role","toolbar",1,"task-header"],[1,"content"],["mat-dialog-content",""],["mat-dialog-actions","",1,"actions"],["mat-button","","type","button",3,"click"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"mat-dialog-close","click"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"h1",1),a.TgZ(2,"mat-toolbar",2),a.TgZ(3,"span"),a._uU(4),a.qZA(),a.qZA(),a._UZ(5,"mat-divider"),a.qZA(),a.TgZ(6,"div",3),a.TgZ(7,"div",4),a.TgZ(8,"p"),a._uU(9,"Voulez-vous vraiment supprimer?"),a.qZA(),a.qZA(),a.TgZ(10,"div",5),a.TgZ(11,"button",6),a.NdJ("click",function(){return e.onNoClick()}),a._uU(12,"Annuler"),a.qZA(),a.TgZ(13,"button",7),a.NdJ("click",function(){return e.onOkClick()}),a._uU(14,"Ok"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(4),a.hij("Suppression ",e.model," "))},directives:[i.uh,o.Ye,s.d,i.xY,i.H8,r.lW,i.ZT],styles:[".dialog[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:hidden}.dialog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 5px}.dialog[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 20px 25px}.dialog[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse}"]}),t})(),m=(()=>{class t{constructor(t){this.dialog=t}openDialog(t){return this.dialog.open(l,{width:"750px",disableClose:!0,data:{model:t}}).afterClosed()}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(i.uw))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},20707:function(t,e,n){"use strict";n.d(e,{r:function(){return r}});var i=n(35366),a=n(31496),o=n(36278),s=n(61116);let r=(()=>{class t{constructor(t){this.mytranslate=t,this.title=""}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(a.n))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-title"]],inputs:{title:"title"},decls:7,vars:4,consts:[[1,"d-flex","w-100","mb-3"],[3,"className"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0),i.TgZ(1,"section",1),i.ALo(2,"async"),i.TgZ(3,"div"),i.TgZ(4,"h3"),i._uU(5),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i._UZ(6,"mat-divider")),2&t&&(i.xp6(1),i.Q6J("className","fr"===i.lcZ(2,2,e.mytranslate.lang)?"super-title border-left":"super-title border-right"),i.xp6(4),i.Oqu(e.title))},directives:[o.d],pipes:[s.Ov],styles:["section[_ngcontent-%COMP%]{display:flex!important;justify-content:space-between!important;align-items:center!important}.border-left[_ngcontent-%COMP%]{border-left:10px solid #d17c36}.border-right[_ngcontent-%COMP%]{border-right:10px solid #d17c36}.super-title[_ngcontent-%COMP%]{height:45px}.super-title[_ngcontent-%COMP%], .super-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center}.super-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#a19b9e;height:35px}.super-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin:0;padding:0 5px}"]}),t})()},97866:function(t,e,n){"use strict";n.d(e,{i:function(){return r}});var i=n(57823),a=n(61116),o=n(42693),s=n(35366);let r=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[a.ez,i.R,o.JF]]}),t})()},14709:function(t,e,n){"use strict";n.r(e),n.d(e,{RecommendationModule:function(){return ht}});var i=n(61116),a=n(35366),o=n(18314),s=n(55959),r=n(63337),l=n(92572),m=n(31041),c=n(50545),d=n(31496),u=n(20707),p=n(22797),g=n(13070),h=n(9550),f=n(13841),Z=n(87064),A=n(38497),x=n(31906),v=n(58378),y=n(44689),q=n(5609),b=n(59241),O=n(36278),T=n(79961),_=n(84369),w=n(77307),C=n(47340),J=n(87672),U=n(40994),N=n(60649);function L(t,e){if(1&t&&(a.TgZ(0,"mat-option",21),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.Q6J("value",t),a.xp6(1),a.hij("",t.label," ")}}function F(t,e){1&t&&a._UZ(0,"mat-spinner")}function Q(t,e){if(1&t&&(a.TgZ(0,"div",22),a.YNc(1,F,1,0,"mat-spinner",23),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.Q6J("ngIf",t.isLoadingResults)}}function S(t,e){1&t&&a._UZ(0,"th",24)}function P(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"td",25),a.TgZ(1,"mat-checkbox",26),a.NdJ("change",function(e){const n=a.CHM(t).$implicit,i=a.oxw();return e?i.check(n):null})("click",function(t){return t.stopPropagation()}),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit,n=a.oxw();a.xp6(1),a.Q6J("checked",n.isSelected(t))("aria-label",n.checkboxLabel(t))("disabled",!n.isAdmin)}}function k(t,e){1&t&&(a.TgZ(0,"th",27),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&t&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"admin.recommandation.update.ORGANISMES")))}function I(t,e){if(1&t&&(a.TgZ(0,"td",25),a._uU(1),a.qZA()),2&t){const t=e.$implicit,n=a.oxw();a.xp6(1),a.Oqu(t[n.columnDefs[1].columnDef])}}function Y(t,e){1&t&&a._UZ(0,"th",27)}function M(t,e){1&t&&a._UZ(0,"td",25)}function D(t,e){1&t&&a._UZ(0,"tr",28)}function R(t,e){1&t&&a._UZ(0,"tr",29)}const E=function(){return[2,5,25,50,100,250]};let $=(()=>{class t{constructor(t,e){this.uow=t,this.session=e,this.eventToParent=new a.vpe,this.selectedList=[],this.listFromParent=new a.vpe,this.update=new a.vpe,this.isLoadingResults=!0,this.resultsLength=0,this.isRateLimitReached=!1,this.dataSource=[],this.columnDefs=[{columnDef:"select",headName:"select"},{columnDef:"label",headName:"ORGANISMES"},{columnDef:"adresse",headName:"ADRESSE"}],this.displayedColumns=this.columnDefs.map(t=>t.columnDef),this.selection=new v.Ov(!0,[]),this.myAuto=new m.NI(""),this.idOrganisme=0}ngOnInit(){this.listFromParent.subscribe(t=>{this.selectedList=t,this.selectedList.forEach(t=>{this.selection.select(t)})}),this.getPage(0,10,"id","desc",this.idOrganisme),(0,x.T)(this.sort.sortChange,this.paginator.page,this.update).subscribe(t=>{!0===t?this.paginator.pageIndex=0:t=t,this.paginator.pageSize?t=t:this.paginator.pageSize=10;const e=this.paginator.pageIndex*this.paginator.pageSize;this.isLoadingResults=!0,this.getPage(e,this.paginator.pageSize,this.sort.active?this.sort.active:"id",this.sort.direction?this.sort.direction:"desc",this.idOrganisme)}),this.autoComplete()}get isAdmin(){return this.session.isAdmin}autoComplete(){this.filteredOptions=this.myAuto.valueChanges.pipe((0,y.w)(t=>t.length>1?this.uow.organismes.autocompletePost("label",t):[]))}selected(t){this.idOrganisme=t.option.value.id,this.update.next(!0)}clear(){this.myAuto.setValue({label:""}),this.idOrganisme=0,this.update.next(!0)}getPage(t,e,n,i,a){this.uow.organismes.getAll(t,e,n,i,a,"*").subscribe(t=>{this.dataSource=t.list,this.resultsLength=t.count,this.isLoadingResults=!1})}isSelected(t){return!!this.selectedList.find(e=>e.id===t.id)}check(t){const e=this.selectedList.findIndex(e=>t.id===e.id);-1!==e?this.selectedList.splice(e,1):this.selectedList.push(t),this.eventToParent.next(this.selectedList)}isAllSelected(){return this.selection.selected.length===this.paginator.pageSize}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.forEach(t=>this.selection.select(t))}checkboxLabel(t){return t?`${this.selectedList.find(e=>e.id===t.id)?"deselect":"select"} row ${t.id}`:(this.isAllSelected()?"select":"deselect")+" all"}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(l.Z),a.Y36(c.m))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-organismes"]],viewQuery:function(t,e){if(1&t&&(a.Gf(q.NW,7),a.Gf(b.YE,7)),2&t){let t;a.iGM(t=a.CRH())&&(e.paginator=t.first),a.iGM(t=a.CRH())&&(e.sort=t.first)}},inputs:{selectedList:"selectedList",listFromParent:"listFromParent"},outputs:{eventToParent:"eventToParent"},decls:32,vars:18,consts:[[1,"filter"],["appearance","fill",1,"col-md-6","mt-3"],["matInput","","placeholder","auto compl\xe9tion",3,"formControl","value","matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","matSuffix","",3,"click"],[1,"example-container","mat-elevation-z8"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container"],["mat-table","","multiTemplateDataRows","","aria-label","Elements","matSort","",3,"dataSource"],["table",""],["matColumnDef","select",2,"width","10px"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageIndex","0","pageSize","10","showFirstLastButtons","",3,"length","pageSizeOptions"],["paginator",""],[3,"value"],[1,"example-loading-shade"],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[3,"checked","aria-label","disabled","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){if(1&t&&(a._UZ(0,"mat-divider"),a.TgZ(1,"div",0),a.TgZ(2,"mat-form-field",1),a.TgZ(3,"mat-label"),a._uU(4),a.ALo(5,"translate"),a.qZA(),a._UZ(6,"input",2),a.TgZ(7,"mat-autocomplete",3,4),a.NdJ("optionSelected",function(t){return e.selected(t)}),a.YNc(9,L,2,2,"mat-option",5),a.ALo(10,"async"),a.qZA(),a.TgZ(11,"button",6),a.NdJ("click",function(){return e.clear()}),a.TgZ(12,"mat-icon"),a._uU(13,"clear"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(14,"div",7),a.YNc(15,Q,2,1,"div",8),a.TgZ(16,"div",9),a.TgZ(17,"table",10,11),a.ynx(19,12),a.YNc(20,S,1,0,"th",13),a.YNc(21,P,2,3,"td",14),a.BQk(),a.ynx(22,15),a.YNc(23,k,3,3,"th",16),a.YNc(24,I,2,1,"td",14),a.BQk(),a.ynx(25,15),a.YNc(26,Y,1,0,"th",16),a.YNc(27,M,1,0,"td",14),a.BQk(),a.YNc(28,D,1,0,"tr",17),a.YNc(29,R,1,0,"tr",18),a.qZA(),a.qZA(),a._UZ(30,"mat-paginator",19,20),a.qZA()),2&t){const t=a.MAs(8);a.xp6(4),a.Oqu(a.lcZ(5,13,"admin.recommandation.update.Organisme")),a.xp6(2),a.Q6J("formControl",e.myAuto)("value",e.myAuto.value.label)("matAutocomplete",t),a.xp6(3),a.Q6J("ngForOf",a.lcZ(10,15,e.filteredOptions)),a.xp6(6),a.Q6J("ngIf",e.isLoadingResults),a.xp6(2),a.Q6J("dataSource",e.dataSource),a.xp6(5),a.Q6J("matColumnDef",e.columnDefs[1].columnDef),a.xp6(3),a.Q6J("matColumnDef",e.columnDefs[2].columnDef),a.xp6(3),a.Q6J("matHeaderRowDef",e.displayedColumns),a.xp6(1),a.Q6J("matRowDefColumns",e.displayedColumns),a.xp6(1),a.Q6J("length",e.resultsLength)("pageSizeOptions",a.DdM(17,E))}},directives:[O.d,g.KE,g.hX,h.Nt,m.Fj,T.ZL,m.JJ,m.oH,T.XC,i.sg,_.lW,g.R9,w.Hw,i.O5,C.BZ,b.YE,C.w1,C.fO,C.Dz,C.as,C.nj,q.NW,Z.ey,J.$g,C.ge,C.ev,U.oG,b.nU,C.XQ,C.Gk],pipes:[N.X$,i.Ov],styles:["h3{margin:0!important}.host[_ngcontent-%COMP%]{margin:1em!important}  mat-checkbox label{margin-top:7px}tr[_ngcontent-%COMP%]:hover{cursor:pointer}.filter[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;width:100%}"]}),t})();function B(t,e){if(1&t&&(a.TgZ(0,"mat-option",40),a._uU(1),a.qZA()),2&t){const t=e.$implicit,n=a.oxw();a.Q6J("value",t.name),a.xp6(1),a.Oqu("fr"===n.mytranslate.langSync?t.name:t.nameAr)}}function V(t,e){if(1&t&&(a.TgZ(0,"mat-option",40),a._uU(1),a.qZA()),2&t){const t=e.$implicit,n=a.oxw(2);a.Q6J("value",t.id),a.xp6(1),a.Oqu("fr"===n.mytranslate.langSync?t.label:t.labelAr)}}function z(t,e){if(1&t&&(a.TgZ(0,"mat-form-field",14),a.TgZ(1,"mat-label"),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.TgZ(4,"mat-select",41),a.TgZ(5,"mat-option",16),a._uU(6,"..."),a.qZA(),a.YNc(7,V,2,2,"mat-option",17),a.ALo(8,"async"),a.qZA(),a.qZA()),2&t){const t=a.oxw();a.xp6(2),a.Oqu(a.lcZ(3,3,"admin.recommandation.update.Cycle")),a.xp6(2),a.Q6J("disabled",!t.isAdmin),a.xp6(3),a.Q6J("ngForOf",a.lcZ(8,5,t.cycles))}}function X(t,e){if(1&t&&(a.TgZ(0,"mat-option",40),a._uU(1),a.qZA()),2&t){const t=e.$implicit,n=a.oxw(2);a.Q6J("value",t.id),a.xp6(1),a.Oqu("fr"===n.mytranslate.langSync?t.mandat:t.mandatAr)}}function G(t,e){if(1&t&&(a.TgZ(0,"mat-form-field",14),a.TgZ(1,"mat-label"),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.TgZ(4,"mat-select",42),a.TgZ(5,"mat-option",16),a._uU(6,"..."),a.qZA(),a.YNc(7,X,2,2,"mat-option",17),a.ALo(8,"async"),a.qZA(),a.qZA()),2&t){const t=a.oxw();a.xp6(2),a.Oqu(a.lcZ(3,3,"admin.recommandation.update.Visite")),a.xp6(2),a.Q6J("disabled",!t.isAdmin),a.xp6(3),a.Q6J("ngForOf",a.lcZ(8,5,t.visites))}}function H(t,e){if(1&t&&(a.TgZ(0,"mat-option",40),a._uU(1),a.qZA()),2&t){const t=e.$implicit,n=a.oxw(2);a.Q6J("value",t.id),a.xp6(1),a.Oqu("fr"===n.mytranslate.langSync?t.label:t.labelAr)}}function j(t,e){if(1&t&&(a.TgZ(0,"mat-form-field",14),a.TgZ(1,"mat-label"),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.TgZ(4,"mat-select",43),a.TgZ(5,"mat-option",16),a._uU(6,"..."),a.qZA(),a.YNc(7,H,2,2,"mat-option",17),a.ALo(8,"async"),a.qZA(),a.qZA()),2&t){const t=a.oxw();a.xp6(2),a.Oqu(a.lcZ(3,3,"admin.recommandation.update.Organe")),a.xp6(2),a.Q6J("disabled",!t.isAdmin),a.xp6(3),a.Q6J("ngForOf",a.lcZ(8,5,t.organes))}}function W(t,e){if(1&t&&(a.TgZ(0,"mat-option",40),a._uU(1),a.qZA()),2&t){const t=e.$implicit,n=a.oxw();a.Q6J("value",t.id),a.xp6(1),a.hij("","fr"===n.mytranslate.langSync?t.label:t.labelAr," ")}}function K(t,e){if(1&t&&(a.TgZ(0,"mat-option",40),a._uU(1),a.qZA()),2&t){const t=e.$implicit,n=a.oxw(2);a.Q6J("value",t.id),a.xp6(1),a.hij(" ","fr"===n.mytranslate.langSync?t.label:t.labelAr," ")}}function tt(t,e){if(1&t&&(a.TgZ(0,"mat-optgroup",44),a.YNc(1,K,2,2,"mat-option",17),a.qZA()),2&t){const t=e.$implicit,n=a.oxw();a.Q6J("label","fr"===n.mytranslate.langSync?t.label:t.labelAr),a.xp6(1),a.Q6J("ngForOf",t.sousAxes)}}function et(t,e){if(1&t&&(a.TgZ(0,"mat-option",40),a._uU(1),a.qZA()),2&t){const t=e.$implicit,n=a.oxw();a.Q6J("value",t.id),a.xp6(1),a.Oqu("fr"===n.mytranslate.langSync?t.nom:t.nomAr)}}function nt(t,e){if(1&t&&(a.TgZ(0,"mat-option",40),a._uU(1),a.qZA()),2&t){const t=e.$implicit,n=a.oxw();a.Q6J("value",t.name),a.xp6(1),a.Oqu("fr"===n.mytranslate.langSync?t.name:t.nameAr)}}function it(t,e){if(1&t&&(a.TgZ(0,"mat-form-field",33),a.TgZ(1,"mat-label"),a._uU(2),a.ALo(3,"translate"),a.qZA(),a._UZ(4,"textarea",45),a.qZA()),2&t){const t=a.oxw();a.xp6(2),a.Oqu(a.lcZ(3,2,"admin.recommandation.update.Etatdavancement")),a.xp6(2),a.Q6J("readonly",!t.isAdmin)}}const at=function(){return["/admin/recommendation/list"]};let ot=(()=>{class t{constructor(t,e,n,i,r,l){this.route=t,this.router=e,this.uow=n,this.fb=i,this.session=r,this.mytranslate=l,this.eventToChild=new a.vpe,this.organismes=this.uow.organismes.get(),this.axes=this.uow.axes.get(),this.mecanismes=this.uow.mecanismes,this.etats=this.uow.etats,this.cycles=this.uow.cycles.get(),this.visites=this.uow.visites.get(),this.organes=this.uow.organes.get(),this.pays=this.uow.pays.get(),this.sousAxes=[],this.folderToSaveInServer="recommandation",this.pieceJointeTo=new s.xQ,this.pieceJointeFrom=new s.xQ,this.eventSubmitFromParent=new s.xQ,this.o=new o.BW,this.id=0,this.title="Nouveau utilisateur",this.listOrganisme=[]}ngOnInit(){this.createForm(),this.stringArray(),this.pieceJointeFrom.subscribe(t=>this.myForm.get("pieceJointe").setValue(t)),setTimeout(()=>this.pieceJointeTo.next(this.o.pieceJointe),100),this.id=+this.route.snapshot.paramMap.get("id"),0!==this.id&&this.uow.recommendations.getOne(this.id).subscribe(t=>{this.o=t,this.handleEtatAvancementChiffre(this.o.etat),this.o.recomOrgs.forEach(t=>{this.listOrganisme.push({id:t.idOrganisme})}),this.eventToChild.emit(this.listOrganisme),this.createForm(),this.stringArray()})}stringArray(){this.myForm.get("axes").setValue(this.check(this.o.axes)),this.myForm.get("sousAxes").setValue(this.check(this.o.sousAxes))}check(t){return t&&""!==t?t.includes("[")?JSON.parse(t):[+t]:[]}get isAdmin(){return this.session.isAdmin}get showEtatDavancement(){return!(!this.myForm.get("etat").value.includes("cour")&&!this.myForm.get("etat").value.includes("continue"))}createForm(){this.myForm=this.fb.group({id:this.o.id,codeRecommendation:[this.o.codeRecommendation],nom:[this.o.nom],codeRecommendationAr:[this.o.codeRecommendationAr],nomAr:[this.o.nomAr],mecanisme:[this.o.mecanisme],idVisite:[this.o.idVisite],idOrgane:[this.o.idOrgane],idCycle:[this.o.idCycle],axes:[this.o.axes],sousAxes:[this.o.sousAxes],etat:[this.o.etat],etatAvancement:[this.o.etatAvancement],etatAvancementChiffre:[this.o.etatAvancementChiffre],observation:[this.o.observation],complement:[this.o.complement],pieceJointe:[this.o.pieceJointe],idPays:[this.o.idPays],annee:[this.o.annee],anneeDisplay:[this.o.anneeDisplay],anneeDisplayAr:[this.o.anneeDisplayAr]})}get mecanisme(){return this.myForm.get("mecanisme")}get idVisite(){return this.myForm.get("idVisite")}get idCycle(){return this.myForm.get("idCycle")}get idOrgane(){return this.myForm.get("idOrgane")}get cycleActive(){return"Examen p\xe9riodique universal"===this.mecanisme.value}get visiteActive(){return"Proc\xe9dure sp\xe9ciale"===this.mecanisme.value}get organeActive(){return"Organes de trait\xe9s"===this.mecanisme.value}submit(t){t.axes=JSON.stringify(t.axes),t.sousAxes=JSON.stringify(t.sousAxes),0===this.id?this.uow.recommendations.post(t).subscribe(t=>{const e=[];this.listOrganisme.map(n=>{e.push({idOrganisme:n.id,idRecommendation:t.id,date:new Date})}),this.uow.recomOrgs.postRange(e).subscribe(t=>{this.router.navigateByUrl("/admin/recommendation/list"),this.eventSubmitFromParent.next(!0)})}):this.uow.recommendations.put(t.id,t).subscribe(t=>{const e=[];this.listOrganisme.map(t=>{e.push({idOrganisme:t.id,idRecommendation:this.o.id,date:new Date})}),this.uow.recomOrgs.putRange(this.o.recomOrgs,e).subscribe(t=>{this.router.navigateByUrl("/admin/recommendation/list"),this.eventSubmitFromParent.next(!0)})})}axeChange(t){this.uow.sousAxes.getByIdAxe(t).subscribe(t=>{this.sousAxes=t})}etat(t){this.handleEtatAvancementChiffre(t)}handleEtatAvancementChiffre(t){let e=this.myForm.get("etatAvancementChiffre").value;t.includes("R\xe9alis\xe9")?e=100:t.includes("Non")?e=0:t.includes("cours")?(e=e>5?e:5,this.myForm.get("etatAvancementChiffre").enable()):this.myForm.get("etatAvancementChiffre").enable(),this.myForm.get("etatAvancementChiffre").setValue(e)}selectChange(t){this.idVisite.setValue(null),this.idCycle.setValue(null),this.idOrgane.setValue(null)}updateListOrganisme(t){this.listOrganisme=t;let e=0,n=!0;this.listOrganisme=this.listOrganisme.filter(t=>(t.id===e&&(n=!1),e=t.id,n))}reset(){this.o=new o.BW,this.createForm()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(r.gz),a.Y36(r.F0),a.Y36(l.Z),a.Y36(m.qu),a.Y36(c.m),a.Y36(d.n))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-update"]],decls:119,vars:94,consts:[[1,"host"],[3,"title"],[1,""],[3,"formGroup"],[2,"margin-top","15px"],[1,"input"],["appearance","fill",2,"width","20%"],["matInput","","formControlName","codeRecommendation","required","",3,"readonly"],[2,"margin","0 1%"],["appearance","fill",2,"width","78%"],["matInput","","formControlName","nom","required","",3,"readonly"],["matInput","","formControlName","codeRecommendationAr","required","",3,"readonly"],["matInput","","formControlName","nomAr","required","",3,"readonly"],[1,"inputs2"],["appearance","fill"],["formControlName","mecanisme",3,"disabled","selectionChange"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill",4,"ngIf"],["formControlName","axes","multiple",""],["formControlName","sousAxes","multiple",""],["value",""],[3,"label",4,"ngFor","ngForOf"],["appearance","fill",2,"width","48%"],["formControlName","idPays",3,"disabled"],["appearance","fill",2,"width","10%"],["type","number","min","0","matInput","","formControlName","annee",3,"readonly"],["appearance","fill",2,"width","18%"],["type","text","matInput","","formControlName","anneeDisplay",3,"readonly"],["type","text","matInput","","formControlName","anneeDisplayAr",3,"readonly"],["formControlName","etat",3,"disabled","selectionChange"],["matInput","","formControlName","etatAvancementChiffre","type","number","min","0","max","100","required",""],["appearance","fill","style","width: 100%;",4,"ngIf"],["appearance","fill",2,"width","100%"],["matInput","","rows","0","formControlName","complement",3,"readonly"],[3,"disabled","nameBtn","folderToSaveInServer","propertyOfParent","eventSubmitToParent","eventSubmitFromParent"],[3,"listFromParent","eventToParent"],[1,"actions"],["mat-button","","type","button",3,"routerLink"],["mat-raised-button","","cdkFocusInitial","","color","primary",3,"disabled","click"],[3,"value"],["formControlName","idCycle",3,"disabled"],["formControlName","idVisite",3,"disabled"],["formControlName","idOrgane",3,"disabled"],[3,"label"],["matInput","","rows","0","formControlName","etatAvancement",3,"readonly"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a._UZ(1,"app-title",1),a.ALo(2,"translate"),a.TgZ(3,"div",2),a.TgZ(4,"form",3),a.TgZ(5,"mat-card",4),a.TgZ(6,"div",5),a.TgZ(7,"mat-form-field",6),a.TgZ(8,"mat-label"),a._uU(9),a.ALo(10,"translate"),a.qZA(),a._UZ(11,"input",7),a.qZA(),a._UZ(12,"span",8),a.TgZ(13,"mat-form-field",9),a.TgZ(14,"mat-label"),a._uU(15),a.ALo(16,"translate"),a.qZA(),a._UZ(17,"input",10),a.qZA(),a.qZA(),a.TgZ(18,"div",5),a.TgZ(19,"mat-form-field",6),a.TgZ(20,"mat-label"),a._uU(21),a.ALo(22,"translate"),a.qZA(),a._UZ(23,"input",11),a.qZA(),a._UZ(24,"span",8),a.TgZ(25,"mat-form-field",9),a.TgZ(26,"mat-label"),a._uU(27),a.ALo(28,"translate"),a.qZA(),a._UZ(29,"input",12),a.qZA(),a.qZA(),a.TgZ(30,"div",13),a.TgZ(31,"mat-form-field",14),a.TgZ(32,"mat-label"),a._uU(33),a.ALo(34,"translate"),a.qZA(),a.TgZ(35,"mat-select",15),a.NdJ("selectionChange",function(t){return e.selectChange(t.value)}),a.TgZ(36,"mat-option",16),a._uU(37,"..."),a.qZA(),a.YNc(38,B,2,2,"mat-option",17),a.ALo(39,"async"),a.qZA(),a.qZA(),a.YNc(40,z,9,7,"mat-form-field",18),a.YNc(41,G,9,7,"mat-form-field",18),a.YNc(42,j,9,7,"mat-form-field",18),a.qZA(),a.TgZ(43,"div",13),a.TgZ(44,"mat-form-field",14),a.TgZ(45,"mat-label"),a._uU(46),a.ALo(47,"translate"),a.qZA(),a.TgZ(48,"mat-select",19),a.YNc(49,W,2,2,"mat-option",17),a.ALo(50,"async"),a.qZA(),a.qZA(),a.TgZ(51,"mat-form-field",14),a.TgZ(52,"mat-label"),a._uU(53),a.ALo(54,"translate"),a.qZA(),a.TgZ(55,"mat-select",20),a.TgZ(56,"mat-option",21),a._uU(57,"-- ... --"),a.qZA(),a.YNc(58,tt,2,2,"mat-optgroup",22),a.ALo(59,"async"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(60,"mat-form-field",23),a.TgZ(61,"mat-label"),a._uU(62),a.ALo(63,"translate"),a.qZA(),a.TgZ(64,"mat-select",24),a.TgZ(65,"mat-option",16),a._uU(66,"..."),a.qZA(),a.YNc(67,et,2,2,"mat-option",17),a.ALo(68,"async"),a.qZA(),a.qZA(),a._UZ(69,"span",8),a.TgZ(70,"mat-form-field",25),a.TgZ(71,"mat-label"),a._uU(72),a.ALo(73,"translate"),a.qZA(),a._UZ(74,"input",26),a.qZA(),a._UZ(75,"span",8),a.TgZ(76,"mat-form-field",27),a.TgZ(77,"mat-label"),a._uU(78),a.ALo(79,"translate"),a.qZA(),a._UZ(80,"input",28),a.qZA(),a._UZ(81,"span",8),a.TgZ(82,"mat-form-field",27),a.TgZ(83,"mat-label"),a._uU(84),a.ALo(85,"translate"),a.qZA(),a._UZ(86,"input",29),a.qZA(),a.TgZ(87,"mat-form-field",9),a.TgZ(88,"mat-label"),a._uU(89),a.ALo(90,"translate"),a.qZA(),a.TgZ(91,"mat-select",30),a.NdJ("selectionChange",function(t){return e.etat(t.value)}),a.TgZ(92,"mat-option",21),a._uU(93,"..."),a.qZA(),a.YNc(94,nt,2,2,"mat-option",17),a.ALo(95,"async"),a.qZA(),a.qZA(),a._UZ(96,"span",8),a.TgZ(97,"mat-form-field",6),a.TgZ(98,"mat-label"),a._uU(99),a.ALo(100,"translate"),a.qZA(),a._UZ(101,"input",31),a.qZA(),a.YNc(102,it,5,4,"mat-form-field",32),a.TgZ(103,"mat-form-field",33),a.TgZ(104,"mat-label"),a._uU(105),a.ALo(106,"translate"),a.qZA(),a._UZ(107,"textarea",34),a.qZA(),a._UZ(108,"app-upload",35),a.ALo(109,"translate"),a.qZA(),a.qZA(),a.TgZ(110,"app-organismes",36),a.NdJ("eventToParent",function(t){return e.updateListOrganisme(t)}),a.qZA(),a.TgZ(111,"div",37),a.TgZ(112,"button",38),a._uU(113),a.ALo(114,"translate"),a.qZA(),a._uU(115,"\xa0\xa0 "),a.TgZ(116,"button",39),a.NdJ("click",function(){return e.submit(e.myForm.value)}),a._uU(117),a.ALo(118,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(1),a.s9C("title",a.lcZ(2,47,"admin.recommandation.list.Recommandation")),a.xp6(3),a.Q6J("formGroup",e.myForm),a.xp6(5),a.Oqu(a.lcZ(10,49,"admin.recommandation.list.code")),a.xp6(2),a.Q6J("readonly",!e.isAdmin),a.xp6(4),a.Oqu(a.lcZ(16,51,"admin.recommandation.list.nom")),a.xp6(2),a.Q6J("readonly",!e.isAdmin),a.xp6(4),a.Oqu(a.lcZ(22,53,"admin.recommandation.list.codeAr")),a.xp6(2),a.Q6J("readonly",!e.isAdmin),a.xp6(4),a.Oqu(a.lcZ(28,55,"admin.recommandation.list.nomAr")),a.xp6(2),a.Q6J("readonly",!e.isAdmin),a.xp6(4),a.Oqu(a.lcZ(34,57,"admin.recommandation.list.mecanisme")),a.xp6(2),a.Q6J("disabled",!e.isAdmin),a.xp6(3),a.Q6J("ngForOf",a.lcZ(39,59,e.mecanismes)),a.xp6(2),a.Q6J("ngIf",e.cycleActive),a.xp6(1),a.Q6J("ngIf",e.visiteActive),a.xp6(1),a.Q6J("ngIf",e.organeActive),a.xp6(4),a.Oqu(a.lcZ(47,61,"admin.recommandation.list.Axe")),a.xp6(3),a.Q6J("ngForOf",a.lcZ(50,63,e.axes)),a.xp6(4),a.Oqu(a.lcZ(54,65,"admin.recommandation.list.Sousaxe")),a.xp6(5),a.Q6J("ngForOf",a.lcZ(59,67,e.axes)),a.xp6(4),a.Oqu(a.lcZ(63,69,"admin.recommandation.update.Pays")),a.xp6(2),a.Q6J("disabled",!e.isAdmin),a.xp6(3),a.Q6J("ngForOf",a.lcZ(68,71,e.pays)),a.xp6(5),a.Oqu(a.lcZ(73,73,"admin.recommandation.update.Annee")),a.xp6(2),a.Q6J("readonly",!e.isAdmin),a.xp6(4),a.Oqu(a.lcZ(79,75,"admin.recommandation.update.AnneeDisplay")),a.xp6(2),a.Q6J("readonly",!e.isAdmin),a.xp6(4),a.Oqu(a.lcZ(85,77,"admin.recommandation.update.AnneeDisplayAr")),a.xp6(2),a.Q6J("readonly",!e.isAdmin),a.xp6(3),a.Oqu(a.lcZ(90,79,"admin.recommandation.list.Etatdemisenoeuvre")),a.xp6(2),a.Q6J("disabled",!e.isAdmin),a.xp6(3),a.Q6J("ngForOf",a.lcZ(95,81,e.etats)),a.xp6(5),a.Oqu(a.lcZ(100,83,"admin.recommandation.update.Etaten")),a.xp6(3),a.Q6J("ngIf",e.showEtatDavancement),a.xp6(3),a.Oqu(a.lcZ(106,85,"admin.recommandation.list.complement")),a.xp6(2),a.Q6J("readonly",!e.isAdmin),a.xp6(1),a.s9C("nameBtn",a.lcZ(109,87,"admin.recommandation.list.OBSERVATIONS")),a.Q6J("disabled",!e.isAdmin)("folderToSaveInServer",e.folderToSaveInServer)("propertyOfParent",e.pieceJointeTo)("eventSubmitToParent",e.pieceJointeFrom)("eventSubmitFromParent",e.eventSubmitFromParent),a.xp6(2),a.Q6J("listFromParent",e.eventToChild),a.xp6(2),a.Q6J("routerLink",a.DdM(93,at)),a.xp6(1),a.Oqu(a.lcZ(114,89,"admin.Retour")),a.xp6(3),a.Q6J("disabled",e.myForm.invalid||!e.isAdmin),a.xp6(1),a.Oqu(a.lcZ(118,91,"admin.Enregistre")))},directives:[u.r,m._Y,m.JL,m.sg,p.a8,g.KE,g.hX,h.Nt,m.Fj,m.JJ,m.u,m.Q7,f.gD,Z.ey,i.sg,i.O5,m.qQ,m.wV,m.Fd,A.o,$,_.lW,r.rH,Z.Nv],pipes:[N.X$,i.Ov],styles:["mat-card[_ngcontent-%COMP%]{margin:0 15px}mat-card[_ngcontent-%COMP%]   .inputs2[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(25vw,1fr));grid-column-gap:6px;grid-row-gap:6px;align-items:center}.actions[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{display:flex}.actions[_ngcontent-%COMP%]{flex-direction:row-reverse;margin:30px 0}.host[_ngcontent-%COMP%]{margin:1em!important}"]}),t})();var st=n(46475);let rt=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-recommendation"]],decls:1,vars:0,template:function(t,e){1&t&&a._UZ(0,"router-outlet")},directives:[r.lC],styles:[""]}),t})();var lt=n(46589);const mt=[{path:"",redirectTo:"",pathMatch:"full"},{path:"",component:rt,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:st.n},{path:"update/:id",component:ot}],canActivate:[lt.l]}];let ct=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[r.Bz.forChild(mt)],r.Bz]}),t})();var dt=n(42693),ut=n(57823),pt=n(97866),gt=n(15675);let ht=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[N.aw,i.ez,ct,dt.JF,ut.R,m.u5,m.UX,pt.i,gt.f]]}),t})()},12996:function(t,e,n){"use strict";n.d(e,{x:function(){return d}});var i=n(64762),a=n(34411),o=n(35366),s=n(85078),r=n(61116),l=n(87064);function m(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"a",2),o.NdJ("click",function(){o.CHM(t);const e=o.oxw().$implicit;return o.oxw().openLink(e)}),o.TgZ(1,"span",3),o._uU(2),o.qZA(),o.qZA()}if(2&t){const t=o.oxw().$implicit;o.xp6(2),o.hij("- ",t.substring(14,t.length-1),"")}}function c(t,e){if(1&t&&(o.TgZ(0,"div"),o.YNc(1,m,3,1,"a",1),o.qZA()),2&t){const t=e.$implicit,n=o.oxw();o.xp6(1),o.Q6J("ngIf",n.show(t))}}let d=(()=>{class t{constructor(t,e,n){this.bottomSheetRef=t,this.data=e,this.url=n,this.list=[],this.folder=""}ngOnInit(){if(this.data.fileName){const t=this.data.fileName.split(";");t.pop(),this.folder=this.data.folder,this.list=t}}openLink(t){return(0,i.mG)(this,void 0,void 0,function*(){const e=+t.substring(t.length-1,t.length);t=isNaN(e)?t:t.substring(0,t.length-1),window.open(`${this.url}/${this.folder}/${t}`)})}show(t){if(""===t)return!1;const e=+t.substring(t.length-1,t.length);return!!isNaN(e)||1===e}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(a.oL),o.Y36(a.OG),o.Y36("BASE_URL"))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-download-sheet"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],["mat-list-item","",3,"click",4,"ngIf"],["mat-list-item","",3,"click"],["mat-line",""]],template:function(t,e){1&t&&(o.TgZ(0,"mat-nav-list"),o.YNc(1,c,2,1,"div",0),o.qZA()),2&t&&(o.xp6(1),o.Q6J("ngForOf",e.list))},directives:[s.Hk,r.sg,r.O5,s.Tg,l.X2],styles:[""]}),t})()}}]);