(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{F76L:function(t,e,i){"use strict";i.d(e,"a",function(){return At}),i.d(e,"b",function(){return Ft});var n=i("mrSG"),a=i("0IaG"),o=i("fXoL"),c=i("/t3+"),s=i("f0Cb"),m=i("ofXK"),r=i("bTqV");function l(t,e){if(1&t&&(o.Tb(0,"li"),o.Cc(1),o.Sb()),2&t){const t=o.ec();o.Bb(1),o.Ec("Cylce: ",t.o.cycle.label,"")}}function b(t,e){if(1&t&&(o.Tb(0,"li"),o.Cc(1),o.Sb()),2&t){const t=o.ec();o.Bb(1),o.Ec("Visite: ",t.o.visite.mandat,"")}}function d(t,e){if(1&t&&(o.Tb(0,"li"),o.Cc(1),o.Sb()),2&t){const t=o.ec();o.Bb(1),o.Ec("Organe de trait\xe9: ",t.o.organe.label,"")}}let u=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.title=""}ngOnInit(){this.o=this.data.model,this.title=this.data.title,console.log(this.o)}onNoClick(){this.dialogRef.close()}onOkClick(t){}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(a.g),o.Nb(a.a))},t.\u0275cmp=o.Hb({type:t,selectors:[["app-update"]],decls:23,vars:8,consts:[[1,"dialog"],["mat-dialog-title",""],["role","toolbar",1,"task-header"],[1,"content"],["mat-dialog-content",""],[4,"ngIf"],["mat-dialog-actions","",1,"actions"],["mat-button","","type","button",3,"click"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Tb(1,"h1",1),o.Tb(2,"mat-toolbar",2),o.Tb(3,"span"),o.Cc(4),o.Sb(),o.Sb(),o.Ob(5,"mat-divider"),o.Sb(),o.Tb(6,"div",3),o.Tb(7,"div",4),o.Tb(8,"ul"),o.Tb(9,"li"),o.Cc(10),o.Sb(),o.Tb(11,"li"),o.Cc(12),o.Sb(),o.Tb(13,"li"),o.Cc(14),o.Sb(),o.Tb(15,"li"),o.Cc(16),o.Sb(),o.Bc(17,l,2,1,"li",5),o.Bc(18,b,2,1,"li",5),o.Bc(19,d,2,1,"li",5),o.Sb(),o.Sb(),o.Tb(20,"div",6),o.Tb(21,"button",7),o.ac("click",function(){return e.onNoClick()}),o.Cc(22,"Retour"),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&t&&(o.Bb(4),o.Dc(e.o.nom),o.Bb(6),o.Dc(e.o.etat),o.Bb(2),o.Dc(e.o.mecanisme),o.Bb(2),o.Ec("Axe: ",e.o.axes,""),o.Bb(2),o.Ec("Sous axe: ",e.o.sousAxes,""),o.Bb(1),o.kc("ngIf",e.o.cycle),o.Bb(1),o.kc("ngIf",e.o.visite),o.Bb(1),o.kc("ngIf",e.o.organe))},directives:[a.h,c.a,s.a,a.e,m.m,a.c,r.a],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.dialog[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:hidden}.dialog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 5px}.dialog[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 20px 25px}.dialog[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse}.myrow[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),t})();var f=i("M9IT"),h=i("Dh3D"),g=i("VRyK"),p=i("3Pt+"),S=i("eIep"),C=i("ZTdd"),y=i("7q3A"),B=i("5F3i"),T=i("J3i2"),D=i("M0ag"),v=i("tyNb"),x=i("2ChS"),O=i("/ysL"),k=i("7EHt"),w=i("NFeN"),A=i("kmnG"),F=i("qFsG"),N=i("d3UM"),P=i("FKr1"),R=i("+0xr"),I=i("Xa2L"),E=i("Qu3c"),M=i("sYmb");const L=function(){return["/admin/recommendation/update",0]};function V(t,e){1&t&&(o.Tb(0,"button",34),o.Tb(1,"mat-icon"),o.Cc(2,"add"),o.Sb(),o.Cc(3),o.fc(4,"translate"),o.Sb()),2&t&&(o.kc("routerLink",o.mc(4,L)),o.Bb(3),o.Ec(" ",o.gc(4,2,"admin.recommandation.list.Recommandation")," "))}function _(t,e){if(1&t&&(o.Tb(0,"mat-option",35),o.Cc(1),o.Sb()),2&t){const t=e.$implicit,i=o.ec();o.kc("value",t.id),o.Bb(1),o.Dc("fr"===i.mytranslate.langSync?t.nom:t.nomAr)}}function $(t,e){if(1&t&&(o.Tb(0,"mat-option",35),o.Cc(1),o.Sb()),2&t){const t=e.$implicit,i=o.ec(2);o.kc("value",t.annee),o.Bb(1),o.Dc("fr"===i.mytranslate.langSync?t.anneeDisplay:t.anneeDisplayAr)}}function J(t,e){if(1&t&&(o.Tb(0,"mat-form-field",8),o.Tb(1,"mat-label"),o.Cc(2),o.fc(3,"translate"),o.Sb(),o.Tb(4,"mat-select",36),o.Bc(5,$,2,2,"mat-option",12),o.Sb(),o.Sb()),2&t){const t=o.ec();o.Bb(2),o.Dc(o.gc(3,2,"admin.questionnaire.list.ann\xe9e")),o.Bb(3),o.kc("ngForOf",t.annees)}}function z(t,e){if(1&t&&(o.Tb(0,"mat-option",35),o.Cc(1),o.Sb()),2&t){const t=e.$implicit,i=o.ec();o.kc("value",t.name),o.Bb(1),o.Dc("fr"===i.mytranslate.langSync?t.name:t.nameAr)}}function G(t,e){if(1&t&&(o.Tb(0,"mat-option",35),o.Cc(1),o.Sb()),2&t){const t=e.$implicit,i=o.ec(2);o.kc("value",t.id),o.Bb(1),o.Dc("fr"===i.mytranslate.langSync?t.label:t.labelAr)}}function Q(t,e){if(1&t&&(o.Tb(0,"mat-form-field",8),o.Tb(1,"mat-label"),o.Cc(2),o.fc(3,"translate"),o.Sb(),o.Tb(4,"mat-select",37),o.Tb(5,"mat-option",11),o.Cc(6,"..."),o.Sb(),o.Bc(7,G,2,2,"mat-option",12),o.fc(8,"async"),o.Sb(),o.Sb()),2&t){const t=o.ec();o.Bb(2),o.Dc(o.gc(3,2,"admin.recommandation.list.Cycle")),o.Bb(5),o.kc("ngForOf",o.gc(8,4,t.cycles))}}function U(t,e){if(1&t&&(o.Tb(0,"mat-option",35),o.Cc(1),o.Sb()),2&t){const t=e.$implicit,i=o.ec(2);o.kc("value",t.id),o.Bb(1),o.Dc("fr"===i.mytranslate.langSync?t.mandat:t.mandatAr)}}function q(t,e){if(1&t&&(o.Tb(0,"mat-form-field",8),o.Tb(1,"mat-label"),o.Cc(2),o.fc(3,"translate"),o.Sb(),o.Tb(4,"mat-select",38),o.Tb(5,"mat-option",11),o.Cc(6,"..."),o.Sb(),o.Bc(7,U,2,2,"mat-option",12),o.fc(8,"async"),o.Sb(),o.Sb()),2&t){const t=o.ec();o.Bb(2),o.Dc(o.gc(3,2,"admin.recommandation.list.Visite")),o.Bb(5),o.kc("ngForOf",o.gc(8,4,t.visites))}}function H(t,e){if(1&t&&(o.Tb(0,"mat-option",35),o.Cc(1),o.Sb()),2&t){const t=e.$implicit,i=o.ec(2);o.kc("value",t.id),o.Bb(1),o.Dc("fr"===i.mytranslate.langSync?t.label:t.labelAr)}}function j(t,e){if(1&t&&(o.Tb(0,"mat-form-field",8),o.Tb(1,"mat-label"),o.Cc(2),o.fc(3,"translate"),o.Sb(),o.Tb(4,"mat-select",39),o.Tb(5,"mat-option",11),o.Cc(6,"..."),o.Sb(),o.Bc(7,H,2,2,"mat-option",12),o.fc(8,"async"),o.Sb(),o.Sb()),2&t){const t=o.ec();o.Bb(2),o.Dc(o.gc(3,2,"admin.recommandation.list.Organe")),o.Bb(5),o.kc("ngForOf",o.gc(8,4,t.organes))}}function X(t,e){if(1&t&&(o.Tb(0,"mat-option",35),o.Cc(1),o.Sb()),2&t){const t=e.$implicit,i=o.ec();o.kc("value",t.name),o.Bb(1),o.Dc("fr"===i.mytranslate.langSync?t.name:t.nameAr)}}function K(t,e){if(1&t&&(o.Tb(0,"mat-option",35),o.Cc(1),o.Sb()),2&t){const t=e.$implicit,i=o.ec();o.kc("value",t.id),o.Bb(1),o.Dc("fr"===i.mytranslate.langSync?t.label:t.labelAr)}}function Y(t,e){if(1&t&&(o.Tb(0,"mat-option",35),o.Cc(1),o.Sb()),2&t){const t=e.$implicit,i=o.ec();o.kc("value",t.id),o.Bb(1),o.Dc("fr"===i.mytranslate.langSync?t.label:t.labelAr)}}function Z(t,e){if(1&t&&(o.Tb(0,"mat-option",35),o.Cc(1),o.Sb()),2&t){const t=e.$implicit,i=o.ec(2);o.kc("value",t.id),o.Bb(1),o.Ec(" ","fr"===i.mytranslate.langSync?t.label:t.labelAr,"")}}function W(t,e){if(1&t&&(o.Tb(0,"mat-form-field",8),o.Tb(1,"mat-label"),o.Cc(2),o.fc(3,"translate"),o.Sb(),o.Tb(4,"mat-select",40),o.Tb(5,"mat-option",11),o.Cc(6,"..."),o.Sb(),o.Bc(7,Z,2,2,"mat-option",12),o.fc(8,"async"),o.Sb(),o.Sb()),2&t){const t=o.ec();o.Bb(2),o.Dc(o.gc(3,2,"admin.recommandation.list.DEPARTEMENT")),o.Bb(5),o.kc("ngForOf",o.gc(8,4,t.organismes))}}function tt(t,e){1&t&&o.Ob(0,"mat-spinner")}function et(t,e){if(1&t&&(o.Tb(0,"div",41),o.Bc(1,tt,1,0,"mat-spinner",42),o.Sb()),2&t){const t=o.ec();o.Bb(1),o.kc("ngIf",t.isLoadingResults)}}function it(t,e){1&t&&(o.Tb(0,"th",43),o.Cc(1),o.fc(2,"translate"),o.Sb()),2&t&&(o.Bb(1),o.Dc(o.gc(2,1,"admin.recommandation.list.code")))}function nt(t,e){if(1&t&&(o.Tb(0,"td",44),o.Cc(1),o.Sb()),2&t){const t=e.$implicit,i=o.ec();o.Bb(1),o.Ec(" ","fr"===i.mytranslate.langSync?t.codeRecommendation:i.displayFrIfArNull(t.codeRecommendation,t.codeRecommendationAr)," ")}}function at(t,e){1&t&&(o.Tb(0,"th",43),o.Cc(1),o.fc(2,"translate"),o.Sb()),2&t&&(o.Bb(1),o.Dc(o.gc(2,1,"admin.recommandation.list.nom")))}function ot(t,e){if(1&t&&(o.Tb(0,"td",44),o.Cc(1),o.Sb()),2&t){const t=e.$implicit,i=o.ec();o.Bb(1),o.Dc("fr"===i.mytranslate.langSync?t.nom:i.displayFrIfArNull(t.nom,t.nomAr))}}function ct(t,e){1&t&&(o.Tb(0,"th",43),o.Cc(1),o.fc(2,"translate"),o.Sb()),2&t&&(o.Bb(1),o.Dc(o.gc(2,1,"admin.recommandation.list.mecanisme")))}function st(t,e){if(1&t&&(o.Tb(0,"td",44),o.Cc(1),o.Sb()),2&t){const t=e.$implicit,i=o.ec();o.Bb(1),o.Dc(i.displayMulti(t.mecanisme,t.etat).m)}}function mt(t,e){1&t&&(o.Tb(0,"th",43),o.Cc(1),o.fc(2,"translate"),o.Sb()),2&t&&(o.Bb(1),o.Dc(o.gc(2,1,"admin.recommandation.list.Axe")))}function rt(t,e){if(1&t&&(o.Tb(0,"td",44),o.Cc(1),o.Sb()),2&t){const t=e.$implicit,i=o.ec();o.Bb(1),o.Dc(t[i.columnDefs[3].columnDef])}}function lt(t,e){1&t&&(o.Tb(0,"th",43),o.Cc(1),o.fc(2,"translate"),o.Sb()),2&t&&(o.Bb(1),o.Dc(o.gc(2,1,"admin.recommandation.list.Sousaxe")))}function bt(t,e){if(1&t&&(o.Tb(0,"td",44),o.Cc(1),o.Sb()),2&t){const t=e.$implicit,i=o.ec();o.Bb(1),o.Dc(t[i.columnDefs[4].columnDef])}}function dt(t,e){1&t&&(o.Tb(0,"th",43),o.Cc(1),o.fc(2,"translate"),o.Sb()),2&t&&(o.Bb(1),o.Dc(o.gc(2,1,"admin.recommandation.list.DEPARTEMENT")))}function ut(t,e){if(1&t&&(o.Tb(0,"td",44),o.Cc(1),o.Sb()),2&t){const t=e.$implicit;o.Bb(1),o.Dc(t.organismes)}}function ft(t,e){1&t&&(o.Tb(0,"th",43),o.Cc(1),o.fc(2,"translate"),o.Sb()),2&t&&(o.Bb(1),o.Dc(o.gc(2,1,"admin.recommandation.list.Etatdemisenoeuvre")))}function ht(t,e){if(1&t&&(o.Tb(0,"td",44),o.Cc(1),o.Sb()),2&t){const t=e.$implicit,i=o.ec();o.Bb(1),o.Dc(i.displayMulti(t.mecanisme,t.etat).e)}}function gt(t,e){1&t&&(o.Tb(0,"th",45),o.Cc(1),o.fc(2,"translate"),o.Sb()),2&t&&(o.Bb(1),o.Dc(o.gc(2,1,"admin.recommandation.list.OBSERVATIONS")))}function pt(t,e){if(1&t){const t=o.Ub();o.Tb(0,"td",44),o.Tb(1,"button",46),o.ac("click",function(){o.sc(t);const i=e.$implicit;return o.ec().showPieceJoin(i.pieceJointe)}),o.Tb(2,"mat-icon"),o.Cc(3,"cloud_download"),o.Sb(),o.Sb(),o.Sb()}if(2&t){const t=e.$implicit;o.Bb(1),o.kc("disabled",""===t.pieceJointe)("matTooltip",t.pieceJointe)}}function St(t,e){1&t&&(o.Tb(0,"th",43),o.Cc(1),o.fc(2,"translate"),o.Sb()),2&t&&(o.Bb(1),o.Dc(o.gc(2,1,"admin.recommandation.list.complement")))}function Ct(t,e){if(1&t&&(o.Tb(0,"td",44),o.Cc(1),o.Sb()),2&t){const t=e.$implicit;o.Bb(1),o.Dc(t.complement)}}function yt(t,e){1&t&&o.Ob(0,"th",45)}const Bt=function(t){return["/admin/recommendation/update",t]};function Tt(t,e){if(1&t&&(o.Tb(0,"button",52),o.Tb(1,"mat-icon"),o.Cc(2,"create"),o.Sb(),o.Sb()),2&t){const t=o.ec(2).$implicit;o.kc("routerLink",o.nc(1,Bt,t.id))}}function Dt(t,e){if(1&t){const t=o.Ub();o.Tb(0,"button",53),o.ac("click",function(){o.sc(t);const e=o.ec(2).$implicit;return o.ec().delete(e)}),o.Tb(1,"mat-icon"),o.Cc(2,"delete_sweep"),o.Sb(),o.Sb()}}function vt(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",48),o.Tb(1,"button",49),o.ac("click",function(){o.sc(t);const e=o.ec().$implicit;return o.ec().detail(e)}),o.Tb(2,"mat-icon"),o.Cc(3,"visibility"),o.Sb(),o.Sb(),o.Bc(4,Tt,3,3,"button",50),o.Bc(5,Dt,3,0,"button",51),o.Sb()}if(2&t){const t=o.ec(2);o.Bb(4),o.kc("ngIf",!t.session.isSuperViseur),o.Bb(1),o.kc("ngIf",!t.session.isPointFocal&&!t.session.isSuperViseur)}}function xt(t,e){if(1&t&&(o.Tb(0,"td",44),o.Bc(1,vt,6,2,"div",47),o.Sb()),2&t){const t=o.ec();o.Bb(1),o.kc("ngIf",!t.session.isPublic)}}function Ot(t,e){1&t&&o.Ob(0,"tr",54)}function kt(t,e){1&t&&o.Ob(0,"tr",55)}const wt=function(){return[10,25,50,100,250]};let At=(()=>{class t{constructor(t,e,i,n,a,c,s,m){this.uow=t,this.dialog=e,this.mydialog=i,this.mytranslate=n,this.fb=a,this.session=c,this.route=s,this.bottomSheet=m,this.update=new o.o,this.isLoadingResults=!0,this.resultsLength=0,this.isRateLimitReached=!1,this.dataSource=[],this.columnDefs=[{columnDef:"codeRecommendation",headName:"CODE",show:!0},{columnDef:"nom",headName:"INTITULE",show:!0},{columnDef:"mecanisme",headName:"mecanisme",show:!0},{columnDef:"axe",headName:"Axe",show:!0},{columnDef:"sousAxe",headName:"SOUS AXE",show:!0},{columnDef:"organismes",headName:"DEPARTEMENT",show:!1},{columnDef:"etat",headName:"ETAT DE MISE EN OEUVRE",show:!1},{columnDef:"pieceJointe",headName:"",show:!1},{columnDef:"complement",headName:"",show:!1},{columnDef:"option",headName:"",show:!0}].map(t=>(t.headName=""===t.headName?t.columnDef.toUpperCase():t.headName.toUpperCase(),t)),this.panelOpenState=!1,this.organismes=this.uow.organismes.get(),this.axes=this.uow.axes.get(),this.sousAxes=[],this.annees=[],this.mecanismes=this.uow.mecanismes,this.visites=this.uow.visites.get(),this.organes=this.uow.organes.get(),this.pays=this.uow.pays.get(),this.cycles=this.uow.cycles.get(),this.etats=this.uow.etats,this.departementList=[],this.displayedColumns=this.columnDefs.map(t=>t.columnDef),this.progress=0,this.formData=new FormData,this.o=new Ft,this.myAuto=new p.e(""),this.session.isPublic&&(this.columnDefs=this.columnDefs.filter(t=>t.show),this.displayedColumns=this.columnDefs.map(t=>t.columnDef))}ngOnInit(){this.createForm(),this.isLoadingResults=!1,this.uow.recommendations.annee().subscribe(t=>{this.annees=t,this.myForm.get("annee").setValue(this.annees[0]),console.log(t)}),Object(g.a)(this.sort.sortChange,this.paginator.page,this.update).subscribe(t=>{!0===t?this.paginator.pageIndex=0:t=t,this.paginator.pageSize?t=t:this.paginator.pageSize=10,this.o.startIndex=this.paginator.pageIndex*this.paginator.pageSize,this.o.pageSize=this.paginator.pageSize,this.o.sortBy=this.sort.active?this.sort.active:"id",this.o.sortDir=this.sort.direction?this.sort.direction:"desc",this.isLoadingResults=!0,console.log(this.o),this.searchAndGet(this.o)}),this.route.queryParams.subscribe(t=>{const e=t.data;e&&this.uow.recommendations.getDetail(e).subscribe(t=>{this.openDialog(t)})}),this.autoComplete()}displayFrIfArNull(t,e){return null==e||""===e||"null"===e?t:e}displayMulti(t,e){const i=[{fr:"Non R\xe9alis\xe9",ar:"\u063a\u064a\u0631 \u0645\u0646\u062c\u0632"},{fr:"En cours",ar:"\u0641\u064a \u0637\u0648\u0631 \u0627\u0644\u0625\u0646\u062c\u0627\u0632"},{fr:"Recommendation continue",ar:"\u062a\u0648\u0635\u064a\u0629 \u0645\u0633\u062a\u0645\u0631\u0629"},{fr:"R\xe9alis\xe9",ar:"\u0645\u0646\u062c\u0632"}];if("fr"===this.mytranslate.langSync)return{m:t,e};{const n=[{fr:"Examen p\xe9riodique universal",ar:"\u0627\u0644\u0627\u0633\u062a\u0639\u0631\u0627\u0636 \u0627\u0644\u062f\u0648\u0631\u064a \u0627\u0644\u0634\u0627\u0645\u0644"},{fr:"Organes de Trait\xe9s",ar:"\u0647\u064a\u0626\u0627\u062a \u0627\u0644\u0645\u0639\u0627\u0647\u062f\u0627\u062a"},{fr:"Proc\xe9dures sp\xe9ciales",ar:"\u0627\u0644\u0627\u062c\u0631\u0627\u0621\u0627\u062a \u0627\u0644\u062e\u0627\u0635\u0629"}].find(e=>t.toLowerCase().includes(e.fr.toLowerCase().substring(0,6))),a=i.find(t=>t.fr.toLowerCase()===e.toLowerCase());return{m:n?n.ar:t,e:a?a.ar:e}}}autoComplete(){this.filteredOptions=this.myAuto.valueChanges.pipe(Object(S.a)(t=>t.length>1?this.uow.organismes.autocompletePost("label",t):[]))}selected(t){const e=t.option.value;console.log(e),this.myAuto.setValue(e.label),this.myForm.get("idOrganisme").setValue(e.id)}createForm(){this.myForm=this.fb.group({idOrganisme:this.o.idOrganisme,mecanisme:this.o.mecanisme,idCycle:this.o.idCycle,idOrgane:this.o.idOrgane,idVisite:this.o.idVisite,idAxe:this.o.idAxe,nom:this.o.nom,etat:this.o.etat,idPays:this.o.idPays,idSousAxe:this.o.idSousAxe,annee:this.o.annee,startIndex:this.o.startIndex,pageSize:this.o.pageSize,sortBy:this.o.sortBy,sortDir:this.o.sortDir})}get mecanisme(){return this.myForm.get("mecanisme")}get idVisite(){return this.myForm.get("idVisite")}get idCycle(){return this.myForm.get("idCycle")}get idOrgane(){return this.myForm.get("idOrgane")}get cycleActive(){return"Examen p\xe9riodique universal"===this.mecanisme.value}get visiteActive(){return"Proc\xe9dure sp\xe9ciale"===this.mecanisme.value}get organeActive(){return"Organes de trait\xe9s"===this.mecanisme.value}selectChange(t){this.idVisite.setValue(0),this.idCycle.setValue(0),this.idOrgane.setValue(0)}reset(){this.o=new Ft,this.createForm(),this.myForm.get("annee").setValue(this.annees[0]),this.searchAndGet(this.o)}search(t){this.searchAndGet(t)}detail(t){this.uow.recommendations.getDetail(t.id).subscribe(t=>{this.openDialog(t)})}openDialog(t){return this.dialog.open(u,{width:"7100px",disableClose:!0,data:{model:t,title:"Recommdandation"}}).afterClosed()}stateDepartement(t){console.log(t),(t=t.filter(t=>null!==t.name)).filter(t=>"PE"===t.type).map(t=>t.name),t.filter(t=>"IN"===t.type).map(t=>t.name),t.filter(t=>"PG"===t.type).map(t=>t.name),t.filter(t=>"Autre"===t.type).map(t=>t.name);const e=[{data:[],label:this.mytranslate.get("admin.organe.list.Etatavancement")},{data:[],label:this.mytranslate.get("admin.organe.list.R\xe9alis\xe9")},{data:[],label:"Non r\xe9alis\xe9"}],i=e,n=e,a=e;t.forEach(t=>{"PE"===t.type?(e[0].data.push(+(t.p*t.t/100).toFixed(0)),e[1].data.push(+(t.r*t.t/100).toFixed(0)),e[2].data.push(+(t.t-t.p*t.t/100-t.r*t.t/100).toFixed(0))):"Autre"===t.type?(a[0].data.push(+(t.p*t.t/100).toFixed(0)),a[1].data.push(+(t.r*t.t/100).toFixed(0)),a[2].data.push(+(t.t-t.p*t.t/100-t.r*t.t/100).toFixed(0))):"IN"===t.type?(i[0].data.push(+(t.p*t.t/100).toFixed(0)),i[1].data.push(+(t.r*t.t/100).toFixed(0)),i[2].data.push(+(t.t-t.p*t.t/100-t.r*t.t/100).toFixed(0))):"PJ"===t.type&&(n[0].data.push(+(t.p*t.t/100).toFixed(0)),n[1].data.push(+(t.r*t.t/100).toFixed(0)),n[2].data.push(+(t.t-t.p*t.t/100-t.r*t.t/100).toFixed(0)))})}searchAndGet(t){console.log(t),this.o=t,this.o.idOrganisme=this.session.isPointFocal||this.session.isProprietaire?this.session.user.idOrganisme:this.o.idOrganisme,this.uow.recommendations.searchAndGet(this.o).subscribe(t=>{console.log(t.list),this.dataSource=t.list,this.resultsLength=t.count,this.isLoadingResults=!1,this.stateDepartement(this.departementList)},t=>this.isLoadingResults=!1)}delete(t){return Object(n.a)(this,void 0,void 0,function*(){if("ok"===(yield this.mydialog.openDialog("recommandation").toPromise())){let e=[];""!==t.pieceJointe?e.push(...this.uow.decoupe(t.pieceJointe)):e=e,this.uow.files.deleteFiles(e,"recommandation").subscribe(e=>{this.uow.recommendations.delete(t.id).subscribe(()=>this.update.next(!0))})}})}showPieceJoin(t){this.bottomSheet.open(C.a,{data:{fileName:t,folder:"recommandation"}})}axeChange(t){this.uow.sousAxes.getByIdAxe(t).subscribe(t=>{this.sousAxes=t})}get isAllEmpty(){var t;return"0"===this.myForm.get("idAxe").value.toString()&&"0"===this.myForm.get("idCycle").value.toString()&&"0"===this.myForm.get("idSousAxe").value.toString()&&"0"===this.myForm.get("idOrganisme").value.toString()&&"0"===this.myForm.get("idOrgane").value.toString()&&"0"===this.myForm.get("idPays").value.toString()&&""===this.myForm.get("nom").value.toString()&&""===this.myForm.get("etat").value.toString()&&"0"===this.myForm.get("idVisite").value.toString()&&"0"===(null===(t=this.myForm.get("annee").value)||void 0===t?void 0:t.toString())&&""===this.myForm.get("mecanisme").value.toString()}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(y.a),o.Nb(a.b),o.Nb(B.a),o.Nb(T.a),o.Nb(p.d),o.Nb(D.a),o.Nb(v.a),o.Nb(x.b))},t.\u0275cmp=o.Hb({type:t,selectors:[["app-list"]],viewQuery:function(t,e){if(1&t&&(o.xc(f.a,!0),o.xc(h.a,!0)),2&t){let t;o.pc(t=o.bc())&&(e.paginator=t.first),o.pc(t=o.bc())&&(e.sort=t.first)}},decls:125,vars:75,consts:[[1,"host"],[3,"title"],[1,"right"],["class","mt-3","style","margin: 20px 0 0","mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],[1,"expension"],["expanded","",3,"opened","closed"],[3,"formGroup"],[1,"inputs2"],["appearance","fill"],["matInput","","formControlName","nom","required",""],["formControlName","idPays"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill",4,"ngIf"],["formControlName","mecanisme",3,"selectionChange"],["formControlName","etat"],["formControlName","idAxe",3,"selectionChange"],["formControlName","idSousAxe"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","",3,"click"],[1,"example-container","mat-elevation-z8"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container"],["mat-table","","multiTemplateDataRows","","aria-label","Elements","matSort","",3,"dataSource"],["table",""],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","option",2,"flex-direction","row-reverse"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageIndex","0","pageSize","10","showFirstLastButtons","",3,"length","pageSizeOptions"],["paginator",""],["mat-raised-button","","color","primary",1,"mt-3",2,"margin","20px 0 0",3,"routerLink"],[3,"value"],["formControlName","annee"],["formControlName","idCycle"],["formControlName","idVisite"],["formControlName","idOrgane"],["formControlName","idOrganisme"],[1,"example-loading-shade"],[4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","","color","accent",3,"disabled","matTooltip","click"],["class","button-row",4,"ngIf"],[1,"button-row"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","primary",3,"routerLink",4,"ngIf"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"routerLink"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Ob(1,"app-title",1),o.fc(2,"translate"),o.Tb(3,"div",2),o.Bc(4,V,5,5,"button",3),o.Sb(),o.Tb(5,"div",4),o.Tb(6,"mat-accordion"),o.Tb(7,"mat-expansion-panel",5),o.ac("opened",function(){return e.panelOpenState=!0})("closed",function(){return e.panelOpenState=!1}),o.Tb(8,"mat-expansion-panel-header"),o.Tb(9,"mat-panel-title"),o.Tb(10,"mat-icon"),o.Cc(11,"search"),o.Sb(),o.Tb(12,"p"),o.Cc(13),o.fc(14,"translate"),o.Sb(),o.Sb(),o.Ob(15,"mat-panel-description"),o.Sb(),o.Ob(16,"mat-divider"),o.Tb(17,"form",6),o.Tb(18,"div",7),o.Tb(19,"mat-form-field",8),o.Tb(20,"mat-label"),o.Cc(21),o.fc(22,"translate"),o.Sb(),o.Ob(23,"input",9),o.Sb(),o.Sb(),o.Tb(24,"div",7),o.Tb(25,"mat-form-field",8),o.Tb(26,"mat-label"),o.Cc(27),o.fc(28,"translate"),o.Sb(),o.Tb(29,"mat-select",10),o.Tb(30,"mat-option",11),o.Cc(31,"..."),o.Sb(),o.Bc(32,_,2,2,"mat-option",12),o.fc(33,"async"),o.Sb(),o.Sb(),o.Bc(34,J,6,4,"mat-form-field",13),o.Sb(),o.Tb(35,"div",7),o.Tb(36,"mat-form-field",8),o.Tb(37,"mat-label"),o.Cc(38),o.fc(39,"translate"),o.Sb(),o.Tb(40,"mat-select",14),o.ac("selectionChange",function(t){return e.selectChange(t.value)}),o.Tb(41,"mat-option",11),o.Cc(42,"..."),o.Sb(),o.Bc(43,z,2,2,"mat-option",12),o.fc(44,"async"),o.Sb(),o.Sb(),o.Bc(45,Q,9,6,"mat-form-field",13),o.Bc(46,q,9,6,"mat-form-field",13),o.Bc(47,j,9,6,"mat-form-field",13),o.Tb(48,"mat-form-field",8),o.Tb(49,"mat-label"),o.Cc(50),o.fc(51,"translate"),o.Sb(),o.Tb(52,"mat-select",15),o.Bc(53,X,2,2,"mat-option",12),o.fc(54,"async"),o.Sb(),o.Sb(),o.Sb(),o.Tb(55,"div",7),o.Tb(56,"mat-form-field",8),o.Tb(57,"mat-label"),o.Cc(58),o.fc(59,"translate"),o.Sb(),o.Tb(60,"mat-select",16),o.ac("selectionChange",function(t){return e.axeChange(t.value)}),o.Tb(61,"mat-option",11),o.Cc(62,"..."),o.Sb(),o.Bc(63,K,2,2,"mat-option",12),o.fc(64,"async"),o.Sb(),o.Sb(),o.Tb(65,"mat-form-field",8),o.Tb(66,"mat-label"),o.Cc(67),o.fc(68,"translate"),o.Sb(),o.Tb(69,"mat-select",17),o.Tb(70,"mat-option",11),o.Cc(71,"..."),o.Sb(),o.Bc(72,Y,2,2,"mat-option",12),o.Sb(),o.Sb(),o.Bc(73,W,9,6,"mat-form-field",13),o.Sb(),o.Sb(),o.Tb(74,"div",2),o.Tb(75,"button",18),o.ac("click",function(){return e.search(e.myForm.value)}),o.Tb(76,"mat-icon"),o.Cc(77,"search"),o.Sb(),o.Cc(78),o.fc(79,"translate"),o.Sb(),o.Cc(80," \xa0 "),o.Tb(81,"button",19),o.ac("click",function(){return e.reset()}),o.Tb(82,"mat-icon"),o.Cc(83,"refresh"),o.Sb(),o.Cc(84),o.fc(85,"translate"),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Tb(86,"div",20),o.Bc(87,et,2,1,"div",21),o.Tb(88,"div",22),o.Tb(89,"table",23,24),o.Rb(91,25),o.Bc(92,it,3,3,"th",26),o.Bc(93,nt,2,1,"td",27),o.Qb(),o.Rb(94,25),o.Bc(95,at,3,3,"th",26),o.Bc(96,ot,2,1,"td",27),o.Qb(),o.Rb(97,25),o.Bc(98,ct,3,3,"th",26),o.Bc(99,st,2,1,"td",27),o.Qb(),o.Rb(100,25),o.Bc(101,mt,3,3,"th",26),o.Bc(102,rt,2,1,"td",27),o.Qb(),o.Rb(103,25),o.Bc(104,lt,3,3,"th",26),o.Bc(105,bt,2,1,"td",27),o.Qb(),o.Rb(106,25),o.Bc(107,dt,3,3,"th",26),o.Bc(108,ut,2,1,"td",27),o.Qb(),o.Rb(109,25),o.Bc(110,ft,3,3,"th",26),o.Bc(111,ht,2,1,"td",27),o.Qb(),o.Rb(112,25),o.Bc(113,gt,3,3,"th",28),o.Bc(114,pt,4,2,"td",27),o.Qb(),o.Rb(115,25),o.Bc(116,St,3,3,"th",26),o.Bc(117,Ct,2,1,"td",27),o.Qb(),o.Rb(118,29),o.Bc(119,yt,1,0,"th",28),o.Bc(120,xt,2,1,"td",27),o.Qb(),o.Bc(121,Ot,1,0,"tr",30),o.Bc(122,kt,1,0,"tr",31),o.Sb(),o.Sb(),o.Ob(123,"mat-paginator",32,33),o.Sb(),o.Sb()),2&t&&(o.Bb(1),o.lc("title",o.gc(2,46,"admin.recommandation.list.Recommandations")),o.Bb(3),o.kc("ngIf",!e.session.isPointFocal&&!e.session.isSuperViseur&&!e.session.isPublic),o.Bb(9),o.Dc(o.gc(14,48,"admin.recommandation.list.Recherche")),o.Bb(4),o.kc("formGroup",e.myForm),o.Bb(4),o.Dc(o.gc(22,50,"admin.recommandation.list.nom")),o.Bb(6),o.Dc(o.gc(28,52,"admin.recommandation.list.Pays")),o.Bb(5),o.kc("ngForOf",o.gc(33,54,e.pays)),o.Bb(2),o.kc("ngIf",!e.session.isPublic),o.Bb(4),o.Dc(o.gc(39,56,"admin.recommandation.list.mecanisme")),o.Bb(5),o.kc("ngForOf",o.gc(44,58,e.mecanismes)),o.Bb(2),o.kc("ngIf",e.cycleActive),o.Bb(1),o.kc("ngIf",e.visiteActive),o.Bb(1),o.kc("ngIf",e.organeActive),o.Bb(3),o.Dc(o.gc(51,60,"admin.recommandation.list.Etatdemisenoeuvre")),o.Bb(3),o.kc("ngForOf",o.gc(54,62,e.etats)),o.Bb(5),o.Dc(o.gc(59,64,"admin.recommandation.list.Axe")),o.Bb(5),o.kc("ngForOf",o.gc(64,66,e.axes)),o.Bb(4),o.Dc(o.gc(68,68,"admin.recommandation.list.Sousaxe")),o.Bb(5),o.kc("ngForOf",e.sousAxes),o.Bb(1),o.kc("ngIf",e.session.isAdmin||e.session.isSuperViseur),o.Bb(2),o.kc("disabled",e.isAllEmpty),o.Bb(3),o.Ec(" ",o.gc(79,70,"admin.recommandation.list.Rechercher")," "),o.Bb(6),o.Ec(" ",o.gc(85,72,"admin.recommandation.list.R\xe9initialiser")," "),o.Bb(3),o.kc("ngIf",e.isLoadingResults),o.Bb(2),o.kc("dataSource",e.dataSource),o.Bb(2),o.kc("matColumnDef",e.columnDefs[0].columnDef),o.Bb(3),o.kc("matColumnDef",e.columnDefs[1].columnDef),o.Bb(3),o.kc("matColumnDef",e.columnDefs[2].columnDef),o.Bb(3),o.kc("matColumnDef",e.columnDefs[3].columnDef),o.Bb(3),o.kc("matColumnDef",e.columnDefs[4].columnDef),o.Bb(3),o.yc("display","none"),o.kc("matColumnDef","organismes"),o.Bb(3),o.yc("display","none"),o.kc("matColumnDef","etat"),o.Bb(3),o.yc("display","none"),o.kc("matColumnDef","pieceJointe"),o.Bb(3),o.yc("display","none"),o.kc("matColumnDef","complement"),o.Bb(6),o.kc("matHeaderRowDef",e.displayedColumns),o.Bb(1),o.kc("matRowDefColumns",e.displayedColumns),o.Bb(1),o.kc("length",e.resultsLength)("pageSizeOptions",o.mc(74,wt)))},directives:[O.a,m.m,k.a,k.c,k.e,k.f,w.a,k.d,s.a,p.t,p.n,p.h,A.c,A.f,F.b,p.c,p.m,p.g,p.r,N.a,P.o,m.l,r.a,R.j,h.a,R.c,R.e,R.b,R.g,R.i,f.a,v.f,I.b,R.d,h.b,R.a,E.a,R.f,R.h],pipes:[M.c,m.b],styles:["section[_ngcontent-%COMP%]{display:flex!important;justify-content:space-between!important;align-items:center!important}  h3{margin:0!important}.host[_ngcontent-%COMP%]{margin:1em!important}.inputs2[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(25vw,1fr));grid-column-gap:6px;grid-row-gap:6px;align-items:center}form[_ngcontent-%COMP%]{padding:20px}.expension[_ngcontent-%COMP%]{margin:20px 0}.right[_ngcontent-%COMP%]{margin:0 20px 20px}mat-panel-title[_ngcontent-%COMP%]{display:flex;align-items:center}mat-panel-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 0 10px}mat-panel-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-top:5px}.mat-cell[_ngcontent-%COMP%]:nth-child(2), .mat-header-cell[_ngcontent-%COMP%]:nth-child(2){width:30vw!important;min-width:30vw;padding-right:0!important}"]}),t})();class Ft{constructor(){this.idAxe=0,this.idSousAxe=0,this.idOrganisme=0,this.mecanisme="",this.idCycle=0,this.idOrgane=0,this.idVisite=0,this.nom="",this.etat="",this.idPays=0,this.startIndex=0,this.pageSize=10,this.sortBy="id",this.sortDir="desc",this.annee=0}}}}]);