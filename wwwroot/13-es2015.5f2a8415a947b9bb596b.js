(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"/ysL":function(t,e,i){"use strict";i.d(e,"a",function(){return c});var n=i("fXoL"),a=i("J3i2"),o=i("f0Cb"),s=i("ofXK");let c=(()=>{class t{constructor(t){this.mytranslate=t,this.title=""}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(n.Nb(a.a))},t.\u0275cmp=n.Hb({type:t,selectors:[["app-title"]],inputs:{title:"title"},decls:7,vars:4,consts:[[1,"d-flex","w-100","mb-3"],[3,"className"]],template:function(t,e){1&t&&(n.Tb(0,"div",0),n.Tb(1,"section",1),n.fc(2,"async"),n.Tb(3,"div"),n.Tb(4,"h3"),n.Cc(5),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Ob(6,"mat-divider")),2&t&&(n.Bb(1),n.kc("className","fr"===n.gc(2,2,e.mytranslate.lang)?"super-title border-left":"super-title border-right"),n.Bb(4),n.Dc(e.title))},directives:[o.a],pipes:[s.b],styles:["section[_ngcontent-%COMP%]{display:flex!important;justify-content:space-between!important;align-items:center!important}.border-left[_ngcontent-%COMP%]{border-left:10px solid #d17c36}.border-right[_ngcontent-%COMP%]{border-right:10px solid #d17c36}.super-title[_ngcontent-%COMP%]{height:45px}.super-title[_ngcontent-%COMP%], .super-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center}.super-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#a19b9e;height:35px}.super-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin:0;padding:0 5px}"]}),t})()},"5F3i":function(t,e,i){"use strict";i.d(e,"a",function(){return l});var n=i("0IaG"),a=i("fXoL"),o=i("/t3+"),s=i("f0Cb"),c=i("bTqV");let r=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.model=""}ngOnInit(){this.model=this.data.model}onNoClick(){this.dialogRef.close()}onOkClick(){this.dialogRef.close("ok")}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(n.g),a.Nb(n.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-delete"]],decls:15,vars:1,consts:[[1,"dialog"],["mat-dialog-title",""],["role","toolbar",1,"task-header"],[1,"content"],["mat-dialog-content",""],["mat-dialog-actions","",1,"actions"],["mat-button","","type","button",3,"click"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"mat-dialog-close","click"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"h1",1),a.Tb(2,"mat-toolbar",2),a.Tb(3,"span"),a.Cc(4),a.Sb(),a.Sb(),a.Ob(5,"mat-divider"),a.Sb(),a.Tb(6,"div",3),a.Tb(7,"div",4),a.Tb(8,"p"),a.Cc(9,"Voulez-vous vraiment supprimer?"),a.Sb(),a.Sb(),a.Tb(10,"div",5),a.Tb(11,"button",6),a.ac("click",function(){return e.onNoClick()}),a.Cc(12,"Annuler"),a.Sb(),a.Tb(13,"button",7),a.ac("click",function(){return e.onOkClick()}),a.Cc(14,"Ok"),a.Sb(),a.Sb(),a.Sb(),a.Sb()),2&t&&(a.Bb(4),a.Ec("Suppression ",e.model," "))},directives:[n.h,o.a,s.a,n.e,n.c,c.a,n.d],styles:[".dialog[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:hidden}.dialog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 5px}.dialog[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 20px 25px}.dialog[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse}"]}),t})(),l=(()=>{class t{constructor(t){this.dialog=t}openDialog(t){return this.dialog.open(r,{width:"750px",disableClose:!0,data:{model:t}}).afterClosed()}}return t.\u0275fac=function(e){return new(e||t)(a.Xb(n.b))},t.\u0275prov=a.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},Dgsr:function(t,e,i){"use strict";i.d(e,"a",function(){return c});var n=i("2thQ"),a=i("ofXK"),o=i("tk/3"),s=i("fXoL");let c=(()=>{class t{}return t.\u0275mod=s.Lb({type:t}),t.\u0275inj=s.Kb({factory:function(e){return new(e||t)},imports:[[a.c,n.a,o.c]]}),t})()},KCpK:function(t,e,i){"use strict";i.r(e),i.d(e,"RecommendationModule",function(){return ht});var n=i("ofXK"),a=i("fXoL"),o=i("ukCm"),s=i("XNiG"),c=i("tyNb"),r=i("7q3A"),l=i("3Pt+"),m=i("0hB7"),d=i("J3i2"),b=i("/ysL"),u=i("Wp6s"),f=i("kmnG"),p=i("qFsG"),h=i("d3UM"),g=i("FKr1"),S=i("5nPQ"),v=i("VRyK"),C=i("0EQZ"),y=i("eIep"),O=i("M9IT"),T=i("Dh3D"),B=i("M0ag"),k=i("f0Cb"),A=i("/1cH"),w=i("bTqV"),x=i("NFeN"),D=i("+0xr"),F=i("Xa2L"),P=i("bSwM"),N=i("sYmb");function I(t,e){if(1&t&&(a.Tb(0,"mat-option",21),a.Cc(1),a.Sb()),2&t){const t=e.$implicit;a.kc("value",t),a.Bb(1),a.Ec("",t.label," ")}}function L(t,e){1&t&&a.Ob(0,"mat-spinner")}function M(t,e){if(1&t&&(a.Tb(0,"div",22),a.Bc(1,L,1,0,"mat-spinner",23),a.Sb()),2&t){const t=a.ec();a.Bb(1),a.kc("ngIf",t.isLoadingResults)}}function R(t,e){1&t&&a.Ob(0,"th",24)}function _(t,e){if(1&t){const t=a.Ub();a.Tb(0,"td",25),a.Tb(1,"mat-checkbox",26),a.ac("change",function(i){a.sc(t);const n=e.$implicit,o=a.ec();return i?o.check(n):null})("click",function(t){return t.stopPropagation()}),a.Sb(),a.Sb()}if(2&t){const t=e.$implicit,i=a.ec();a.Bb(1),a.kc("checked",i.isSelected(t))("aria-label",i.checkboxLabel(t))("disabled",!i.isAdmin)}}function E(t,e){1&t&&(a.Tb(0,"th",27),a.Cc(1),a.fc(2,"translate"),a.Sb()),2&t&&(a.Bb(1),a.Dc(a.gc(2,1,"admin.recommandation.update.ORGANISMES")))}function $(t,e){if(1&t&&(a.Tb(0,"td",25),a.Cc(1),a.Sb()),2&t){const t=e.$implicit,i=a.ec();a.Bb(1),a.Dc(t[i.columnDefs[1].columnDef])}}function V(t,e){1&t&&a.Ob(0,"th",27)}function J(t,e){1&t&&a.Ob(0,"td",25)}function q(t,e){1&t&&a.Ob(0,"tr",28)}function K(t,e){1&t&&a.Ob(0,"tr",29)}const X=function(){return[2,5,25,50,100,250]};let H=(()=>{class t{constructor(t,e){this.uow=t,this.session=e,this.eventToParent=new a.o,this.selectedList=[],this.listFromParent=new a.o,this.update=new a.o,this.isLoadingResults=!0,this.resultsLength=0,this.isRateLimitReached=!1,this.dataSource=[],this.columnDefs=[{columnDef:"select",headName:"select"},{columnDef:"label",headName:"ORGANISMES"},{columnDef:"adresse",headName:"ADRESSE"}],this.displayedColumns=this.columnDefs.map(t=>t.columnDef),this.selection=new C.c(!0,[]),this.myAuto=new l.e(""),this.idOrganisme=0}ngOnInit(){this.listFromParent.subscribe(t=>{this.selectedList=t,this.selectedList.forEach(t=>{this.selection.select(t)})}),this.getPage(0,10,"id","desc",this.idOrganisme),Object(v.a)(this.sort.sortChange,this.paginator.page,this.update).subscribe(t=>{!0===t?this.paginator.pageIndex=0:t=t,this.paginator.pageSize?t=t:this.paginator.pageSize=10;const e=this.paginator.pageIndex*this.paginator.pageSize;this.isLoadingResults=!0,this.getPage(e,this.paginator.pageSize,this.sort.active?this.sort.active:"id",this.sort.direction?this.sort.direction:"desc",this.idOrganisme)}),this.autoComplete()}get isAdmin(){return this.session.isAdmin}autoComplete(){this.filteredOptions=this.myAuto.valueChanges.pipe(Object(y.a)(t=>t.length>1?this.uow.organismes.autocompletePost("label",t):[]))}selected(t){this.idOrganisme=t.option.value.id,this.update.next(!0)}clear(){this.myAuto.setValue({label:""}),this.idOrganisme=0,this.update.next(!0)}getPage(t,e,i,n,a){this.uow.organismes.getAll(t,e,i,n,a).subscribe(t=>{this.dataSource=t.list,this.resultsLength=t.count,this.isLoadingResults=!1})}isSelected(t){return!!this.selectedList.find(e=>e.id===t.id)}check(t){const e=this.selectedList.findIndex(e=>t.id===e.id);-1!==e?this.selectedList.splice(e,1):this.selectedList.push(t),this.eventToParent.next(this.selectedList)}isAllSelected(){return this.selection.selected.length===this.paginator.pageSize}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.forEach(t=>this.selection.select(t))}checkboxLabel(t){return t?`${this.selectedList.find(e=>e.id===t.id)?"deselect":"select"} row ${t.id}`:(this.isAllSelected()?"select":"deselect")+" all"}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(r.a),a.Nb(B.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-organismes"]],viewQuery:function(t,e){if(1&t&&(a.xc(O.a,!0),a.xc(T.a,!0)),2&t){let t;a.pc(t=a.bc())&&(e.paginator=t.first),a.pc(t=a.bc())&&(e.sort=t.first)}},inputs:{selectedList:"selectedList",listFromParent:"listFromParent"},outputs:{eventToParent:"eventToParent"},decls:32,vars:18,consts:[[1,"filter"],["appearance","fill",1,"col-md-6","mt-3"],["matInput","","placeholder","auto compl\xe9tion",3,"formControl","value","matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","matSuffix","",3,"click"],[1,"example-container","mat-elevation-z8"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container"],["mat-table","","multiTemplateDataRows","","aria-label","Elements","matSort","",3,"dataSource"],["table",""],["matColumnDef","select",2,"width","10px"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageIndex","0","pageSize","10","showFirstLastButtons","",3,"length","pageSizeOptions"],["paginator",""],[3,"value"],[1,"example-loading-shade"],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[3,"checked","aria-label","disabled","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){if(1&t&&(a.Ob(0,"mat-divider"),a.Tb(1,"div",0),a.Tb(2,"mat-form-field",1),a.Tb(3,"mat-label"),a.Cc(4),a.fc(5,"translate"),a.Sb(),a.Ob(6,"input",2),a.Tb(7,"mat-autocomplete",3,4),a.ac("optionSelected",function(t){return e.selected(t)}),a.Bc(9,I,2,2,"mat-option",5),a.fc(10,"async"),a.Sb(),a.Tb(11,"button",6),a.ac("click",function(){return e.clear()}),a.Tb(12,"mat-icon"),a.Cc(13,"clear"),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Tb(14,"div",7),a.Bc(15,M,2,1,"div",8),a.Tb(16,"div",9),a.Tb(17,"table",10,11),a.Rb(19,12),a.Bc(20,R,1,0,"th",13),a.Bc(21,_,2,3,"td",14),a.Qb(),a.Rb(22,15),a.Bc(23,E,3,3,"th",16),a.Bc(24,$,2,1,"td",14),a.Qb(),a.Rb(25,15),a.Bc(26,V,1,0,"th",16),a.Bc(27,J,1,0,"td",14),a.Qb(),a.Bc(28,q,1,0,"tr",17),a.Bc(29,K,1,0,"tr",18),a.Sb(),a.Sb(),a.Ob(30,"mat-paginator",19,20),a.Sb()),2&t){const t=a.qc(8);a.Bb(4),a.Dc(a.gc(5,13,"admin.recommandation.update.Organisme")),a.Bb(2),a.kc("formControl",e.myAuto)("value",e.myAuto.value.label)("matAutocomplete",t),a.Bb(3),a.kc("ngForOf",a.gc(10,15,e.filteredOptions)),a.Bb(6),a.kc("ngIf",e.isLoadingResults),a.Bb(2),a.kc("dataSource",e.dataSource),a.Bb(5),a.kc("matColumnDef",e.columnDefs[1].columnDef),a.Bb(3),a.kc("matColumnDef",e.columnDefs[2].columnDef),a.Bb(3),a.kc("matHeaderRowDef",e.displayedColumns),a.Bb(1),a.kc("matRowDefColumns",e.displayedColumns),a.Bb(1),a.kc("length",e.resultsLength)("pageSizeOptions",a.mc(17,X))}},directives:[k.a,f.c,f.f,p.b,l.c,A.c,l.m,l.f,A.a,n.l,w.a,f.g,x.a,n.m,D.j,T.a,D.c,D.e,D.b,D.g,D.i,O.a,g.o,F.b,D.d,D.a,P.a,T.b,D.f,D.h],pipes:[N.c,n.b],styles:["h3{margin:0!important}.host[_ngcontent-%COMP%]{margin:1em!important}  mat-checkbox label{margin-top:7px}tr[_ngcontent-%COMP%]:hover{cursor:pointer}.filter[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;width:100%}"]}),t})();function z(t,e){if(1&t&&(a.Tb(0,"mat-option",40),a.Cc(1),a.Sb()),2&t){const t=e.$implicit,i=a.ec();a.kc("value",t.name),a.Bb(1),a.Dc("fr"===i.mytranslate.langSync?t.name:t.nameAr)}}function G(t,e){if(1&t&&(a.Tb(0,"mat-option",40),a.Cc(1),a.Sb()),2&t){const t=e.$implicit,i=a.ec(2);a.kc("value",t.id),a.Bb(1),a.Dc("fr"===i.mytranslate.langSync?t.label:t.labelAr)}}function j(t,e){if(1&t&&(a.Tb(0,"mat-form-field",14),a.Tb(1,"mat-label"),a.Cc(2),a.fc(3,"translate"),a.Sb(),a.Tb(4,"mat-select",41),a.Tb(5,"mat-option",16),a.Cc(6,"..."),a.Sb(),a.Bc(7,G,2,2,"mat-option",17),a.fc(8,"async"),a.Sb(),a.Sb()),2&t){const t=a.ec();a.Bb(2),a.Dc(a.gc(3,3,"admin.recommandation.update.Cycle")),a.Bb(2),a.kc("disabled",!t.isAdmin),a.Bb(3),a.kc("ngForOf",a.gc(8,5,t.cycles))}}function Q(t,e){if(1&t&&(a.Tb(0,"mat-option",40),a.Cc(1),a.Sb()),2&t){const t=e.$implicit,i=a.ec(2);a.kc("value",t.id),a.Bb(1),a.Dc("fr"===i.mytranslate.langSync?t.mandat:t.mandatAr)}}function U(t,e){if(1&t&&(a.Tb(0,"mat-form-field",14),a.Tb(1,"mat-label"),a.Cc(2),a.fc(3,"translate"),a.Sb(),a.Tb(4,"mat-select",42),a.Tb(5,"mat-option",16),a.Cc(6,"..."),a.Sb(),a.Bc(7,Q,2,2,"mat-option",17),a.fc(8,"async"),a.Sb(),a.Sb()),2&t){const t=a.ec();a.Bb(2),a.Dc(a.gc(3,3,"admin.recommandation.update.Visite")),a.Bb(2),a.kc("disabled",!t.isAdmin),a.Bb(3),a.kc("ngForOf",a.gc(8,5,t.visites))}}function Z(t,e){if(1&t&&(a.Tb(0,"mat-option",40),a.Cc(1),a.Sb()),2&t){const t=e.$implicit,i=a.ec(2);a.kc("value",t.id),a.Bb(1),a.Dc("fr"===i.mytranslate.langSync?t.label:t.labelAr)}}function W(t,e){if(1&t&&(a.Tb(0,"mat-form-field",14),a.Tb(1,"mat-label"),a.Cc(2),a.fc(3,"translate"),a.Sb(),a.Tb(4,"mat-select",43),a.Tb(5,"mat-option",16),a.Cc(6,"..."),a.Sb(),a.Bc(7,Z,2,2,"mat-option",17),a.fc(8,"async"),a.Sb(),a.Sb()),2&t){const t=a.ec();a.Bb(2),a.Dc(a.gc(3,3,"admin.recommandation.update.Organe")),a.Bb(2),a.kc("disabled",!t.isAdmin),a.Bb(3),a.kc("ngForOf",a.gc(8,5,t.organes))}}function Y(t,e){if(1&t&&(a.Tb(0,"mat-option",40),a.Cc(1),a.Sb()),2&t){const t=e.$implicit,i=a.ec();a.kc("value",t.id),a.Bb(1),a.Ec("","fr"===i.mytranslate.langSync?t.label:t.labelAr," ")}}function tt(t,e){if(1&t&&(a.Tb(0,"mat-option",40),a.Cc(1),a.Sb()),2&t){const t=e.$implicit,i=a.ec(2);a.kc("value",t.id),a.Bb(1),a.Ec(" ","fr"===i.mytranslate.langSync?t.label:t.labelAr," ")}}function et(t,e){if(1&t&&(a.Tb(0,"mat-optgroup",44),a.Bc(1,tt,2,2,"mat-option",17),a.Sb()),2&t){const t=e.$implicit,i=a.ec();a.kc("label","fr"===i.mytranslate.langSync?t.label:t.labelAr),a.Bb(1),a.kc("ngForOf",t.sousAxes)}}function it(t,e){if(1&t&&(a.Tb(0,"mat-option",40),a.Cc(1),a.Sb()),2&t){const t=e.$implicit,i=a.ec();a.kc("value",t.id),a.Bb(1),a.Dc("fr"===i.mytranslate.langSync?t.nom:t.nomAr)}}function nt(t,e){if(1&t&&(a.Tb(0,"mat-option",40),a.Cc(1),a.Sb()),2&t){const t=e.$implicit,i=a.ec();a.kc("value",t.name),a.Bb(1),a.Dc("fr"===i.mytranslate.langSync?t.name:t.nameAr)}}function at(t,e){if(1&t&&(a.Tb(0,"mat-form-field",33),a.Tb(1,"mat-label"),a.Cc(2),a.fc(3,"translate"),a.Sb(),a.Ob(4,"textarea",45),a.Sb()),2&t){const t=a.ec();a.Bb(2),a.Dc(a.gc(3,2,"admin.recommandation.update.Etatdavancement")),a.Bb(2),a.kc("readonly",!t.isAdmin)}}const ot=function(){return["/admin/recommendation/list"]};let st=(()=>{class t{constructor(t,e,i,n,c,r){this.route=t,this.router=e,this.uow=i,this.fb=n,this.session=c,this.mytranslate=r,this.eventToChild=new a.o,this.organismes=this.uow.organismes.get(),this.axes=this.uow.axes.get(),this.mecanismes=this.uow.mecanismes,this.etats=this.uow.etats,this.cycles=this.uow.cycles.get(),this.visites=this.uow.visites.get(),this.organes=this.uow.organes.get(),this.pays=this.uow.pays.get(),this.sousAxes=[],this.folderToSaveInServer="recommandation",this.pieceJointeTo=new s.a,this.pieceJointeFrom=new s.a,this.eventSubmitFromParent=new s.a,this.o=new o.k,this.id=0,this.title="Nouveau utilisateur",this.listOrganisme=[]}ngOnInit(){this.createForm(),this.stringArray(),this.pieceJointeFrom.subscribe(t=>this.myForm.get("pieceJointe").setValue(t)),setTimeout(()=>this.pieceJointeTo.next(this.o.pieceJointe),100),this.id=+this.route.snapshot.paramMap.get("id"),0!==this.id&&this.uow.recommendations.getOne(this.id).subscribe(t=>{this.o=t,this.handleEtatAvancementChiffre(this.o.etat),this.o.recomOrgs.forEach(t=>{this.listOrganisme.push({id:t.idOrganisme})}),this.eventToChild.emit(this.listOrganisme),this.createForm(),this.stringArray()})}stringArray(){this.myForm.get("axes").setValue(this.check(this.o.axes)),this.myForm.get("sousAxes").setValue(this.check(this.o.sousAxes))}check(t){return t&&""!==t?t.includes("[")?JSON.parse(t):[+t]:[]}get isAdmin(){return this.session.isAdmin}get showEtatDavancement(){return!(!this.myForm.get("etat").value.includes("cour")&&!this.myForm.get("etat").value.includes("continue"))}createForm(){this.myForm=this.fb.group({id:this.o.id,codeRecommendation:[this.o.codeRecommendation],nom:[this.o.nom],codeRecommendationAr:[this.o.codeRecommendationAr],nomAr:[this.o.nomAr],mecanisme:[this.o.mecanisme],idVisite:[this.o.idVisite],idOrgane:[this.o.idOrgane],idCycle:[this.o.idCycle],axes:[this.o.axes],sousAxes:[this.o.sousAxes],etat:[this.o.etat],etatAvancement:[this.o.etatAvancement],etatAvancementChiffre:[this.o.etatAvancementChiffre],observation:[this.o.observation],complement:[this.o.complement],pieceJointe:[this.o.pieceJointe],idPays:[this.o.idPays],annee:[this.o.annee],anneeDisplay:[this.o.anneeDisplay],anneeDisplayAr:[this.o.anneeDisplayAr]})}get mecanisme(){return this.myForm.get("mecanisme")}get idVisite(){return this.myForm.get("idVisite")}get idCycle(){return this.myForm.get("idCycle")}get idOrgane(){return this.myForm.get("idOrgane")}get cycleActive(){return"Examen p\xe9riodique universal"===this.mecanisme.value}get visiteActive(){return"Proc\xe9dure sp\xe9ciale"===this.mecanisme.value}get organeActive(){return"Organes de trait\xe9s"===this.mecanisme.value}submit(t){t.axes=JSON.stringify(t.axes),t.sousAxes=JSON.stringify(t.sousAxes),0===this.id?this.uow.recommendations.post(t).subscribe(t=>{const e=[];this.listOrganisme.map(i=>{e.push({idOrganisme:i.id,idRecommendation:t.id,date:new Date})}),this.uow.recomOrgs.postRange(e).subscribe(t=>{this.router.navigateByUrl("/admin/recommendation/list"),this.eventSubmitFromParent.next(!0)})}):this.uow.recommendations.put(t.id,t).subscribe(t=>{const e=[];this.listOrganisme.map(t=>{e.push({idOrganisme:t.id,idRecommendation:this.o.id,date:new Date})}),this.uow.recomOrgs.putRange(this.o.recomOrgs,e).subscribe(t=>{this.router.navigateByUrl("/admin/recommendation/list"),this.eventSubmitFromParent.next(!0)})})}axeChange(t){this.uow.sousAxes.getByIdAxe(t).subscribe(t=>{this.sousAxes=t})}etat(t){this.handleEtatAvancementChiffre(t)}handleEtatAvancementChiffre(t){let e=this.myForm.get("etatAvancementChiffre").value;t.includes("R\xe9alis\xe9")?e=100:t.includes("Non")?e=0:t.includes("cours")?(e=e>5?e:5,this.myForm.get("etatAvancementChiffre").enable()):this.myForm.get("etatAvancementChiffre").enable(),this.myForm.get("etatAvancementChiffre").setValue(e)}selectChange(t){this.idVisite.setValue(null),this.idCycle.setValue(null),this.idOrgane.setValue(null)}updateListOrganisme(t){this.listOrganisme=t;let e=0,i=!0;this.listOrganisme=this.listOrganisme.filter(t=>(t.id===e&&(i=!1),e=t.id,i))}reset(){this.o=new o.k,this.createForm()}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(c.a),a.Nb(c.e),a.Nb(r.a),a.Nb(l.d),a.Nb(m.a),a.Nb(d.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-update"]],decls:119,vars:94,consts:[[1,"host"],[3,"title"],[1,""],[3,"formGroup"],[2,"margin-top","15px"],[1,"input"],["appearance","fill",2,"width","20%"],["matInput","","formControlName","codeRecommendation","required","",3,"readonly"],[2,"margin","0 1%"],["appearance","fill",2,"width","78%"],["matInput","","formControlName","nom","required","",3,"readonly"],["matInput","","formControlName","codeRecommendationAr","required","",3,"readonly"],["matInput","","formControlName","nomAr","required","",3,"readonly"],[1,"inputs2"],["appearance","fill"],["formControlName","mecanisme",3,"disabled","selectionChange"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill",4,"ngIf"],["formControlName","axes","multiple",""],["formControlName","sousAxes","multiple",""],["value",""],[3,"label",4,"ngFor","ngForOf"],["appearance","fill",2,"width","48%"],["formControlName","idPays",3,"disabled"],["appearance","fill",2,"width","10%"],["type","number","min","0","matInput","","formControlName","annee",3,"readonly"],["appearance","fill",2,"width","18%"],["type","text","matInput","","formControlName","anneeDisplay",3,"readonly"],["type","text","matInput","","formControlName","anneeDisplayAr",3,"readonly"],["formControlName","etat",3,"disabled","selectionChange"],["matInput","","formControlName","etatAvancementChiffre","type","number","min","0","max","100","required",""],["appearance","fill","style","width: 100%;",4,"ngIf"],["appearance","fill",2,"width","100%"],["matInput","","rows","0","formControlName","complement",3,"readonly"],[3,"disabled","nameBtn","folderToSaveInServer","propertyOfParent","eventSubmitToParent","eventSubmitFromParent"],[3,"listFromParent","eventToParent"],[1,"actions"],["mat-button","","type","button",3,"routerLink"],["mat-raised-button","","cdkFocusInitial","","color","primary",3,"disabled","click"],[3,"value"],["formControlName","idCycle",3,"disabled"],["formControlName","idVisite",3,"disabled"],["formControlName","idOrgane",3,"disabled"],[3,"label"],["matInput","","rows","0","formControlName","etatAvancement",3,"readonly"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Ob(1,"app-title",1),a.fc(2,"translate"),a.Tb(3,"div",2),a.Tb(4,"form",3),a.Tb(5,"mat-card",4),a.Tb(6,"div",5),a.Tb(7,"mat-form-field",6),a.Tb(8,"mat-label"),a.Cc(9),a.fc(10,"translate"),a.Sb(),a.Ob(11,"input",7),a.Sb(),a.Ob(12,"span",8),a.Tb(13,"mat-form-field",9),a.Tb(14,"mat-label"),a.Cc(15),a.fc(16,"translate"),a.Sb(),a.Ob(17,"input",10),a.Sb(),a.Sb(),a.Tb(18,"div",5),a.Tb(19,"mat-form-field",6),a.Tb(20,"mat-label"),a.Cc(21),a.fc(22,"translate"),a.Sb(),a.Ob(23,"input",11),a.Sb(),a.Ob(24,"span",8),a.Tb(25,"mat-form-field",9),a.Tb(26,"mat-label"),a.Cc(27),a.fc(28,"translate"),a.Sb(),a.Ob(29,"input",12),a.Sb(),a.Sb(),a.Tb(30,"div",13),a.Tb(31,"mat-form-field",14),a.Tb(32,"mat-label"),a.Cc(33),a.fc(34,"translate"),a.Sb(),a.Tb(35,"mat-select",15),a.ac("selectionChange",function(t){return e.selectChange(t.value)}),a.Tb(36,"mat-option",16),a.Cc(37,"..."),a.Sb(),a.Bc(38,z,2,2,"mat-option",17),a.fc(39,"async"),a.Sb(),a.Sb(),a.Bc(40,j,9,7,"mat-form-field",18),a.Bc(41,U,9,7,"mat-form-field",18),a.Bc(42,W,9,7,"mat-form-field",18),a.Sb(),a.Tb(43,"div",13),a.Tb(44,"mat-form-field",14),a.Tb(45,"mat-label"),a.Cc(46),a.fc(47,"translate"),a.Sb(),a.Tb(48,"mat-select",19),a.Bc(49,Y,2,2,"mat-option",17),a.fc(50,"async"),a.Sb(),a.Sb(),a.Tb(51,"mat-form-field",14),a.Tb(52,"mat-label"),a.Cc(53),a.fc(54,"translate"),a.Sb(),a.Tb(55,"mat-select",20),a.Tb(56,"mat-option",21),a.Cc(57,"-- ... --"),a.Sb(),a.Bc(58,et,2,2,"mat-optgroup",22),a.fc(59,"async"),a.Sb(),a.Sb(),a.Sb(),a.Tb(60,"mat-form-field",23),a.Tb(61,"mat-label"),a.Cc(62),a.fc(63,"translate"),a.Sb(),a.Tb(64,"mat-select",24),a.Tb(65,"mat-option",16),a.Cc(66,"..."),a.Sb(),a.Bc(67,it,2,2,"mat-option",17),a.fc(68,"async"),a.Sb(),a.Sb(),a.Ob(69,"span",8),a.Tb(70,"mat-form-field",25),a.Tb(71,"mat-label"),a.Cc(72),a.fc(73,"translate"),a.Sb(),a.Ob(74,"input",26),a.Sb(),a.Ob(75,"span",8),a.Tb(76,"mat-form-field",27),a.Tb(77,"mat-label"),a.Cc(78),a.fc(79,"translate"),a.Sb(),a.Ob(80,"input",28),a.Sb(),a.Ob(81,"span",8),a.Tb(82,"mat-form-field",27),a.Tb(83,"mat-label"),a.Cc(84),a.fc(85,"translate"),a.Sb(),a.Ob(86,"input",29),a.Sb(),a.Tb(87,"mat-form-field",9),a.Tb(88,"mat-label"),a.Cc(89),a.fc(90,"translate"),a.Sb(),a.Tb(91,"mat-select",30),a.ac("selectionChange",function(t){return e.etat(t.value)}),a.Tb(92,"mat-option",21),a.Cc(93,"..."),a.Sb(),a.Bc(94,nt,2,2,"mat-option",17),a.fc(95,"async"),a.Sb(),a.Sb(),a.Ob(96,"span",8),a.Tb(97,"mat-form-field",6),a.Tb(98,"mat-label"),a.Cc(99),a.fc(100,"translate"),a.Sb(),a.Ob(101,"input",31),a.Sb(),a.Bc(102,at,5,4,"mat-form-field",32),a.Tb(103,"mat-form-field",33),a.Tb(104,"mat-label"),a.Cc(105),a.fc(106,"translate"),a.Sb(),a.Ob(107,"textarea",34),a.Sb(),a.Ob(108,"app-upload",35),a.fc(109,"translate"),a.Sb(),a.Sb(),a.Tb(110,"app-organismes",36),a.ac("eventToParent",function(t){return e.updateListOrganisme(t)}),a.Sb(),a.Tb(111,"div",37),a.Tb(112,"button",38),a.Cc(113),a.fc(114,"translate"),a.Sb(),a.Cc(115,"\xa0\xa0 "),a.Tb(116,"button",39),a.ac("click",function(){return e.submit(e.myForm.value)}),a.Cc(117),a.fc(118,"translate"),a.Sb(),a.Sb(),a.Sb(),a.Sb()),2&t&&(a.Bb(1),a.lc("title",a.gc(2,47,"admin.recommandation.list.Recommandation")),a.Bb(3),a.kc("formGroup",e.myForm),a.Bb(5),a.Dc(a.gc(10,49,"admin.recommandation.list.code")),a.Bb(2),a.kc("readonly",!e.isAdmin),a.Bb(4),a.Dc(a.gc(16,51,"admin.recommandation.list.nom")),a.Bb(2),a.kc("readonly",!e.isAdmin),a.Bb(4),a.Dc(a.gc(22,53,"admin.recommandation.list.codeAr")),a.Bb(2),a.kc("readonly",!e.isAdmin),a.Bb(4),a.Dc(a.gc(28,55,"admin.recommandation.list.nomAr")),a.Bb(2),a.kc("readonly",!e.isAdmin),a.Bb(4),a.Dc(a.gc(34,57,"admin.recommandation.list.mecanisme")),a.Bb(2),a.kc("disabled",!e.isAdmin),a.Bb(3),a.kc("ngForOf",a.gc(39,59,e.mecanismes)),a.Bb(2),a.kc("ngIf",e.cycleActive),a.Bb(1),a.kc("ngIf",e.visiteActive),a.Bb(1),a.kc("ngIf",e.organeActive),a.Bb(4),a.Dc(a.gc(47,61,"admin.recommandation.list.Axe")),a.Bb(3),a.kc("ngForOf",a.gc(50,63,e.axes)),a.Bb(4),a.Dc(a.gc(54,65,"admin.recommandation.list.Sousaxe")),a.Bb(5),a.kc("ngForOf",a.gc(59,67,e.axes)),a.Bb(4),a.Dc(a.gc(63,69,"admin.recommandation.update.Pays")),a.Bb(2),a.kc("disabled",!e.isAdmin),a.Bb(3),a.kc("ngForOf",a.gc(68,71,e.pays)),a.Bb(5),a.Dc(a.gc(73,73,"admin.recommandation.update.Annee")),a.Bb(2),a.kc("readonly",!e.isAdmin),a.Bb(4),a.Dc(a.gc(79,75,"admin.recommandation.update.AnneeDisplay")),a.Bb(2),a.kc("readonly",!e.isAdmin),a.Bb(4),a.Dc(a.gc(85,77,"admin.recommandation.update.AnneeDisplayAr")),a.Bb(2),a.kc("readonly",!e.isAdmin),a.Bb(3),a.Dc(a.gc(90,79,"admin.recommandation.list.Etatdemisenoeuvre")),a.Bb(2),a.kc("disabled",!e.isAdmin),a.Bb(3),a.kc("ngForOf",a.gc(95,81,e.etats)),a.Bb(5),a.Dc(a.gc(100,83,"admin.recommandation.update.Etaten")),a.Bb(3),a.kc("ngIf",e.showEtatDavancement),a.Bb(3),a.Dc(a.gc(106,85,"admin.recommandation.list.complement")),a.Bb(2),a.kc("readonly",!e.isAdmin),a.Bb(1),a.lc("nameBtn",a.gc(109,87,"admin.recommandation.list.OBSERVATIONS")),a.kc("disabled",!e.isAdmin)("folderToSaveInServer",e.folderToSaveInServer)("propertyOfParent",e.pieceJointeTo)("eventSubmitToParent",e.pieceJointeFrom)("eventSubmitFromParent",e.eventSubmitFromParent),a.Bb(2),a.kc("listFromParent",e.eventToChild),a.Bb(2),a.kc("routerLink",a.mc(93,ot)),a.Bb(1),a.Dc(a.gc(114,89,"admin.Retour")),a.Bb(3),a.kc("disabled",e.myForm.invalid||!e.isAdmin),a.Bb(1),a.Dc(a.gc(118,91,"admin.Enregistre")))},directives:[b.a,l.t,l.n,l.h,u.a,f.c,f.f,p.b,l.c,l.m,l.g,l.r,h.a,g.o,n.l,n.m,l.p,S.a,H,w.a,c.f,g.n],pipes:[N.c,n.b],styles:["mat-card[_ngcontent-%COMP%]{margin:0 15px}mat-card[_ngcontent-%COMP%]   .inputs2[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(25vw,1fr));grid-column-gap:6px;grid-row-gap:6px;align-items:center}.actions[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{display:flex}.actions[_ngcontent-%COMP%]{flex-direction:row-reverse;margin:30px 0}.host[_ngcontent-%COMP%]{margin:1em!important}"]}),t})();var ct=i("F76L");let rt=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Hb({type:t,selectors:[["app-recommendation"]],decls:1,vars:0,template:function(t,e){1&t&&a.Ob(0,"router-outlet")},directives:[c.i],styles:[""]}),t})();var lt=i("xjdI");const mt=[{path:"",redirectTo:"",pathMatch:"full"},{path:"",component:rt,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:ct.a},{path:"update/:id",component:st}],canActivate:[lt.a]}];let dt=(()=>{class t{}return t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},imports:[[c.h.forChild(mt)],c.h]}),t})();var bt=i("tk/3"),ut=i("2thQ"),ft=i("Dgsr"),pt=i("Fr4G");let ht=(()=>{class t{}return t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},imports:[[N.b,n.c,dt,bt.c,ut.a,l.i,l.q,ft.a,pt.a]]}),t})()},ZTdd:function(t,e,i){"use strict";i.d(e,"a",function(){return d});var n=i("mrSG"),a=i("2ChS"),o=i("fXoL"),s=i("MutI"),c=i("ofXK"),r=i("FKr1");function l(t,e){if(1&t){const t=o.Ub();o.Tb(0,"a",2),o.ac("click",function(){o.sc(t);const e=o.ec().$implicit;return o.ec().openLink(e)}),o.Tb(1,"span",3),o.Cc(2),o.Sb(),o.Sb()}if(2&t){const t=o.ec().$implicit;o.Bb(2),o.Ec("- ",t.substring(14,t.length-1),"")}}function m(t,e){if(1&t&&(o.Tb(0,"div"),o.Bc(1,l,3,1,"a",1),o.Sb()),2&t){const t=e.$implicit,i=o.ec();o.Bb(1),o.kc("ngIf",i.show(t))}}let d=(()=>{class t{constructor(t,e,i){this.bottomSheetRef=t,this.data=e,this.url=i,this.list=[],this.folder=""}ngOnInit(){if(this.data.fileName){const t=this.data.fileName.split(";");t.pop(),this.folder=this.data.folder,this.list=t}}openLink(t){return Object(n.a)(this,void 0,void 0,function*(){const e=+t.substring(t.length-1,t.length);t=isNaN(e)?t:t.substring(0,t.length-1),window.open(`${this.url}/${this.folder}/${t}`)})}show(t){if(""===t)return!1;const e=+t.substring(t.length-1,t.length);return!!isNaN(e)||1===e}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(a.d),o.Nb(a.a),o.Nb("BASE_URL"))},t.\u0275cmp=o.Hb({type:t,selectors:[["app-download-sheet"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],["mat-list-item","",3,"click",4,"ngIf"],["mat-list-item","",3,"click"],["mat-line",""]],template:function(t,e){1&t&&(o.Tb(0,"mat-nav-list"),o.Bc(1,m,2,1,"div",0),o.Sb()),2&t&&(o.Bb(1),o.kc("ngForOf",e.list))},directives:[s.d,c.l,c.m,s.b,r.k],styles:[""]}),t})()}}]);