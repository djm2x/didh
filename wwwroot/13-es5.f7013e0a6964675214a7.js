!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"/ysL":function(e,i,a){"use strict";a.d(i,"a",function(){return l});var o=a("fXoL"),c=a("J3i2"),r=a("f0Cb"),s=a("ofXK"),l=function(){var e=function(){function e(n){t(this,e),this.mytranslate=n,this.title=""}return n(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Nb(c.a))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-title"]],inputs:{title:"title"},decls:7,vars:4,consts:[[1,"d-flex","w-100","mb-3"],[3,"className"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Tb(1,"section",1),o.fc(2,"async"),o.Tb(3,"div"),o.Tb(4,"h3"),o.Cc(5),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Ob(6,"mat-divider")),2&t&&(o.Bb(1),o.kc("className","fr"===o.gc(2,2,e.mytranslate.lang)?"super-title border-left":"super-title border-right"),o.Bb(4),o.Dc(e.title))},directives:[r.a],pipes:[s.b],styles:["section[_ngcontent-%COMP%]{display:flex!important;justify-content:space-between!important;align-items:center!important}.border-left[_ngcontent-%COMP%]{border-left:10px solid #d17c36}.border-right[_ngcontent-%COMP%]{border-right:10px solid #d17c36}.super-title[_ngcontent-%COMP%]{height:45px}.super-title[_ngcontent-%COMP%], .super-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center}.super-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#a19b9e;height:35px}.super-title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin:0;padding:0 5px}"]}),e}()},"5F3i":function(e,i,a){"use strict";a.d(i,"a",function(){return b});var o,c,r=a("0IaG"),s=a("fXoL"),l=a("/t3+"),m=a("f0Cb"),u=a("bTqV"),d=((c=function(){function e(n,i){t(this,e),this.dialogRef=n,this.data=i,this.model=""}return n(e,[{key:"ngOnInit",value:function(){this.model=this.data.model}},{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"onOkClick",value:function(){this.dialogRef.close("ok")}}]),e}()).\u0275fac=function(t){return new(t||c)(s.Nb(r.g),s.Nb(r.a))},c.\u0275cmp=s.Hb({type:c,selectors:[["app-delete"]],decls:15,vars:1,consts:[[1,"dialog"],["mat-dialog-title",""],["role","toolbar",1,"task-header"],[1,"content"],["mat-dialog-content",""],["mat-dialog-actions","",1,"actions"],["mat-button","","type","button",3,"click"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"mat-dialog-close","click"]],template:function(t,e){1&t&&(s.Tb(0,"div",0),s.Tb(1,"h1",1),s.Tb(2,"mat-toolbar",2),s.Tb(3,"span"),s.Cc(4),s.Sb(),s.Sb(),s.Ob(5,"mat-divider"),s.Sb(),s.Tb(6,"div",3),s.Tb(7,"div",4),s.Tb(8,"p"),s.Cc(9,"Voulez-vous vraiment supprimer?"),s.Sb(),s.Sb(),s.Tb(10,"div",5),s.Tb(11,"button",6),s.ac("click",function(){return e.onNoClick()}),s.Cc(12,"Annuler"),s.Sb(),s.Tb(13,"button",7),s.ac("click",function(){return e.onOkClick()}),s.Cc(14,"Ok"),s.Sb(),s.Sb(),s.Sb(),s.Sb()),2&t&&(s.Bb(4),s.Ec("Suppression ",e.model," "))},directives:[r.h,l.a,m.a,r.e,r.c,u.a,r.d],styles:[".dialog[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:hidden}.dialog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 5px}.dialog[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 20px 25px}.dialog[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse}"]}),c),b=((o=function(){function e(n){t(this,e),this.dialog=n}return n(e,[{key:"openDialog",value:function(t){return this.dialog.open(d,{width:"750px",disableClose:!0,data:{model:t}}).afterClosed()}}]),e}()).\u0275fac=function(t){return new(t||o)(s.Xb(r.b))},o.\u0275prov=s.Jb({token:o,factory:o.\u0275fac,providedIn:"root"}),o)},Dgsr:function(e,n,i){"use strict";i.d(n,"a",function(){return s});var a=i("2thQ"),o=i("ofXK"),c=i("tk/3"),r=i("fXoL"),s=function(){var e=function e(){t(this,e)};return e.\u0275mod=r.Lb({type:e}),e.\u0275inj=r.Kb({factory:function(t){return new(t||e)},imports:[[o.c,a.a,c.c]]}),e}()},KCpK:function(e,i,a){"use strict";a.r(i),a.d(i,"RecommendationModule",function(){return Ot});var o=a("ofXK"),c=a("fXoL"),r=a("ukCm"),s=a("XNiG"),l=a("tyNb"),m=a("7q3A"),u=a("3Pt+"),d=a("0hB7"),b=a("J3i2"),f=a("/ysL"),p=a("Wp6s"),g=a("kmnG"),h=a("qFsG"),v=a("d3UM"),y=a("FKr1"),S=a("5nPQ"),C=a("VRyK"),k=a("0EQZ"),O=a("eIep"),T=a("M9IT"),B=a("Dh3D"),A=a("M0ag"),w=a("f0Cb"),x=a("/1cH"),D=a("bTqV"),P=a("NFeN"),F=a("+0xr"),N=a("Xa2L"),I=a("bSwM"),L=a("sYmb");function M(t,e){if(1&t&&(c.Tb(0,"mat-option",21),c.Cc(1),c.Sb()),2&t){var n=e.$implicit;c.kc("value",n),c.Bb(1),c.Ec("",n.label," ")}}function R(t,e){1&t&&c.Ob(0,"mat-spinner")}function _(t,e){if(1&t&&(c.Tb(0,"div",22),c.Bc(1,R,1,0,"mat-spinner",23),c.Sb()),2&t){var n=c.ec();c.Bb(1),c.kc("ngIf",n.isLoadingResults)}}function E(t,e){1&t&&c.Ob(0,"th",24)}function V(t,e){if(1&t){var n=c.Ub();c.Tb(0,"td",25),c.Tb(1,"mat-checkbox",26),c.ac("change",function(t){c.sc(n);var i=e.$implicit,a=c.ec();return t?a.check(i):null})("click",function(t){return t.stopPropagation()}),c.Sb(),c.Sb()}if(2&t){var i=e.$implicit,a=c.ec();c.Bb(1),c.kc("checked",a.isSelected(i))("aria-label",a.checkboxLabel(i))("disabled",!a.isAdmin)}}function J(t,e){1&t&&(c.Tb(0,"th",27),c.Cc(1),c.fc(2,"translate"),c.Sb()),2&t&&(c.Bb(1),c.Dc(c.gc(2,1,"admin.recommandation.update.ORGANISMES")))}function $(t,e){if(1&t&&(c.Tb(0,"td",25),c.Cc(1),c.Sb()),2&t){var n=e.$implicit,i=c.ec();c.Bb(1),c.Dc(n[i.columnDefs[1].columnDef])}}function q(t,e){1&t&&c.Ob(0,"th",27)}function K(t,e){1&t&&c.Ob(0,"td",25)}function X(t,e){1&t&&c.Ob(0,"tr",28)}function H(t,e){1&t&&c.Ob(0,"tr",29)}var j,z=function(){return[2,5,25,50,100,250]},G=((j=function(){function e(n,i){t(this,e),this.uow=n,this.session=i,this.eventToParent=new c.o,this.selectedList=[],this.listFromParent=new c.o,this.update=new c.o,this.isLoadingResults=!0,this.resultsLength=0,this.isRateLimitReached=!1,this.dataSource=[],this.columnDefs=[{columnDef:"select",headName:"select"},{columnDef:"label",headName:"ORGANISMES"},{columnDef:"adresse",headName:"ADRESSE"}],this.displayedColumns=this.columnDefs.map(function(t){return t.columnDef}),this.selection=new k.c(!0,[]),this.myAuto=new u.e(""),this.idOrganisme=0}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.listFromParent.subscribe(function(e){t.selectedList=e,t.selectedList.forEach(function(e){t.selection.select(e)})}),this.getPage(0,10,"id","desc",this.idOrganisme),Object(C.a)(this.sort.sortChange,this.paginator.page,this.update).subscribe(function(e){!0===e?t.paginator.pageIndex=0:e=e,t.paginator.pageSize?e=e:t.paginator.pageSize=10;var n=t.paginator.pageIndex*t.paginator.pageSize;t.isLoadingResults=!0,t.getPage(n,t.paginator.pageSize,t.sort.active?t.sort.active:"id",t.sort.direction?t.sort.direction:"desc",t.idOrganisme)}),this.autoComplete()}},{key:"autoComplete",value:function(){var t=this;this.filteredOptions=this.myAuto.valueChanges.pipe(Object(O.a)(function(e){return e.length>1?t.uow.organismes.autocompletePost("label",e):[]}))}},{key:"selected",value:function(t){var e=t.option.value;// console.log(e),this.idOrganisme=e.id,this.update.next(!0)}},{key:"clear",value:function(){this.myAuto.setValue({label:""}),this.idOrganisme=0,this.update.next(!0)}},{key:"getPage",value:function(t,e,n,i,a){var o=this;this.uow.organismes.getAll(t,e,n,i,a).subscribe(function(t){o.dataSource=t.list,o.resultsLength=t.count,o.isLoadingResults=!1})}},{key:"isSelected",value:function(t){return!!this.selectedList.find(function(e){return e.id===t.id})}},{key:"check",value:function(t){var e=this.selectedList.findIndex(function(e){return t.id===e.id});-1!==e?this.selectedList.splice(e,1):this.selectedList.push(t),this.eventToParent.next(this.selectedList)}},{key:"isAllSelected",value:function(){return this.selection.selected.length===this.paginator.pageSize}},{key:"masterToggle",value:function(){var t=this;this.isAllSelected()?this.selection.clear():this.dataSource.forEach(function(e){return t.selection.select(e)})}},{key:"checkboxLabel",value:function(t){return t?"".concat(this.selectedList.find(function(e){return e.id===t.id})?"deselect":"select"," row ").concat(t.id):(this.isAllSelected()?"select":"deselect")+" all"}},{key:"isAdmin",get:function(){return this.session.isAdmin}}]),e}()).\u0275fac=function(t){return new(t||j)(c.Nb(m.a),c.Nb(A.a))},j.\u0275cmp=c.Hb({type:j,selectors:[["app-organismes"]],viewQuery:function(t,e){var n;1&t&&(c.xc(T.a,!0),c.xc(B.a,!0)),2&t&&(c.pc(n=c.bc())&&(e.paginator=n.first),c.pc(n=c.bc())&&(e.sort=n.first))},inputs:{selectedList:"selectedList",listFromParent:"listFromParent"},outputs:{eventToParent:"eventToParent"},decls:32,vars:18,consts:[[1,"filter"],["appearance","fill",1,"col-md-6","mt-3"],["matInput","","placeholder","auto compl\xe9tion",3,"formControl","value","matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","matSuffix","",3,"click"],[1,"example-container","mat-elevation-z8"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container"],["mat-table","","multiTemplateDataRows","","aria-label","Elements","matSort","",3,"dataSource"],["table",""],["matColumnDef","select",2,"width","10px"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageIndex","0","pageSize","10","showFirstLastButtons","",3,"length","pageSizeOptions"],["paginator",""],[3,"value"],[1,"example-loading-shade"],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[3,"checked","aria-label","disabled","change","click"],["mat-header-cell","","mat-sort-header",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){if(1&t&&(c.Ob(0,"mat-divider"),c.Tb(1,"div",0),c.Tb(2,"mat-form-field",1),c.Tb(3,"mat-label"),c.Cc(4),c.fc(5,"translate"),c.Sb(),c.Ob(6,"input",2),c.Tb(7,"mat-autocomplete",3,4),c.ac("optionSelected",function(t){return e.selected(t)}),c.Bc(9,M,2,2,"mat-option",5),c.fc(10,"async"),c.Sb(),c.Tb(11,"button",6),c.ac("click",function(){return e.clear()}),c.Tb(12,"mat-icon"),c.Cc(13,"clear"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(14,"div",7),c.Bc(15,_,2,1,"div",8),c.Tb(16,"div",9),c.Tb(17,"table",10,11),c.Rb(19,12),c.Bc(20,E,1,0,"th",13),c.Bc(21,V,2,3,"td",14),c.Qb(),c.Rb(22,15),c.Bc(23,J,3,3,"th",16),c.Bc(24,$,2,1,"td",14),c.Qb(),c.Rb(25,15),c.Bc(26,q,1,0,"th",16),c.Bc(27,K,1,0,"td",14),c.Qb(),c.Bc(28,X,1,0,"tr",17),c.Bc(29,H,1,0,"tr",18),c.Sb(),c.Sb(),c.Ob(30,"mat-paginator",19,20),c.Sb()),2&t){var n=c.qc(8);c.Bb(4),c.Dc(c.gc(5,13,"admin.recommandation.update.Organisme")),c.Bb(2),c.kc("formControl",e.myAuto)("value",e.myAuto.value.label)("matAutocomplete",n),c.Bb(3),c.kc("ngForOf",c.gc(10,15,e.filteredOptions)),c.Bb(6),c.kc("ngIf",e.isLoadingResults),c.Bb(2),c.kc("dataSource",e.dataSource),c.Bb(5),c.kc("matColumnDef",e.columnDefs[1].columnDef),c.Bb(3),c.kc("matColumnDef",e.columnDefs[2].columnDef),c.Bb(3),c.kc("matHeaderRowDef",e.displayedColumns),c.Bb(1),c.kc("matRowDefColumns",e.displayedColumns),c.Bb(1),c.kc("length",e.resultsLength)("pageSizeOptions",c.mc(17,z))}},directives:[w.a,g.c,g.f,h.b,u.c,x.c,u.m,u.f,x.a,o.l,D.a,g.g,P.a,o.m,F.j,B.a,F.c,F.e,F.b,F.g,F.i,T.a,y.o,N.b,F.d,F.a,I.a,B.b,F.f,F.h],pipes:[L.c,o.b],styles:["h3{margin:0!important}.host[_ngcontent-%COMP%]{margin:1em!important}  mat-checkbox label{margin-top:7px}tr[_ngcontent-%COMP%]:hover{cursor:pointer}.filter[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;width:100%}"]}),j);function Q(t,e){if(1&t&&(c.Tb(0,"mat-option",40),c.Cc(1),c.Sb()),2&t){var n=e.$implicit,i=c.ec();c.kc("value",n.name),c.Bb(1),c.Dc("fr"===i.mytranslate.langSync?n.name:n.nameAr)}}function U(t,e){if(1&t&&(c.Tb(0,"mat-option",40),c.Cc(1),c.Sb()),2&t){var n=e.$implicit,i=c.ec(2);c.kc("value",n.id),c.Bb(1),c.Dc("fr"===i.mytranslate.langSync?n.label:n.labelAr)}}function Z(t,e){if(1&t&&(c.Tb(0,"mat-form-field",14),c.Tb(1,"mat-label"),c.Cc(2),c.fc(3,"translate"),c.Sb(),c.Tb(4,"mat-select",41),c.Tb(5,"mat-option",16),c.Cc(6,"..."),c.Sb(),c.Bc(7,U,2,2,"mat-option",17),c.fc(8,"async"),c.Sb(),c.Sb()),2&t){var n=c.ec();c.Bb(2),c.Dc(c.gc(3,3,"admin.recommandation.update.Cycle")),c.Bb(2),c.kc("disabled",!n.isAdmin),c.Bb(3),c.kc("ngForOf",c.gc(8,5,n.cycles))}}function W(t,e){if(1&t&&(c.Tb(0,"mat-option",40),c.Cc(1),c.Sb()),2&t){var n=e.$implicit,i=c.ec(2);c.kc("value",n.id),c.Bb(1),c.Dc("fr"===i.mytranslate.langSync?n.mandat:n.mandatAr)}}function Y(t,e){if(1&t&&(c.Tb(0,"mat-form-field",14),c.Tb(1,"mat-label"),c.Cc(2),c.fc(3,"translate"),c.Sb(),c.Tb(4,"mat-select",42),c.Tb(5,"mat-option",16),c.Cc(6,"..."),c.Sb(),c.Bc(7,W,2,2,"mat-option",17),c.fc(8,"async"),c.Sb(),c.Sb()),2&t){var n=c.ec();c.Bb(2),c.Dc(c.gc(3,3,"admin.recommandation.update.Visite")),c.Bb(2),c.kc("disabled",!n.isAdmin),c.Bb(3),c.kc("ngForOf",c.gc(8,5,n.visites))}}function tt(t,e){if(1&t&&(c.Tb(0,"mat-option",40),c.Cc(1),c.Sb()),2&t){var n=e.$implicit,i=c.ec(2);c.kc("value",n.id),c.Bb(1),c.Dc("fr"===i.mytranslate.langSync?n.label:n.labelAr)}}function et(t,e){if(1&t&&(c.Tb(0,"mat-form-field",14),c.Tb(1,"mat-label"),c.Cc(2),c.fc(3,"translate"),c.Sb(),c.Tb(4,"mat-select",43),c.Tb(5,"mat-option",16),c.Cc(6,"..."),c.Sb(),c.Bc(7,tt,2,2,"mat-option",17),c.fc(8,"async"),c.Sb(),c.Sb()),2&t){var n=c.ec();c.Bb(2),c.Dc(c.gc(3,3,"admin.recommandation.update.Organe")),c.Bb(2),c.kc("disabled",!n.isAdmin),c.Bb(3),c.kc("ngForOf",c.gc(8,5,n.organes))}}function nt(t,e){if(1&t&&(c.Tb(0,"mat-option",40),c.Cc(1),c.Sb()),2&t){var n=e.$implicit,i=c.ec();c.kc("value",n.id),c.Bb(1),c.Ec("","fr"===i.mytranslate.langSync?n.label:n.labelAr," ")}}function it(t,e){if(1&t&&(c.Tb(0,"mat-option",40),c.Cc(1),c.Sb()),2&t){var n=e.$implicit,i=c.ec(2);c.kc("value",n.id),c.Bb(1),c.Ec(" ","fr"===i.mytranslate.langSync?n.label:n.labelAr," ")}}function at(t,e){if(1&t&&(c.Tb(0,"mat-optgroup",44),c.Bc(1,it,2,2,"mat-option",17),c.Sb()),2&t){var n=e.$implicit,i=c.ec();c.kc("label","fr"===i.mytranslate.langSync?n.label:n.labelAr),c.Bb(1),c.kc("ngForOf",n.sousAxes)}}function ot(t,e){if(1&t&&(c.Tb(0,"mat-option",40),c.Cc(1),c.Sb()),2&t){var n=e.$implicit,i=c.ec();c.kc("value",n.id),c.Bb(1),c.Dc("fr"===i.mytranslate.langSync?n.nom:n.nomAr)}}function ct(t,e){if(1&t&&(c.Tb(0,"mat-option",40),c.Cc(1),c.Sb()),2&t){var n=e.$implicit,i=c.ec();c.kc("value",n.name),c.Bb(1),c.Dc("fr"===i.mytranslate.langSync?n.name:n.nameAr)}}function rt(t,e){if(1&t&&(c.Tb(0,"mat-form-field",33),c.Tb(1,"mat-label"),c.Cc(2),c.fc(3,"translate"),c.Sb(),c.Ob(4,"textarea",45),c.Sb()),2&t){var n=c.ec();c.Bb(2),c.Dc(c.gc(3,2,"admin.recommandation.update.Etatdavancement")),c.Bb(2),c.kc("readonly",!n.isAdmin)}}var st,lt,mt,ut,dt=function(){return["/admin/recommendation/list"]},bt=((st=function(){function e(n,i,a,o,l,m){t(this,e),this.route=n,this.router=i,this.uow=a,this.fb=o,this.session=l,this.mytranslate=m,this.eventToChild=new c.o,this.organismes=this.uow.organismes.get(),this.axes=this.uow.axes.get(),this.mecanismes=this.uow.mecanismes,this.etats=this.uow.etats,this.cycles=this.uow.cycles.get(),this.visites=this.uow.visites.get(),this.organes=this.uow.organes.get(),this.pays=this.uow.pays.get(),this.sousAxes=[],this.folderToSaveInServer="recommandation",this.pieceJointeTo=new s.a,this.pieceJointeFrom=new s.a,this.eventSubmitFromParent=new s.a,this.o=new r.k,this.id=0,this.title="Nouveau utilisateur",this.listOrganisme=[]}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.createForm(),this.stringArray(),this.pieceJointeFrom.subscribe(function(e){return t.myForm.get("pieceJointe").setValue(e)}),setTimeout(function(){return t.pieceJointeTo.next(t.o.pieceJointe)},100),this.id=+this.route.snapshot.paramMap.get("id"),0!==this.id&&this.uow.recommendations.getOne(this.id).subscribe(function(e){t.o=e,t.handleEtatAvancementChiffre(t.o.etat),t.o.recomOrgs.forEach(function(e){t.listOrganisme.push({id:e.idOrganisme})}),t.eventToChild.emit(t.listOrganisme),t.createForm(),t.stringArray()})}},{key:"stringArray",value:function(){this.myForm.get("axes").setValue(this.check(this.o.axes)),this.myForm.get("sousAxes").setValue(this.check(this.o.sousAxes))}},{key:"check",value:function(t){return t&&""!==t?t.includes("[")?JSON.parse(t):[+t]:[]}},{key:"createForm",value:function(){this.myForm=this.fb.group({id:this.o.id,codeRecommendation:[this.o.codeRecommendation],nom:[this.o.nom],codeRecommendationAr:[this.o.codeRecommendationAr],nomAr:[this.o.nomAr],mecanisme:[this.o.mecanisme],idVisite:[this.o.idVisite],idOrgane:[this.o.idOrgane],idCycle:[this.o.idCycle],axes:[this.o.axes],sousAxes:[this.o.sousAxes],etat:[this.o.etat],etatAvancement:[this.o.etatAvancement],etatAvancementChiffre:[this.o.etatAvancementChiffre],observation:[this.o.observation],complement:[this.o.complement],pieceJointe:[this.o.pieceJointe],idPays:[this.o.idPays],annee:[this.o.annee],anneeDisplay:[this.o.anneeDisplay],anneeDisplayAr:[this.o.anneeDisplayAr]})}},{key:"submit",value:function(t){var e=this;t.axes=JSON.stringify(t.axes),t.sousAxes=JSON.stringify(t.sousAxes),// console.log(t),0===this.id?this.uow.recommendations.post(t).subscribe(function(t){var n=[];e.listOrganisme.map(function(e){n.push({idOrganisme:e.id,idRecommendation:t.id,date:new Date})}),e.uow.recomOrgs.postRange(n).subscribe(function(t){// console.log(t),e.router.navigateByUrl("/admin/recommendation/list"),e.eventSubmitFromParent.next(!0)})}):this.uow.recommendations.put(t.id,t).subscribe(function(t){var n=[];e.listOrganisme.map(function(t){n.push({idOrganisme:t.id,idRecommendation:e.o.id,date:new Date})}),e.uow.recomOrgs.putRange(e.o.recomOrgs,n).subscribe(function(t){e.router.navigateByUrl("/admin/recommendation/list"),e.eventSubmitFromParent.next(!0)})})}},{key:"axeChange",value:function(t){var e=this;this.uow.sousAxes.getByIdAxe(t).subscribe(function(t){e.sousAxes=t})}},{key:"etat",value:function(t){// console.log(t),this.handleEtatAvancementChiffre(t)}},{key:"handleEtatAvancementChiffre",value:function(t){var e=this.myForm.get("etatAvancementChiffre").value;t.includes("R\xe9alis\xe9")?e=100:t.includes("Non")?e=0:t.includes("cours")?(e=e>5?e:5,this.myForm.get("etatAvancementChiffre").enable()):this.myForm.get("etatAvancementChiffre").enable(),this.myForm.get("etatAvancementChiffre").setValue(e)}},{key:"selectChange",value:function(t){this.idVisite.setValue(null),this.idCycle.setValue(null),this.idOrgane.setValue(null)}},{key:"updateListOrganisme",value:function(t){this.listOrganisme=t;var e=0,n=!0;this.listOrganisme=this.listOrganisme.filter(function(t){return t.id===e&&(n=!1),e=t.id,n})}},{key:"reset",value:function(){this.o=new r.k,this.createForm()}},{key:"isAdmin",get:function(){return this.session.isAdmin}},{key:"showEtatDavancement",get:function(){return!(!this.myForm.get("etat").value.includes("cour")&&!this.myForm.get("etat").value.includes("continue"))}},{key:"mecanisme",get:function(){return this.myForm.get("mecanisme")}},{key:"idVisite",get:function(){return this.myForm.get("idVisite")}},{key:"idCycle",get:function(){return this.myForm.get("idCycle")}},{key:"idOrgane",get:function(){return this.myForm.get("idOrgane")}},{key:"cycleActive",get:function(){return"Examen p\xe9riodique universal"===this.mecanisme.value}},{key:"visiteActive",get:function(){return"Proc\xe9dure sp\xe9ciale"===this.mecanisme.value}},{key:"organeActive",get:function(){return"Organes de trait\xe9s"===this.mecanisme.value}}]),e}()).\u0275fac=function(t){return new(t||st)(c.Nb(l.a),c.Nb(l.e),c.Nb(m.a),c.Nb(u.d),c.Nb(d.a),c.Nb(b.a))},st.\u0275cmp=c.Hb({type:st,selectors:[["app-update"]],decls:119,vars:94,consts:[[1,"host"],[3,"title"],[1,""],[3,"formGroup"],[2,"margin-top","15px"],[1,"input"],["appearance","fill",2,"width","20%"],["matInput","","formControlName","codeRecommendation","required","",3,"readonly"],[2,"margin","0 1%"],["appearance","fill",2,"width","78%"],["matInput","","formControlName","nom","required","",3,"readonly"],["matInput","","formControlName","codeRecommendationAr","required","",3,"readonly"],["matInput","","formControlName","nomAr","required","",3,"readonly"],[1,"inputs2"],["appearance","fill"],["formControlName","mecanisme",3,"disabled","selectionChange"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill",4,"ngIf"],["formControlName","axes","multiple",""],["formControlName","sousAxes","multiple",""],["value",""],[3,"label",4,"ngFor","ngForOf"],["appearance","fill",2,"width","48%"],["formControlName","idPays",3,"disabled"],["appearance","fill",2,"width","10%"],["type","number","min","0","matInput","","formControlName","annee",3,"readonly"],["appearance","fill",2,"width","18%"],["type","text","matInput","","formControlName","anneeDisplay",3,"readonly"],["type","text","matInput","","formControlName","anneeDisplayAr",3,"readonly"],["formControlName","etat",3,"disabled","selectionChange"],["matInput","","formControlName","etatAvancementChiffre","type","number","min","0","max","100","required",""],["appearance","fill","style","width: 100%;",4,"ngIf"],["appearance","fill",2,"width","100%"],["matInput","","rows","0","formControlName","complement",3,"readonly"],[3,"disabled","nameBtn","folderToSaveInServer","propertyOfParent","eventSubmitToParent","eventSubmitFromParent"],[3,"listFromParent","eventToParent"],[1,"actions"],["mat-button","","type","button",3,"routerLink"],["mat-raised-button","","cdkFocusInitial","","color","primary",3,"disabled","click"],[3,"value"],["formControlName","idCycle",3,"disabled"],["formControlName","idVisite",3,"disabled"],["formControlName","idOrgane",3,"disabled"],[3,"label"],["matInput","","rows","0","formControlName","etatAvancement",3,"readonly"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.Ob(1,"app-title",1),c.fc(2,"translate"),c.Tb(3,"div",2),c.Tb(4,"form",3),c.Tb(5,"mat-card",4),c.Tb(6,"div",5),c.Tb(7,"mat-form-field",6),c.Tb(8,"mat-label"),c.Cc(9),c.fc(10,"translate"),c.Sb(),c.Ob(11,"input",7),c.Sb(),c.Ob(12,"span",8),c.Tb(13,"mat-form-field",9),c.Tb(14,"mat-label"),c.Cc(15),c.fc(16,"translate"),c.Sb(),c.Ob(17,"input",10),c.Sb(),c.Sb(),c.Tb(18,"div",5),c.Tb(19,"mat-form-field",6),c.Tb(20,"mat-label"),c.Cc(21),c.fc(22,"translate"),c.Sb(),c.Ob(23,"input",11),c.Sb(),c.Ob(24,"span",8),c.Tb(25,"mat-form-field",9),c.Tb(26,"mat-label"),c.Cc(27),c.fc(28,"translate"),c.Sb(),c.Ob(29,"input",12),c.Sb(),c.Sb(),c.Tb(30,"div",13),c.Tb(31,"mat-form-field",14),c.Tb(32,"mat-label"),c.Cc(33),c.fc(34,"translate"),c.Sb(),c.Tb(35,"mat-select",15),c.ac("selectionChange",function(t){return e.selectChange(t.value)}),c.Tb(36,"mat-option",16),c.Cc(37,"..."),c.Sb(),c.Bc(38,Q,2,2,"mat-option",17),c.fc(39,"async"),c.Sb(),c.Sb(),c.Bc(40,Z,9,7,"mat-form-field",18),c.Bc(41,Y,9,7,"mat-form-field",18),c.Bc(42,et,9,7,"mat-form-field",18),c.Sb(),c.Tb(43,"div",13),c.Tb(44,"mat-form-field",14),c.Tb(45,"mat-label"),c.Cc(46),c.fc(47,"translate"),c.Sb(),c.Tb(48,"mat-select",19),c.Bc(49,nt,2,2,"mat-option",17),c.fc(50,"async"),c.Sb(),c.Sb(),c.Tb(51,"mat-form-field",14),c.Tb(52,"mat-label"),c.Cc(53),c.fc(54,"translate"),c.Sb(),c.Tb(55,"mat-select",20),c.Tb(56,"mat-option",21),c.Cc(57,"-- ... --"),c.Sb(),c.Bc(58,at,2,2,"mat-optgroup",22),c.fc(59,"async"),c.Sb(),c.Sb(),c.Sb(),c.Tb(60,"mat-form-field",23),c.Tb(61,"mat-label"),c.Cc(62),c.fc(63,"translate"),c.Sb(),c.Tb(64,"mat-select",24),c.Tb(65,"mat-option",16),c.Cc(66,"..."),c.Sb(),c.Bc(67,ot,2,2,"mat-option",17),c.fc(68,"async"),c.Sb(),c.Sb(),c.Ob(69,"span",8),c.Tb(70,"mat-form-field",25),c.Tb(71,"mat-label"),c.Cc(72),c.fc(73,"translate"),c.Sb(),c.Ob(74,"input",26),c.Sb(),c.Ob(75,"span",8),c.Tb(76,"mat-form-field",27),c.Tb(77,"mat-label"),c.Cc(78),c.fc(79,"translate"),c.Sb(),c.Ob(80,"input",28),c.Sb(),c.Ob(81,"span",8),c.Tb(82,"mat-form-field",27),c.Tb(83,"mat-label"),c.Cc(84),c.fc(85,"translate"),c.Sb(),c.Ob(86,"input",29),c.Sb(),c.Tb(87,"mat-form-field",9),c.Tb(88,"mat-label"),c.Cc(89),c.fc(90,"translate"),c.Sb(),c.Tb(91,"mat-select",30),c.ac("selectionChange",function(t){return e.etat(t.value)}),c.Tb(92,"mat-option",21),c.Cc(93,"..."),c.Sb(),c.Bc(94,ct,2,2,"mat-option",17),c.fc(95,"async"),c.Sb(),c.Sb(),c.Ob(96,"span",8),c.Tb(97,"mat-form-field",6),c.Tb(98,"mat-label"),c.Cc(99),c.fc(100,"translate"),c.Sb(),c.Ob(101,"input",31),c.Sb(),c.Bc(102,rt,5,4,"mat-form-field",32),c.Tb(103,"mat-form-field",33),c.Tb(104,"mat-label"),c.Cc(105),c.fc(106,"translate"),c.Sb(),c.Ob(107,"textarea",34),c.Sb(),c.Ob(108,"app-upload",35),c.fc(109,"translate"),c.Sb(),c.Sb(),c.Tb(110,"app-organismes",36),c.ac("eventToParent",function(t){return e.updateListOrganisme(t)}),c.Sb(),c.Tb(111,"div",37),c.Tb(112,"button",38),c.Cc(113),c.fc(114,"translate"),c.Sb(),c.Cc(115,"\xa0\xa0 "),c.Tb(116,"button",39),c.ac("click",function(){return e.submit(e.myForm.value)}),c.Cc(117),c.fc(118,"translate"),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&t&&(c.Bb(1),c.lc("title",c.gc(2,47,"admin.recommandation.list.Recommandation")),c.Bb(3),c.kc("formGroup",e.myForm),c.Bb(5),c.Dc(c.gc(10,49,"admin.recommandation.list.code")),c.Bb(2),c.kc("readonly",!e.isAdmin),c.Bb(4),c.Dc(c.gc(16,51,"admin.recommandation.list.nom")),c.Bb(2),c.kc("readonly",!e.isAdmin),c.Bb(4),c.Dc(c.gc(22,53,"admin.recommandation.list.codeAr")),c.Bb(2),c.kc("readonly",!e.isAdmin),c.Bb(4),c.Dc(c.gc(28,55,"admin.recommandation.list.nomAr")),c.Bb(2),c.kc("readonly",!e.isAdmin),c.Bb(4),c.Dc(c.gc(34,57,"admin.recommandation.list.mecanisme")),c.Bb(2),c.kc("disabled",!e.isAdmin),c.Bb(3),c.kc("ngForOf",c.gc(39,59,e.mecanismes)),c.Bb(2),c.kc("ngIf",e.cycleActive),c.Bb(1),c.kc("ngIf",e.visiteActive),c.Bb(1),c.kc("ngIf",e.organeActive),c.Bb(4),c.Dc(c.gc(47,61,"admin.recommandation.list.Axe")),c.Bb(3),c.kc("ngForOf",c.gc(50,63,e.axes)),c.Bb(4),c.Dc(c.gc(54,65,"admin.recommandation.list.Sousaxe")),c.Bb(5),c.kc("ngForOf",c.gc(59,67,e.axes)),c.Bb(4),c.Dc(c.gc(63,69,"admin.recommandation.update.Pays")),c.Bb(2),c.kc("disabled",!e.isAdmin),c.Bb(3),c.kc("ngForOf",c.gc(68,71,e.pays)),c.Bb(5),c.Dc(c.gc(73,73,"admin.recommandation.update.Annee")),c.Bb(2),c.kc("readonly",!e.isAdmin),c.Bb(4),c.Dc(c.gc(79,75,"admin.recommandation.update.AnneeDisplay")),c.Bb(2),c.kc("readonly",!e.isAdmin),c.Bb(4),c.Dc(c.gc(85,77,"admin.recommandation.update.AnneeDisplayAr")),c.Bb(2),c.kc("readonly",!e.isAdmin),c.Bb(3),c.Dc(c.gc(90,79,"admin.recommandation.list.Etatdemisenoeuvre")),c.Bb(2),c.kc("disabled",!e.isAdmin),c.Bb(3),c.kc("ngForOf",c.gc(95,81,e.etats)),c.Bb(5),c.Dc(c.gc(100,83,"admin.recommandation.update.Etaten")),c.Bb(3),c.kc("ngIf",e.showEtatDavancement),c.Bb(3),c.Dc(c.gc(106,85,"admin.recommandation.list.complement")),c.Bb(2),c.kc("readonly",!e.isAdmin),c.Bb(1),c.lc("nameBtn",c.gc(109,87,"admin.recommandation.list.OBSERVATIONS")),c.kc("disabled",!e.isAdmin)("folderToSaveInServer",e.folderToSaveInServer)("propertyOfParent",e.pieceJointeTo)("eventSubmitToParent",e.pieceJointeFrom)("eventSubmitFromParent",e.eventSubmitFromParent),c.Bb(2),c.kc("listFromParent",e.eventToChild),c.Bb(2),c.kc("routerLink",c.mc(93,dt)),c.Bb(1),c.Dc(c.gc(114,89,"admin.Retour")),c.Bb(3),c.kc("disabled",e.myForm.invalid||!e.isAdmin),c.Bb(1),c.Dc(c.gc(118,91,"admin.Enregistre")))},directives:[f.a,u.t,u.n,u.h,p.a,g.c,g.f,h.b,u.c,u.m,u.g,u.r,v.a,y.o,o.l,o.m,u.p,S.a,G,D.a,l.f,y.n],pipes:[L.c,o.b],styles:["mat-card[_ngcontent-%COMP%]{margin:0 15px}mat-card[_ngcontent-%COMP%]   .inputs2[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(25vw,1fr));grid-column-gap:6px;grid-row-gap:6px;align-items:center}.actions[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{display:flex}.actions[_ngcontent-%COMP%]{flex-direction:row-reverse;margin:30px 0}.host[_ngcontent-%COMP%]{margin:1em!important}"]}),st),ft=a("F76L"),pt=((lt=function(){function e(){t(this,e)}return n(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(t){return new(t||lt)},lt.\u0275cmp=c.Hb({type:lt,selectors:[["app-recommendation"]],decls:1,vars:0,template:function(t,e){1&t&&c.Ob(0,"router-outlet")},directives:[l.i],styles:[""]}),lt),gt=a("xjdI"),ht=[{path:"",redirectTo:"",pathMatch:"full"},{path:"",component:pt,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:ft.a},{path:"update/:id",component:bt}],canActivate:[gt.a]}],vt=((mt=function e(){t(this,e)}).\u0275mod=c.Lb({type:mt}),mt.\u0275inj=c.Kb({factory:function(t){return new(t||mt)},imports:[[l.h.forChild(ht)],l.h]}),mt),yt=a("tk/3"),St=a("2thQ"),Ct=a("Dgsr"),kt=a("Fr4G"),Ot=((ut=function e(){t(this,e)}).\u0275mod=c.Lb({type:ut}),ut.\u0275inj=c.Kb({factory:function(t){return new(t||ut)},imports:[[L.b,o.c,vt,yt.c,St.a,u.i,u.q,Ct.a,kt.a]]}),ut)},ZTdd:function(e,i,a){"use strict";a.d(i,"a",function(){return b});var o=a("mrSG"),c=a("2ChS"),r=a("fXoL"),s=a("MutI"),l=a("ofXK"),m=a("FKr1");function u(t,e){if(1&t){var n=r.Ub();r.Tb(0,"a",2),r.ac("click",function(){r.sc(n);var t=r.ec().$implicit;return r.ec().openLink(t)}),r.Tb(1,"span",3),r.Cc(2),r.Sb(),r.Sb()}if(2&t){var i=r.ec().$implicit;r.Bb(2),r.Ec("- ",i.substring(14,i.length-1),"")}}function d(t,e){if(1&t&&(r.Tb(0,"div"),r.Bc(1,u,3,1,"a",1),r.Sb()),2&t){var n=e.$implicit,i=r.ec();r.Bb(1),r.kc("ngIf",i.show(n))}}var b=function(){var e=function(){function e(n,i,a){t(this,e),this.bottomSheetRef=n,this.data=i,this.url=a,this.list=[],this.folder=""}return n(e,[{key:"ngOnInit",value:function(){if(this.data.fileName){var t=this.data.fileName.split(";");t.pop(),this.folder=this.data.folder,// console.log(t),this.list=t}}},{key:"openLink",value:function(t){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=+t.substring(t.length-1,t.length),t=isNaN(n)?t:t.substring(0,t.length-1),window.open("".concat(this.url,"/").concat(this.folder,"/").concat(t));case 2:case"end":return e.stop()}},e,this)}))}},{key:"show",value:function(t){if(""===t)return!1;var e=+t.substring(t.length-1,t.length);return!!isNaN(e)||1===e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Nb(c.d),r.Nb(c.a),r.Nb("BASE_URL"))},e.\u0275cmp=r.Hb({type:e,selectors:[["app-download-sheet"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],["mat-list-item","",3,"click",4,"ngIf"],["mat-list-item","",3,"click"],["mat-line",""]],template:function(t,e){1&t&&(r.Tb(0,"mat-nav-list"),r.Bc(1,d,2,1,"div",0),r.Sb()),2&t&&(r.Bb(1),r.kc("ngForOf",e.list))},directives:[s.d,l.l,l.m,s.b,m.k],styles:[""]}),e}()}}])}();