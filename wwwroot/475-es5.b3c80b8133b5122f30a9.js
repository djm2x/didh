!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return e(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[475],{46475:function(e,a,r){"use strict";r.d(a,{n:function(){return Dt},H:function(){return Lt}});var s=r(64762),l=r(92935),c=r(35366),m=r(37112),u=r(36278),d=r(61116),g=r(84369);function f(t,e){if(1&t&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&t){var n=c.oxw();c.xp6(1),c.hij("Cylce: ",n.o.cycle.label,"")}}function p(t,e){if(1&t&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&t){var n=c.oxw();c.xp6(1),c.hij("Visite: ",n.o.visite.mandat,"")}}function Z(t,e){if(1&t&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&t){var n=c.oxw();c.xp6(1),c.hij("Organe de trait\xe9: ",n.o.organe.label,"")}}var h=function(){var t=function(){function t(e,n){i(this,t),this.dialogRef=e,this.data=n,this.title=""}return o(t,[{key:"ngOnInit",value:function(){this.o=this.data.model,this.title=this.data.title}},{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"onOkClick",value:function(t){}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.Y36(l.so),c.Y36(l.WI))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-update"]],decls:23,vars:8,consts:[[1,"dialog"],["mat-dialog-title",""],["role","toolbar",1,"task-header"],[1,"content"],["mat-dialog-content",""],[4,"ngIf"],["mat-dialog-actions","",1,"actions"],["mat-button","","type","button",3,"click"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"h1",1),c.TgZ(2,"mat-toolbar",2),c.TgZ(3,"span"),c._uU(4),c.qZA(),c.qZA(),c._UZ(5,"mat-divider"),c.qZA(),c.TgZ(6,"div",3),c.TgZ(7,"div",4),c.TgZ(8,"ul"),c.TgZ(9,"li"),c._uU(10),c.qZA(),c.TgZ(11,"li"),c._uU(12),c.qZA(),c.TgZ(13,"li"),c._uU(14),c.qZA(),c.TgZ(15,"li"),c._uU(16),c.qZA(),c.YNc(17,f,2,1,"li",5),c.YNc(18,p,2,1,"li",5),c.YNc(19,Z,2,1,"li",5),c.qZA(),c.qZA(),c.TgZ(20,"div",6),c.TgZ(21,"button",7),c.NdJ("click",function(){return e.onNoClick()}),c._uU(22,"Retour"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(4),c.Oqu(e.o.nom),c.xp6(6),c.Oqu(e.o.etat),c.xp6(2),c.Oqu(e.o.mecanisme),c.xp6(2),c.hij("Axe: ",e.o.axes,""),c.xp6(2),c.hij("Sous axe: ",e.o.sousAxes,""),c.xp6(1),c.Q6J("ngIf",e.o.cycle),c.xp6(1),c.Q6J("ngIf",e.o.visite),c.xp6(1),c.Q6J("ngIf",e.o.organe))},directives:[l.uh,m.Ye,u.d,l.xY,d.O5,l.H8,g.lW],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.dialog[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:hidden}.dialog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 5px}.dialog[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 20px 25px}.dialog[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse}.myrow[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),t}(),A=r(5609),x=r(59241),y=r(31906),v=r(31041),q=r(44689),T=r(12996),w=r(92572),b=r(94589),O=r(31496),_=r(50545),C=r(63337),U=r(34411),N=r(84222),k=r(20707),S=r(77307),J=r(6489),Y=r(13070),D=r(9550),L=r(13841),Q=r(87064),F=r(47340),P=r(87672),R=r(24311),I=r(60649),M=["mytable"],E=function(){return["/admin/recommendation/update",0]};function $(t,e){1&t&&(c.TgZ(0,"button",45),c.TgZ(1,"mat-icon"),c._uU(2,"add"),c.qZA(),c._uU(3),c.ALo(4,"translate"),c.qZA()),2&t&&(c.Q6J("routerLink",c.DdM(4,E)),c.xp6(3),c.hij(" ",c.lcZ(4,2,"admin.recommandation.list.Recommandation")," "))}function j(t,e){if(1&t&&(c.TgZ(0,"mat-option",46),c._uU(1),c.qZA()),2&t){var n=e.$implicit,i=c.oxw();c.Q6J("value",n.id),c.xp6(1),c.Oqu("fr"===i.mytranslate.langSync?n.nom:n.nomAr)}}function V(t,e){if(1&t&&(c.TgZ(0,"mat-option",46),c._uU(1),c.qZA()),2&t){var n=e.$implicit,i=c.oxw(2);c.Q6J("value",n.annee),c.xp6(1),c.Oqu("fr"===i.mytranslate.langSync?n.anneeDisplay:n.anneeDisplayAr)}}function B(t,e){if(1&t&&(c.TgZ(0,"mat-form-field",10),c.TgZ(1,"mat-label"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"mat-select",47),c.TgZ(5,"mat-option",13),c._uU(6,"..."),c.qZA(),c.YNc(7,V,2,2,"mat-option",14),c.qZA(),c.qZA()),2&t){var n=c.oxw();c.xp6(2),c.Oqu(c.lcZ(3,2,"admin.questionnaire.list.ann\xe9e")),c.xp6(5),c.Q6J("ngForOf",n.annees)}}function z(t,e){if(1&t&&(c.TgZ(0,"mat-option",46),c._uU(1),c.qZA()),2&t){var n=e.$implicit,i=c.oxw();c.Q6J("value",n.name),c.xp6(1),c.Oqu("fr"===i.mytranslate.langSync?n.name:n.nameAr)}}function G(t,e){if(1&t&&(c.TgZ(0,"mat-option",46),c._uU(1),c.qZA()),2&t){var n=e.$implicit,i=c.oxw(2);c.Q6J("value",n.id),c.xp6(1),c.Oqu("fr"===i.mytranslate.langSync?n.label:n.labelAr)}}function H(t,e){if(1&t&&(c.TgZ(0,"mat-form-field",10),c.TgZ(1,"mat-label"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"mat-select",48),c.TgZ(5,"mat-option",13),c._uU(6,"..."),c.qZA(),c.YNc(7,G,2,2,"mat-option",14),c.ALo(8,"async"),c.qZA(),c.qZA()),2&t){var n=c.oxw();c.xp6(2),c.Oqu(c.lcZ(3,2,"admin.recommandation.list.Cycle")),c.xp6(5),c.Q6J("ngForOf",c.lcZ(8,4,n.cycles))}}function W(t,e){if(1&t&&(c.TgZ(0,"mat-option",46),c._uU(1),c.qZA()),2&t){var n=e.$implicit,i=c.oxw(2);c.Q6J("value",n.id),c.xp6(1),c.Oqu("fr"===i.mytranslate.langSync?n.mandat:n.mandatAr)}}function X(t,e){if(1&t&&(c.TgZ(0,"mat-form-field",10),c.TgZ(1,"mat-label"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"mat-select",49),c.TgZ(5,"mat-option",13),c._uU(6,"..."),c.qZA(),c.YNc(7,W,2,2,"mat-option",14),c.ALo(8,"async"),c.qZA(),c.qZA()),2&t){var n=c.oxw();c.xp6(2),c.Oqu(c.lcZ(3,2,"admin.recommandation.list.Visite")),c.xp6(5),c.Q6J("ngForOf",c.lcZ(8,4,n.visites))}}function K(t,e){if(1&t&&(c.TgZ(0,"mat-option",46),c._uU(1),c.qZA()),2&t){var n=e.$implicit,i=c.oxw(2);c.Q6J("value",n.id),c.xp6(1),c.Oqu("fr"===i.mytranslate.langSync?n.label:n.labelAr)}}function tt(t,e){if(1&t&&(c.TgZ(0,"mat-form-field",10),c.TgZ(1,"mat-label"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"mat-select",50),c.TgZ(5,"mat-option",13),c._uU(6,"..."),c.qZA(),c.YNc(7,K,2,2,"mat-option",14),c.ALo(8,"async"),c.qZA(),c.qZA()),2&t){var n=c.oxw();c.xp6(2),c.Oqu(c.lcZ(3,2,"admin.recommandation.list.Organe")),c.xp6(5),c.Q6J("ngForOf",c.lcZ(8,4,n.organes))}}function et(t,e){if(1&t&&(c.TgZ(0,"mat-option",46),c._uU(1),c.qZA()),2&t){var n=e.$implicit,i=c.oxw();c.Q6J("value",n.name),c.xp6(1),c.Oqu("fr"===i.mytranslate.langSync?n.name:n.nameAr)}}function nt(t,e){if(1&t&&(c.TgZ(0,"mat-option",46),c._uU(1),c.qZA()),2&t){var n=e.$implicit,i=c.oxw();c.Q6J("value",n.id),c.xp6(1),c.Oqu("fr"===i.mytranslate.langSync?n.label:n.labelAr)}}function it(t,e){if(1&t&&(c.TgZ(0,"mat-option",46),c._uU(1),c.qZA()),2&t){var n=e.$implicit,i=c.oxw();c.Q6J("value",n.id),c.xp6(1),c.Oqu("fr"===i.mytranslate.langSync?n.label:n.labelAr)}}function at(t,e){if(1&t&&(c.TgZ(0,"mat-option",46),c._uU(1),c.qZA()),2&t){var n=e.$implicit,i=c.oxw();c.Q6J("value",n.id),c.xp6(1),c.hij(" ","fr"===i.mytranslate.langSync?n.label:n.labelAr,"")}}function ot(t,e){1&t&&c._UZ(0,"mat-spinner")}function rt(t,e){if(1&t&&(c.TgZ(0,"div",51),c.YNc(1,ot,1,0,"mat-spinner",52),c.qZA()),2&t){var n=c.oxw();c.xp6(1),c.Q6J("ngIf",n.isLoadingResults)}}function st(t,e){1&t&&(c.TgZ(0,"th",53),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&t&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"admin.recommandation.list.code")))}function lt(t,e){if(1&t&&(c.TgZ(0,"td",54),c._uU(1),c.qZA()),2&t){var n=e.$implicit,i=c.oxw();c.xp6(1),c.hij(" ","fr"===i.mytranslate.langSync?n.codeRecommendation:i.displayFrIfArNull(n.codeRecommendation,n.codeRecommendationAr)," ")}}function ct(t,e){1&t&&(c.TgZ(0,"th",53),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&t&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"admin.recommandation.list.nom")))}function mt(t,e){if(1&t&&(c.TgZ(0,"td",54),c._uU(1),c.qZA()),2&t){var n=e.$implicit,i=c.oxw();c.xp6(1),c.Oqu("fr"===i.mytranslate.langSync?n.nom:i.displayFrIfArNull(n.nom,n.nomAr))}}function ut(t,e){1&t&&(c.TgZ(0,"th",53),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&t&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"admin.recommandation.list.mecanisme")))}function dt(t,e){if(1&t&&(c.TgZ(0,"td",54),c._uU(1),c.qZA()),2&t){var n=e.$implicit;c.xp6(1),c.lnq(" ",n.organe," ",n.cycle," ",n.visite," ")}}function gt(t,e){1&t&&(c.TgZ(0,"th",53),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&t&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"admin.recommandation.list.Axe")))}function ft(t,e){if(1&t&&(c.TgZ(0,"td",54),c._uU(1),c.qZA()),2&t){var n=e.$implicit,i=c.oxw();c.xp6(1),c.Oqu(n[i.columnDefs[3].columnDef])}}function pt(t,e){1&t&&(c.TgZ(0,"th",53),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&t&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"admin.recommandation.list.Sousaxe")))}function Zt(t,e){if(1&t&&(c.TgZ(0,"td",54),c._uU(1),c.qZA()),2&t){var n=e.$implicit,i=c.oxw();c.xp6(1),c.Oqu(n[i.columnDefs[4].columnDef])}}function ht(t,e){1&t&&(c.TgZ(0,"th",53),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&t&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"admin.recommandation.list.DEPARTEMENT")))}function At(t,e){if(1&t&&(c.TgZ(0,"td",54),c._uU(1),c.qZA()),2&t){var n=e.$implicit;c.xp6(1),c.Oqu(n.organismes)}}function xt(t,e){1&t&&(c.TgZ(0,"th",53),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&t&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"admin.recommandation.list.Etatdemisenoeuvre")))}function yt(t,e){if(1&t&&(c.TgZ(0,"td",54),c._uU(1),c.qZA()),2&t){var n=e.$implicit,i=c.oxw();c.xp6(1),c.Oqu(i.displayMulti(n.mecanisme,n.etat).e)}}function vt(t,e){1&t&&(c.TgZ(0,"th",55),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&t&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"admin.recommandation.list.OBSERVATIONS")))}function qt(t,e){if(1&t){var n=c.EpF();c.TgZ(0,"button",57),c.NdJ("click",function(){c.CHM(n);var t=c.oxw().$implicit;return c.oxw().showPieceJoin(t.pieceJointe)}),c.TgZ(1,"mat-icon"),c._uU(2,"cloud_download"),c.qZA(),c.qZA()}if(2&t){var i=c.oxw().$implicit;c.Q6J("disabled",""===i.pieceJointe)("matTooltip",i.pieceJointe)}}function Tt(t,e){if(1&t&&(c.TgZ(0,"td",54),c.YNc(1,qt,3,2,"button",56),c.qZA()),2&t){var n=e.$implicit,i=c.oxw();c.xp6(1),c.Q6J("ngIf",i.showDownload(n.idsOrganisme))}}function wt(t,e){1&t&&(c.TgZ(0,"th",53),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&t&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"admin.recommandation.list.complement")))}function bt(t,e){if(1&t&&(c.TgZ(0,"td",54),c._uU(1),c.qZA()),2&t){var n=e.$implicit;c.xp6(1),c.Oqu(n.complement)}}function Ot(t,e){1&t&&c._UZ(0,"th",55)}var _t=function(t){return["/admin/recommendation/update",t]};function Ct(t,e){if(1&t&&(c.TgZ(0,"button",62),c.TgZ(1,"mat-icon"),c._uU(2,"create"),c.qZA(),c.qZA()),2&t){var n=c.oxw(2).$implicit;c.Q6J("routerLink",c.VKq(1,_t,n.id))}}function Ut(t,e){if(1&t){var n=c.EpF();c.TgZ(0,"button",63),c.NdJ("click",function(){c.CHM(n);var t=c.oxw(2).$implicit;return c.oxw().delete(t)}),c.TgZ(1,"mat-icon"),c._uU(2,"delete_sweep"),c.qZA(),c.qZA()}}function Nt(t,e){if(1&t&&(c.TgZ(0,"div",59),c.YNc(1,Ct,3,3,"button",60),c.YNc(2,Ut,3,0,"button",61),c.qZA()),2&t){var n=c.oxw(2);c.xp6(1),c.Q6J("ngIf",!n.session.isSuperViseur),c.xp6(1),c.Q6J("ngIf",!n.session.isPointFocal&&!n.session.isSuperViseur)}}function kt(t,e){if(1&t&&(c.TgZ(0,"td",54),c.YNc(1,Nt,3,2,"div",58),c.qZA()),2&t){var n=c.oxw();c.xp6(1),c.Q6J("ngIf",!n.session.isPublic)}}function St(t,e){1&t&&c._UZ(0,"tr",64)}function Jt(t,e){1&t&&c._UZ(0,"tr",65)}var Yt=function(t){return[10,25,50,100,250,t]},Dt=function(){var e=function(){function e(t,n,a,o,r,s,l,m,u){i(this,e),this.uow=t,this.dialog=n,this.mydialog=a,this.mytranslate=o,this.fb=r,this.session=s,this.route=l,this.bottomSheet=m,this.excel=u,this.update=new c.vpe,this.isLoadingResults=!0,this.resultsLength=0,this.isRateLimitReached=!1,this.dataSource=[],this.columnDefs=[{columnDef:"codeRecommendation",show:!0},{columnDef:"nom",show:!0},{columnDef:"mecanisme",show:!0},{columnDef:"axe",show:!0},{columnDef:"sousAxe",show:!0},{columnDef:"organismes",show:!1},{columnDef:"etat",show:!1},{columnDef:"complement",show:!1},{columnDef:"option",show:!0}],this.displayedColumns=["codeRecommendation","nom","mecanisme","axe","sousAxe","organismes","etat","complement","option"],this.panelOpenState=!1,this.organismes=this.uow.organismes.get(),this.axes=this.uow.axes.get(),this.sousAxes=[],this.annees=[],this.mecanismes=this.uow.mecanismes,this.visites=this.uow.visites.get(),this.organes=this.uow.organes.get(),this.pays=this.uow.pays.get(),this.cycles=this.uow.cycles.get(),this.etats=this.uow.etats,this.departementList=[],this.progress=0,this.formData=new FormData,this.o=new Lt,this.myAuto=new v.NI(""),this.session.isPublic&&(this.columnDefs=this.columnDefs.filter(function(t){return t.show}),this.displayedColumns=this.columnDefs.map(function(t){return t.columnDef}))}return o(e,[{key:"ngOnInit",value:function(){var t=this;this.createForm(),this.isLoadingResults=!1,this.uow.recommendations.annee().subscribe(function(e){t.annees=e}),this.o.idOrganisme=this.session.isPointFocal?this.session.user.idOrganisme:0,this.myForm.get("idOrganisme").setValue(this.o.idOrganisme),(0,y.T)(this.sort.sortChange,this.paginator.page,this.update).subscribe(function(e){!0===e?t.paginator.pageIndex=0:e=e,t.paginator.pageSize?e=e:t.paginator.pageSize=10,t.o.startIndex=t.paginator.pageIndex*t.paginator.pageSize,t.o.pageSize=t.paginator.pageSize,t.o.sortBy=t.sort.active?t.sort.active:"id",t.o.sortDir=t.sort.direction?t.sort.direction:"desc",t.isLoadingResults=!0,t.searchAndGet(t.o)}),this.route.queryParams.subscribe(function(e){var n=e.data;n&&t.uow.recommendations.getDetail(n).subscribe(function(e){t.openDialog(e)})}),this.autoComplete()}},{key:"showDownload",value:function(t){return!t||!1===this.session.isPointFocal||t.includes(this.session.user.idOrganisme)}},{key:"generateExcel",value:function(){var t=this,e=this.dataSource.map(function(e,i){var a,o,r,s,l,c,m;return n(a={},t.mytranslate.get("admin.recommandation.list.code"),"fr"===t.mytranslate.langSync?e.codeRecommendation:e.codeRecommendationAr),n(a,t.mytranslate.get("admin.recommandation.list.nom"),"fr"===t.mytranslate.langSync?e.nom:e.nomAr),n(a,t.mytranslate.get("admin.recommandation.list.mecanisme"),"".concat(null!==(o=e.organe)&&void 0!==o?o:"").concat(null!==(r=e.cycle)&&void 0!==r?r:"").concat(null!==(s=e.visite)&&void 0!==s?s:"")),n(a,t.mytranslate.get("admin.recommandation.list.Axe"),null===(l=e.axe)||void 0===l?void 0:l.join("; ")),n(a,t.mytranslate.get("admin.recommandation.list.Sousaxe"),null===(c=e.sousAxe)||void 0===c?void 0:c.join("; ")),n(a,t.mytranslate.get("admin.recommandation.list.DEPARTEMENT"),null===(m=e.organismes)||void 0===m?void 0:m.join("; ")),n(a,t.mytranslate.get("admin.recommandation.list.Etatdemisenoeuvre"),t.displayMulti(e.mecanisme,e.etat).e),n(a,t.mytranslate.get("admin.recommandation.list.complement"),e.complement),a});this.excel.json_to_sheet(e)}},{key:"displayFrIfArNull",value:function(t,e){return null==e||""===e||"null"===e?t:e}},{key:"displayMulti",value:function(t,e){if("fr"===this.mytranslate.langSync)return{m:t,e:e};var n=[{fr:"Examen p\xe9riodique universal",ar:"\u0627\u0644\u0627\u0633\u062a\u0639\u0631\u0627\u0636 \u0627\u0644\u062f\u0648\u0631\u064a \u0627\u0644\u0634\u0627\u0645\u0644"},{fr:"Organes de Trait\xe9s",ar:"\u0647\u064a\u0626\u0627\u062a \u0627\u0644\u0645\u0639\u0627\u0647\u062f\u0627\u062a"},{fr:"Proc\xe9dures sp\xe9ciales",ar:"\u0627\u0644\u0627\u062c\u0631\u0627\u0621\u0627\u062a \u0627\u0644\u062e\u0627\u0635\u0629"}].find(function(e){return t.toLowerCase().includes(e.fr.toLowerCase().substring(0,6))}),i=[{fr:"Non R\xe9alis\xe9",ar:"\u063a\u064a\u0631 \u0645\u0646\u062c\u0632"},{fr:"En cours",ar:"\u0641\u064a \u0637\u0648\u0631 \u0627\u0644\u0625\u0646\u062c\u0627\u0632"},{fr:"Recommendation continue",ar:"\u062a\u0646\u0641\u064a\u0630 \u0645\u0633\u062a\u0645\u0631"},{fr:"R\xe9alis\xe9",ar:"\u0645\u0646\u062c\u0632"}].find(function(t){return t.fr.toLowerCase()===e.toLowerCase()});return{m:n?n.ar:t,e:i?i.ar:e}}},{key:"autoComplete",value:function(){var t=this;this.filteredOptions=this.myAuto.valueChanges.pipe((0,q.w)(function(e){return e.length>1?t.uow.organismes.autocompletePost("label",e):[]}))}},{key:"selected",value:function(t){var e=t.option.value;this.myAuto.setValue(e.label),this.myForm.get("idOrganisme").setValue(e.id)}},{key:"createForm",value:function(){this.myForm=this.fb.group({idOrganisme:this.o.idOrganisme,mecanisme:this.o.mecanisme,idCycle:this.o.idCycle,idOrgane:this.o.idOrgane,idVisite:this.o.idVisite,idAxe:this.o.idAxe,nom:this.o.nom,etat:this.o.etat,idPays:this.o.idPays,idSousAxe:this.o.idSousAxe,annee:this.o.annee,startIndex:this.o.startIndex,pageSize:this.o.pageSize,sortBy:this.o.sortBy,sortDir:this.o.sortDir})}},{key:"mecanisme",get:function(){return this.myForm.get("mecanisme")}},{key:"idVisite",get:function(){return this.myForm.get("idVisite")}},{key:"idCycle",get:function(){return this.myForm.get("idCycle")}},{key:"idOrgane",get:function(){return this.myForm.get("idOrgane")}},{key:"cycleActive",get:function(){return"Examen p\xe9riodique universal"===this.mecanisme.value}},{key:"visiteActive",get:function(){return"Proc\xe9dure sp\xe9ciale"===this.mecanisme.value}},{key:"organeActive",get:function(){return"Organes de trait\xe9s"===this.mecanisme.value}},{key:"selectChange",value:function(t){this.idVisite.setValue(0),this.idCycle.setValue(0),this.idOrgane.setValue(0)}},{key:"reset",value:function(){this.o=new Lt,this.createForm(),this.searchAndGet(this.o)}},{key:"search",value:function(t){this.searchAndGet(t)}},{key:"detail",value:function(t){var e=this;this.uow.recommendations.getDetail(t.id).subscribe(function(t){e.openDialog(t)})}},{key:"openDialog",value:function(t){return this.dialog.open(h,{width:"7100px",disableClose:!0,data:{model:t,title:"Recommdandation"}}).afterClosed()}},{key:"searchAndGet",value:function(t){var e=this;this.o=t,this.uow.recommendations.searchAndGet(this.o).subscribe(function(t){e.dataSource=t.list,e.resultsLength=t.count,e.isLoadingResults=!1},function(t){return e.isLoadingResults=!1})}},{key:"delete",value:function(e){return(0,s.mG)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var i,a,o=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.mydialog.openDialog("recommandation").toPromise();case 2:if(n.t0=n.sent,"ok"!==n.t0){n.next=6;break}a=[],""!==e.pieceJointe?(i=a).push.apply(i,t(this.uow.decoupe(e.pieceJointe))):a=a,this.uow.files.deleteFiles(a,"recommandation").subscribe(function(t){o.uow.recommendations.delete(e.id).subscribe(function(){return o.update.next(!0)})});case 6:case"end":return n.stop()}},n,this)}))}},{key:"showPieceJoin",value:function(t){this.bottomSheet.open(T.x,{data:{fileName:t,folder:"recommandation"}})}},{key:"axeChange",value:function(t){var e=this;this.uow.sousAxes.getByIdAxe(t).subscribe(function(t){e.sousAxes=t})}},{key:"isAllEmpty",get:function(){var t;return"0"===this.myForm.get("idAxe").value.toString()&&"0"===this.myForm.get("idCycle").value.toString()&&"0"===this.myForm.get("idSousAxe").value.toString()&&"0"===this.myForm.get("idOrganisme").value.toString()&&"0"===this.myForm.get("idOrgane").value.toString()&&"0"===this.myForm.get("idPays").value.toString()&&""===this.myForm.get("nom").value.toString()&&""===this.myForm.get("etat").value.toString()&&"0"===this.myForm.get("idVisite").value.toString()&&""===(null===(t=this.myForm.get("annee").value)||void 0===t?void 0:t.toString())&&""===this.myForm.get("mecanisme").value.toString()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(w.Z),c.Y36(l.uw),c.Y36(b.b),c.Y36(O.n),c.Y36(v.qu),c.Y36(_.m),c.Y36(C.gz),c.Y36(U.ch),c.Y36(N.x))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-list"]],viewQuery:function(t,e){var n;(1&t&&(c.Gf(A.NW,7),c.Gf(x.YE,7),c.Gf(M,7)),2&t)&&(c.iGM(n=c.CRH())&&(e.paginator=n.first),c.iGM(n=c.CRH())&&(e.sort=n.first),c.iGM(n=c.CRH())&&(e.table=n.first))},decls:139,vars:65,consts:[[1,"host"],[3,"title"],[1,"right"],[1,"d-flex","flex-row-reverse","pt-3","mb-3"],["mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],["mat-raised-button","","color","warn",3,"disabled","click"],[1,"expension"],["expanded","",3,"opened","closed"],[3,"formGroup"],[1,"inputs2"],["appearance","fill"],["matInput","","formControlName","nom","required",""],["formControlName","idPays"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill",4,"ngIf"],["formControlName","mecanisme",3,"selectionChange"],["formControlName","etat"],["formControlName","idAxe",3,"selectionChange"],["formControlName","idSousAxe"],["formControlName","idOrganisme"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","",3,"click"],[1,"example-container","mat-elevation-z8"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container"],["mat-table","","multiTemplateDataRows","","aria-label","Elements","matSort","",3,"dataSource"],["mytable",""],["matColumnDef","codeRecommendation"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nom"],["matColumnDef","mecanisme"],["matColumnDef","axe"],["matColumnDef","sousAxe"],["matColumnDef","organismes"],["matColumnDef","etat"],["matColumnDef","pieceJointe"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","complement"],["matColumnDef","option",2,"flex-direction","row-reverse"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageIndex","0","pageSize","10","showFirstLastButtons","",3,"length","pageSizeOptions"],["paginator",""],["mat-raised-button","","color","primary",3,"routerLink"],[3,"value"],["formControlName","annee"],["formControlName","idCycle"],["formControlName","idVisite"],["formControlName","idOrgane"],[1,"example-loading-shade"],[4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","","color","accent",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","","color","accent",3,"disabled","matTooltip","click"],["class","button-row",4,"ngIf"],[1,"button-row"],["mat-icon-button","","color","primary",3,"routerLink",4,"ngIf"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"routerLink"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c._UZ(1,"app-title",1),c.ALo(2,"translate"),c.TgZ(3,"div",2),c.TgZ(4,"div",3),c.YNc(5,$,5,5,"button",4),c._uU(6," \xa0 "),c.TgZ(7,"button",5),c.NdJ("click",function(){return e.generateExcel()}),c.TgZ(8,"mat-icon"),c._uU(9,"cloud_download"),c.qZA(),c._uU(10," Excel "),c.qZA(),c.qZA(),c.qZA(),c.TgZ(11,"div",6),c.TgZ(12,"mat-accordion"),c.TgZ(13,"mat-expansion-panel",7),c.NdJ("opened",function(){return e.panelOpenState=!0})("closed",function(){return e.panelOpenState=!1}),c.TgZ(14,"mat-expansion-panel-header"),c.TgZ(15,"mat-panel-title"),c.TgZ(16,"mat-icon"),c._uU(17,"search"),c.qZA(),c.TgZ(18,"p"),c._uU(19),c.ALo(20,"translate"),c.qZA(),c.qZA(),c._UZ(21,"mat-panel-description"),c.qZA(),c._UZ(22,"mat-divider"),c.TgZ(23,"form",8),c.TgZ(24,"div",9),c.TgZ(25,"mat-form-field",10),c.TgZ(26,"mat-label"),c._uU(27),c.ALo(28,"translate"),c.qZA(),c._UZ(29,"input",11),c.qZA(),c.qZA(),c.TgZ(30,"div",9),c.TgZ(31,"mat-form-field",10),c.TgZ(32,"mat-label"),c._uU(33),c.ALo(34,"translate"),c.qZA(),c.TgZ(35,"mat-select",12),c.TgZ(36,"mat-option",13),c._uU(37,"..."),c.qZA(),c.YNc(38,j,2,2,"mat-option",14),c.ALo(39,"async"),c.qZA(),c.qZA(),c.YNc(40,B,8,4,"mat-form-field",15),c.qZA(),c.TgZ(41,"div",9),c.TgZ(42,"mat-form-field",10),c.TgZ(43,"mat-label"),c._uU(44),c.ALo(45,"translate"),c.qZA(),c.TgZ(46,"mat-select",16),c.NdJ("selectionChange",function(t){return e.selectChange(t.value)}),c.TgZ(47,"mat-option",13),c._uU(48,"..."),c.qZA(),c.YNc(49,z,2,2,"mat-option",14),c.ALo(50,"async"),c.qZA(),c.qZA(),c.YNc(51,H,9,6,"mat-form-field",15),c.YNc(52,X,9,6,"mat-form-field",15),c.YNc(53,tt,9,6,"mat-form-field",15),c.TgZ(54,"mat-form-field",10),c.TgZ(55,"mat-label"),c._uU(56),c.ALo(57,"translate"),c.qZA(),c.TgZ(58,"mat-select",17),c.YNc(59,et,2,2,"mat-option",14),c.ALo(60,"async"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(61,"div",9),c.TgZ(62,"mat-form-field",10),c.TgZ(63,"mat-label"),c._uU(64),c.ALo(65,"translate"),c.qZA(),c.TgZ(66,"mat-select",18),c.NdJ("selectionChange",function(t){return e.axeChange(t.value)}),c.TgZ(67,"mat-option",13),c._uU(68,"..."),c.qZA(),c.YNc(69,nt,2,2,"mat-option",14),c.ALo(70,"async"),c.qZA(),c.qZA(),c.TgZ(71,"mat-form-field",10),c.TgZ(72,"mat-label"),c._uU(73),c.ALo(74,"translate"),c.qZA(),c.TgZ(75,"mat-select",19),c.TgZ(76,"mat-option",13),c._uU(77,"..."),c.qZA(),c.YNc(78,it,2,2,"mat-option",14),c.qZA(),c.qZA(),c.TgZ(79,"mat-form-field",10),c.TgZ(80,"mat-label"),c._uU(81),c.ALo(82,"translate"),c.qZA(),c.TgZ(83,"mat-select",20),c.TgZ(84,"mat-option",13),c._uU(85,"..."),c.qZA(),c.YNc(86,at,2,2,"mat-option",14),c.ALo(87,"async"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(88,"div",2),c.TgZ(89,"button",21),c.NdJ("click",function(){return e.search(e.myForm.value)}),c.TgZ(90,"mat-icon"),c._uU(91,"search"),c.qZA(),c._uU(92),c.ALo(93,"translate"),c.qZA(),c._uU(94," \xa0 "),c.TgZ(95,"button",22),c.NdJ("click",function(){return e.reset()}),c.TgZ(96,"mat-icon"),c._uU(97,"refresh"),c.qZA(),c._uU(98),c.ALo(99,"translate"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(100,"div",23),c.YNc(101,rt,2,1,"div",24),c.TgZ(102,"div",25),c.TgZ(103,"table",26,27),c.ynx(105,28),c.YNc(106,st,3,3,"th",29),c.YNc(107,lt,2,1,"td",30),c.BQk(),c.ynx(108,31),c.YNc(109,ct,3,3,"th",29),c.YNc(110,mt,2,1,"td",30),c.BQk(),c.ynx(111,32),c.YNc(112,ut,3,3,"th",29),c.YNc(113,dt,2,3,"td",30),c.BQk(),c.ynx(114,33),c.YNc(115,gt,3,3,"th",29),c.YNc(116,ft,2,1,"td",30),c.BQk(),c.ynx(117,34),c.YNc(118,pt,3,3,"th",29),c.YNc(119,Zt,2,1,"td",30),c.BQk(),c.ynx(120,35),c.YNc(121,ht,3,3,"th",29),c.YNc(122,At,2,1,"td",30),c.BQk(),c.ynx(123,36),c.YNc(124,xt,3,3,"th",29),c.YNc(125,yt,2,1,"td",30),c.BQk(),c.ynx(126,37),c.YNc(127,vt,3,3,"th",38),c.YNc(128,Tt,2,1,"td",30),c.BQk(),c.ynx(129,39),c.YNc(130,wt,3,3,"th",29),c.YNc(131,bt,2,1,"td",30),c.BQk(),c.ynx(132,40),c.YNc(133,Ot,1,0,"th",38),c.YNc(134,kt,2,1,"td",30),c.BQk(),c.YNc(135,St,1,0,"tr",41),c.YNc(136,Jt,1,0,"tr",42),c.qZA(),c.qZA(),c._UZ(137,"mat-paginator",43,44),c.qZA(),c.qZA()),2&t&&(c.xp6(1),c.s9C("title",c.lcZ(2,31,"admin.recommandation.list.Recommandations")),c.xp6(4),c.Q6J("ngIf",!e.session.isPointFocal&&!e.session.isSuperViseur&&!e.session.isPublic),c.xp6(2),c.Q6J("disabled",0===e.dataSource.length),c.xp6(12),c.Oqu(c.lcZ(20,33,"admin.recommandation.list.Recherche")),c.xp6(4),c.Q6J("formGroup",e.myForm),c.xp6(4),c.Oqu(c.lcZ(28,35,"admin.recommandation.list.nom")),c.xp6(6),c.Oqu(c.lcZ(34,37,"admin.recommandation.list.Pays")),c.xp6(5),c.Q6J("ngForOf",c.lcZ(39,39,e.pays)),c.xp6(2),c.Q6J("ngIf",!e.session.isPublic),c.xp6(4),c.Oqu(c.lcZ(45,41,"admin.recommandation.list.mecanisme")),c.xp6(5),c.Q6J("ngForOf",c.lcZ(50,43,e.mecanismes)),c.xp6(2),c.Q6J("ngIf",e.cycleActive),c.xp6(1),c.Q6J("ngIf",e.visiteActive),c.xp6(1),c.Q6J("ngIf",e.organeActive),c.xp6(3),c.Oqu(c.lcZ(57,45,"admin.recommandation.list.Etatdemisenoeuvre")),c.xp6(3),c.Q6J("ngForOf",c.lcZ(60,47,e.etats)),c.xp6(5),c.Oqu(c.lcZ(65,49,"admin.recommandation.list.Axe")),c.xp6(5),c.Q6J("ngForOf",c.lcZ(70,51,e.axes)),c.xp6(4),c.Oqu(c.lcZ(74,53,"admin.recommandation.list.Sousaxe")),c.xp6(5),c.Q6J("ngForOf",e.sousAxes),c.xp6(3),c.Oqu(c.lcZ(82,55,"admin.recommandation.list.DEPARTEMENT")),c.xp6(5),c.Q6J("ngForOf",c.lcZ(87,57,e.organismes)),c.xp6(3),c.Q6J("disabled",e.isAllEmpty),c.xp6(3),c.hij(" ",c.lcZ(93,59,"admin.recommandation.list.Rechercher")," "),c.xp6(6),c.hij(" ",c.lcZ(99,61,"admin.recommandation.list.R\xe9initialiser")," "),c.xp6(3),c.Q6J("ngIf",e.isLoadingResults),c.xp6(2),c.Q6J("dataSource",e.dataSource),c.xp6(32),c.Q6J("matHeaderRowDef",e.displayedColumns),c.xp6(1),c.Q6J("matRowDefColumns",e.displayedColumns),c.xp6(1),c.Q6J("length",e.resultsLength)("pageSizeOptions",c.VKq(63,Yt,e.resultsLength)))},directives:[k.r,d.O5,g.lW,S.Hw,J.pp,J.ib,J.yz,J.yK,J.u4,u.d,v._Y,v.JL,v.sg,Y.KE,Y.hX,D.Nt,v.Fj,v.JJ,v.u,v.Q7,L.gD,Q.ey,d.sg,F.BZ,x.YE,F.w1,F.fO,F.Dz,F.as,F.nj,A.NW,C.rH,P.$g,F.ge,x.nU,F.ev,R.gM,F.XQ,F.Gk],pipes:[I.X$,d.Ov],styles:["section[_ngcontent-%COMP%]{display:flex!important;justify-content:space-between!important;align-items:center!important}  h3{margin:0!important}.host[_ngcontent-%COMP%]{margin:1em!important}.inputs2[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(25vw,1fr));grid-column-gap:6px;grid-row-gap:6px;align-items:center}form[_ngcontent-%COMP%]{padding:20px}.expension[_ngcontent-%COMP%]{margin:20px 0}.right[_ngcontent-%COMP%]{margin:0 20px 20px}mat-panel-title[_ngcontent-%COMP%]{display:flex;align-items:center}mat-panel-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 0 10px}mat-panel-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-top:5px}"]}),e}(),Lt=function t(){i(this,t),this.idAxe=0,this.idSousAxe=0,this.idOrganisme=0,this.mecanisme="",this.idCycle=0,this.idOrgane=0,this.idVisite=0,this.nom="",this.etat="",this.idPays=0,this.startIndex=0,this.pageSize=10,this.sortBy="id",this.sortDir="desc",this.annee=0}}}])}();