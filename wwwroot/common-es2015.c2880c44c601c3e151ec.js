(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"5nPQ":function(e,t,i){"use strict";i.d(t,"a",function(){return f});var s=i("mrSG"),n=i("XNiG"),o=i("fXoL"),r=i("WTxg"),c=i("bTqV"),a=i("NFeN"),l=i("ofXK");function d(e,t){if(1&e){const e=o.Ub();o.Tb(0,"p",7),o.Ob(1,"img",8),o.Cc(2),o.Tb(3,"button",9),o.ac("click",function(){o.sc(e);const i=t.$implicit;return o.ec().remove(i)}),o.Tb(4,"mat-icon",10),o.Cc(5,"delete_sweep"),o.Sb(),o.Sb(),o.Sb()}if(2&e){const e=t.$implicit,i=o.ec();o.Bb(1),o.kc("src",i.setIcon(e),o.uc),o.Bb(1),o.Ec(" - ",e.substring(14)," "),o.Bb(1),o.kc("disabled",i.disabled)}}let f=(()=>{class e{constructor(e){this.filesService=e,this.listOfNames=[],this.listToDelete=[],this.files=[],this.nameBtn="",this.disabled=!1,this.folderToSaveInServer="folder",this.propertyOfParent=new n.a,this.eventSubmitToParent=new n.a,this.eventSubmitFromParent=new n.a}ngOnInit(){this.propertyOfParent.subscribe(e=>{if(!e)return;const t=e.split(";");t.pop(),this.listOfNames=t,this.listToDelete=[]}),this.eventSubmitFromParent.subscribe(e=>Object(s.a)(this,void 0,void 0,function*(){yield this.submit()}))}upload(e){for(let t=0;t<e.length;t++){const i=e.item(t);this.listOfNames.push(this.setFileName(i)),this.sendPropertyOfParent(),this.files.push(i)}}setIcon(e){const t=e.lastIndexOf("."),i=e.substring(t+1);return"pdf"===i||"pdf;"===i?"assets/svg/pdf.svg":"assets/svg/word.svg"}remove(e){const t=this.listOfNames.findIndex(t=>t===e);-1!==t&&(this.listOfNames.splice(t,1),this.sendPropertyOfParent()),this.listToDelete.push(e);const i=e.indexOf("_"),s=e.substring(i);-1!==this.files.findIndex(e=>e.name===s)&&this.files.splice(t,1)}openInput(e){e.click()}sendPropertyOfParent(){let e="";this.listOfNames.forEach(t=>{e+=t+";"}),this.eventSubmitToParent.next(e)}submit(){return Object(s.a)(this,void 0,void 0,function*(){const e=new FormData;this.files.forEach(t=>{const i=this.setFileName(t);e.append(i,t,i)}),e&&(yield this.filesService.uploadFiles(e,this.folderToSaveInServer).toPromise(),yield this.filesService.deleteFiles(this.listToDelete,this.folderToSaveInServer).toPromise())})}setFileName(e){return`${e.lastModified}_${e.name}`}}return e.\u0275fac=function(t){return new(t||e)(o.Nb(r.a))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-upload"]],inputs:{nameBtn:"nameBtn",disabled:"disabled",folderToSaveInServer:"folderToSaveInServer",propertyOfParent:"propertyOfParent",eventSubmitToParent:"eventSubmitToParent",eventSubmitFromParent:"eventSubmitFromParent"},decls:12,vars:3,consts:[[1,"row"],[1,"col-md-12","mb-3"],[1,"myrow"],["hidden","","accept","application/pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document","type","file","multiple","false",2,"display","none",3,"change"],["file1",""],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["style","font-size: .7em;margin: 0;",4,"ngFor","ngForOf"],[2,"font-size",".7em","margin","0"],["alt","pdf/word",3,"src"],["mat-icon-button","","color","warn","type","button",3,"disabled","click"],[2,"font-size","1.3em !important"]],template:function(e,t){if(1&e){const e=o.Ub();o.Tb(0,"div",0),o.Tb(1,"div",1),o.Tb(2,"div",2),o.Tb(3,"input",3,4),o.ac("change",function(){o.sc(e);const i=o.qc(4);return t.upload(i.files)}),o.Sb(),o.Tb(5,"button",5),o.ac("click",function(){o.sc(e);const i=o.qc(4);return t.openInput(i)}),o.Tb(6,"mat-icon"),o.Cc(7,"add"),o.Sb(),o.Cc(8),o.Sb(),o.Cc(9," \xa0\xa0 "),o.Tb(10,"div",2),o.Bc(11,d,6,3,"p",6),o.Sb(),o.Sb(),o.Sb(),o.Sb()}2&e&&(o.Bb(5),o.kc("disabled",t.disabled),o.Bb(3),o.Ec(" ",t.nameBtn," "),o.Bb(3),o.kc("ngForOf",t.listOfNames))},directives:[c.a,a.a,l.l],styles:["img[_ngcontent-%COMP%]{height:20px}"]}),e})()},xjdI:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var s=i("fXoL"),n=i("M0ag"),o=i("tyNb");let r=(()=>{class e{constructor(e,t){this.session=e,this.router=t}canActivate(e,t){return console.log(t),!(t.url.includes("update")&&!this.session.isAdmin&&!this.session.isProprietaire&&(this.router.navigate(["/admin"]),1))}}return e.\u0275fac=function(t){return new(t||e)(s.Xb(n.a),s.Xb(o.e))},e.\u0275prov=s.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);