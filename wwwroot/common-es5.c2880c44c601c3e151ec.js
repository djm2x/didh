!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"5nPQ":function(t,i,r){"use strict";r.d(i,"a",function(){return p});var s=r("mrSG"),o=r("XNiG"),a=r("fXoL"),c=r("WTxg"),u=r("bTqV"),f=r("NFeN"),l=r("ofXK");function d(e,t){if(1&e){var n=a.Ub();a.Tb(0,"p",7),a.Ob(1,"img",8),a.Cc(2),a.Tb(3,"button",9),a.ac("click",function(){a.sc(n);var e=t.$implicit;return a.ec().remove(e)}),a.Tb(4,"mat-icon",10),a.Cc(5,"delete_sweep"),a.Sb(),a.Sb(),a.Sb()}if(2&e){var i=t.$implicit,r=a.ec();a.Bb(1),a.kc("src",r.setIcon(i),a.uc),a.Bb(1),a.Ec(" - ",i.substring(14)," "),a.Bb(1),a.kc("disabled",r.disabled)}}var p=function(){var t=function(){function t(n){e(this,t),this.filesService=n,this.listOfNames=[],this.listToDelete=[],this.files=[],this.nameBtn="",this.disabled=!1,this.folderToSaveInServer="folder",this.propertyOfParent=new o.a,this.eventSubmitToParent=new o.a,this.eventSubmitFromParent=new o.a}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.propertyOfParent.subscribe(function(t){if(t){var n=t.split(";");n.pop(),e.listOfNames=n,e.listToDelete=[]}}),this.eventSubmitFromParent.subscribe(function(t){return Object(s.a)(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.submit();case 2:case"end":return e.stop()}},e,this)}))})}},{key:"upload",value:function(e){for(var t=0;t<e.length;t++){var n=e.item(t);this.listOfNames.push(this.setFileName(n)),this.sendPropertyOfParent(),this.files.push(n)}}},{key:"setIcon",value:function(e){var t=e.lastIndexOf("."),n=e.substring(t+1);return"pdf"===n||"pdf;"===n?"assets/svg/pdf.svg":"assets/svg/word.svg"}},{key:"remove",value:function(e){var t=this.listOfNames.findIndex(function(t){return t===e});-1!==t&&(this.listOfNames.splice(t,1),this.sendPropertyOfParent()),this.listToDelete.push(e);var n=e.indexOf("_"),i=e.substring(n);-1!==this.files.findIndex(function(e){return e.name===i})&&this.files.splice(t,1)}},{key:"openInput",value:function(e){e.click()}},{key:"sendPropertyOfParent",value:function(){var e="";this.listOfNames.forEach(function(t){e+=t+";"}),this.eventSubmitToParent.next(e)}},{key:"submit",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new FormData,this.files.forEach(function(e){var i=n.setFileName(e);t.append(i,e,i)}),e.t0=t,!e.t0){e.next=8;break}return e.next=6,this.filesService.uploadFiles(t,this.folderToSaveInServer).toPromise();case 6:return e.next=8,this.filesService.deleteFiles(this.listToDelete,this.folderToSaveInServer).toPromise();case 8:case"end":return e.stop()}},e,this)}))}},{key:"setFileName",value:function(e){return"".concat(e.lastModified,"_").concat(e.name)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Nb(c.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-upload"]],inputs:{nameBtn:"nameBtn",disabled:"disabled",folderToSaveInServer:"folderToSaveInServer",propertyOfParent:"propertyOfParent",eventSubmitToParent:"eventSubmitToParent",eventSubmitFromParent:"eventSubmitFromParent"},decls:12,vars:3,consts:[[1,"row"],[1,"col-md-12","mb-3"],[1,"myrow"],["hidden","","accept","application/pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document","type","file","multiple","false",2,"display","none",3,"change"],["file1",""],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["style","font-size: .7em;margin: 0;",4,"ngFor","ngForOf"],[2,"font-size",".7em","margin","0"],["alt","pdf/word",3,"src"],["mat-icon-button","","color","warn","type","button",3,"disabled","click"],[2,"font-size","1.3em !important"]],template:function(e,t){if(1&e){var n=a.Ub();a.Tb(0,"div",0),a.Tb(1,"div",1),a.Tb(2,"div",2),a.Tb(3,"input",3,4),a.ac("change",function(){a.sc(n);var e=a.qc(4);return t.upload(e.files)}),a.Sb(),a.Tb(5,"button",5),a.ac("click",function(){a.sc(n);var e=a.qc(4);return t.openInput(e)}),a.Tb(6,"mat-icon"),a.Cc(7,"add"),a.Sb(),a.Cc(8),a.Sb(),a.Cc(9," \xa0\xa0 "),a.Tb(10,"div",2),a.Bc(11,d,6,3,"p",6),a.Sb(),a.Sb(),a.Sb(),a.Sb()}2&e&&(a.Bb(5),a.kc("disabled",t.disabled),a.Bb(3),a.Ec(" ",t.nameBtn," "),a.Bb(3),a.kc("ngForOf",t.listOfNames))},directives:[u.a,f.a,l.l],styles:["img[_ngcontent-%COMP%]{height:20px}"]}),t}()},xjdI:function(t,i,r){"use strict";r.d(i,"a",function(){return c});var s=r("fXoL"),o=r("M0ag"),a=r("tyNb"),c=function(){var t=function(){function t(n,i){e(this,t),this.session=n,this.router=i}return n(t,[{key:"canActivate",value:function(e,t){return console.log(t),!(t.url.includes("update")&&!this.session.isAdmin&&!this.session.isProprietaire&&(this.router.navigate(["/admin"]),1))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s.Xb(o.a),s.Xb(a.e))},t.\u0275prov=s.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();