(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[475],{46475:function(t,e,i){"use strict";i.d(e,{n:function(){return Jt},H:function(){return St}});var n=i(64762),o=i(92935),a=i(35366),s=i(37112),l=i(36278),m=i(61116),c=i(84369);function r(t,e){if(1&t&&(a.TgZ(0,"li"),a._uU(1),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.hij("Cylce: ",t.o.cycle.label,"")}}function u(t,e){if(1&t&&(a.TgZ(0,"li"),a._uU(1),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.hij("Visite: ",t.o.visite.mandat,"")}}function d(t,e){if(1&t&&(a.TgZ(0,"li"),a._uU(1),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.hij("Organe de trait\xe9: ",t.o.organe.label,"")}}let g=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.title=""}ngOnInit(){this.o=this.data.model,this.title=this.data.title}onNoClick(){this.dialogRef.close()}onOkClick(t){}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(o.so),a.Y36(o.WI))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-update"]],decls:23,vars:8,consts:[[1,"dialog"],["mat-dialog-title",""],["role","toolbar",1,"task-header"],[1,"content"],["mat-dialog-content",""],[4,"ngIf"],["mat-dialog-actions","",1,"actions"],["mat-button","","type","button",3,"click"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"h1",1),a.TgZ(2,"mat-toolbar",2),a.TgZ(3,"span"),a._uU(4),a.qZA(),a.qZA(),a._UZ(5,"mat-divider"),a.qZA(),a.TgZ(6,"div",3),a.TgZ(7,"div",4),a.TgZ(8,"ul"),a.TgZ(9,"li"),a._uU(10),a.qZA(),a.TgZ(11,"li"),a._uU(12),a.qZA(),a.TgZ(13,"li"),a._uU(14),a.qZA(),a.TgZ(15,"li"),a._uU(16),a.qZA(),a.YNc(17,r,2,1,"li",5),a.YNc(18,u,2,1,"li",5),a.YNc(19,d,2,1,"li",5),a.qZA(),a.qZA(),a.TgZ(20,"div",6),a.TgZ(21,"button",7),a.NdJ("click",function(){return e.onNoClick()}),a._uU(22,"Retour"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(4),a.Oqu(e.o.nom),a.xp6(6),a.Oqu(e.o.etat),a.xp6(2),a.Oqu(e.o.mecanisme),a.xp6(2),a.hij("Axe: ",e.o.axes,""),a.xp6(2),a.hij("Sous axe: ",e.o.sousAxes,""),a.xp6(1),a.Q6J("ngIf",e.o.cycle),a.xp6(1),a.Q6J("ngIf",e.o.visite),a.xp6(1),a.Q6J("ngIf",e.o.organe))},directives:[o.uh,s.Ye,l.d,o.xY,m.O5,o.H8,c.lW],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.dialog[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:hidden}.dialog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 5px}.dialog[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 20px 25px}.dialog[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse}.myrow[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),t})();var p=i(5609),h=i(59241),f=i(31906),Z=i(31041),A=i(44689),x=i(12996),q=i(92572),y=i(94589),T=i(31496),w=i(50545),O=i(63337),_=i(34411),v=i(84222),b=i(20707),C=i(77307),U=i(6489),N=i(13070),J=i(9550),S=i(13841),Y=i(87064),D=i(47340),L=i(87672),Q=i(24311),F=i(60649);const P=["mytable"],R=function(){return["/admin/recommendation/update",0]};function k(t,e){1&t&&(a.TgZ(0,"button",45),a.TgZ(1,"mat-icon"),a._uU(2,"add"),a.qZA(),a._uU(3),a.ALo(4,"translate"),a.qZA()),2&t&&(a.Q6J("routerLink",a.DdM(4,R)),a.xp6(3),a.hij(" ",a.lcZ(4,2,"admin.recommandation.list.Recommandation")," "))}function I(t,e){if(1&t&&(a.TgZ(0,"mat-option",46),a._uU(1),a.qZA()),2&t){const t=e.$implicit,i=a.oxw();a.Q6J("value",t.id),a.xp6(1),a.Oqu("fr"===i.mytranslate.langSync?t.nom:t.nomAr)}}function M(t,e){if(1&t&&(a.TgZ(0,"mat-option",46),a._uU(1),a.qZA()),2&t){const t=e.$implicit,i=a.oxw(2);a.Q6J("value",t.annee),a.xp6(1),a.Oqu("fr"===i.mytranslate.langSync?t.anneeDisplay:t.anneeDisplayAr)}}function $(t,e){if(1&t&&(a.TgZ(0,"mat-form-field",10),a.TgZ(1,"mat-label"),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.TgZ(4,"mat-select",47),a.TgZ(5,"mat-option",13),a._uU(6,"..."),a.qZA(),a.YNc(7,M,2,2,"mat-option",14),a.qZA(),a.qZA()),2&t){const t=a.oxw();a.xp6(2),a.Oqu(a.lcZ(3,2,"admin.questionnaire.list.ann\xe9e")),a.xp6(5),a.Q6J("ngForOf",t.annees)}}function E(t,e){if(1&t&&(a.TgZ(0,"mat-option",46),a._uU(1),a.qZA()),2&t){const t=e.$implicit,i=a.oxw();a.Q6J("value",t.name),a.xp6(1),a.Oqu("fr"===i.mytranslate.langSync?t.name:t.nameAr)}}function V(t,e){if(1&t&&(a.TgZ(0,"mat-option",46),a._uU(1),a.qZA()),2&t){const t=e.$implicit,i=a.oxw(2);a.Q6J("value",t.id),a.xp6(1),a.Oqu("fr"===i.mytranslate.langSync?t.label:t.labelAr)}}function B(t,e){if(1&t&&(a.TgZ(0,"mat-form-field",10),a.TgZ(1,"mat-label"),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.TgZ(4,"mat-select",48),a.TgZ(5,"mat-option",13),a._uU(6,"..."),a.qZA(),a.YNc(7,V,2,2,"mat-option",14),a.ALo(8,"async"),a.qZA(),a.qZA()),2&t){const t=a.oxw();a.xp6(2),a.Oqu(a.lcZ(3,2,"admin.recommandation.list.Cycle")),a.xp6(5),a.Q6J("ngForOf",a.lcZ(8,4,t.cycles))}}function j(t,e){if(1&t&&(a.TgZ(0,"mat-option",46),a._uU(1),a.qZA()),2&t){const t=e.$implicit,i=a.oxw(2);a.Q6J("value",t.id),a.xp6(1),a.Oqu("fr"===i.mytranslate.langSync?t.mandat:t.mandatAr)}}function z(t,e){if(1&t&&(a.TgZ(0,"mat-form-field",10),a.TgZ(1,"mat-label"),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.TgZ(4,"mat-select",49),a.TgZ(5,"mat-option",13),a._uU(6,"..."),a.qZA(),a.YNc(7,j,2,2,"mat-option",14),a.ALo(8,"async"),a.qZA(),a.qZA()),2&t){const t=a.oxw();a.xp6(2),a.Oqu(a.lcZ(3,2,"admin.recommandation.list.Visite")),a.xp6(5),a.Q6J("ngForOf",a.lcZ(8,4,t.visites))}}function G(t,e){if(1&t&&(a.TgZ(0,"mat-option",46),a._uU(1),a.qZA()),2&t){const t=e.$implicit,i=a.oxw(2);a.Q6J("value",t.id),a.xp6(1),a.Oqu("fr"===i.mytranslate.langSync?t.label:t.labelAr)}}function H(t,e){if(1&t&&(a.TgZ(0,"mat-form-field",10),a.TgZ(1,"mat-label"),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.TgZ(4,"mat-select",50),a.TgZ(5,"mat-option",13),a._uU(6,"..."),a.qZA(),a.YNc(7,G,2,2,"mat-option",14),a.ALo(8,"async"),a.qZA(),a.qZA()),2&t){const t=a.oxw();a.xp6(2),a.Oqu(a.lcZ(3,2,"admin.recommandation.list.Organe")),a.xp6(5),a.Q6J("ngForOf",a.lcZ(8,4,t.organes))}}function W(t,e){if(1&t&&(a.TgZ(0,"mat-option",46),a._uU(1),a.qZA()),2&t){const t=e.$implicit,i=a.oxw();a.Q6J("value",t.name),a.xp6(1),a.Oqu("fr"===i.mytranslate.langSync?t.name:t.nameAr)}}function X(t,e){if(1&t&&(a.TgZ(0,"mat-option",46),a._uU(1),a.qZA()),2&t){const t=e.$implicit,i=a.oxw();a.Q6J("value",t.id),a.xp6(1),a.Oqu("fr"===i.mytranslate.langSync?t.label:t.labelAr)}}function K(t,e){if(1&t&&(a.TgZ(0,"mat-option",46),a._uU(1),a.qZA()),2&t){const t=e.$implicit,i=a.oxw();a.Q6J("value",t.id),a.xp6(1),a.Oqu("fr"===i.mytranslate.langSync?t.label:t.labelAr)}}function tt(t,e){if(1&t&&(a.TgZ(0,"mat-option",46),a._uU(1),a.qZA()),2&t){const t=e.$implicit,i=a.oxw();a.Q6J("value",t.id),a.xp6(1),a.hij(" ","fr"===i.mytranslate.langSync?t.label:t.labelAr,"")}}function et(t,e){1&t&&a._UZ(0,"mat-spinner")}function it(t,e){if(1&t&&(a.TgZ(0,"div",51),a.YNc(1,et,1,0,"mat-spinner",52),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.Q6J("ngIf",t.isLoadingResults)}}function nt(t,e){1&t&&(a.TgZ(0,"th",53),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&t&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"admin.recommandation.list.code")))}function ot(t,e){if(1&t&&(a.TgZ(0,"td",54),a._uU(1),a.qZA()),2&t){const t=e.$implicit,i=a.oxw();a.xp6(1),a.hij(" ","fr"===i.mytranslate.langSync?t.codeRecommendation:i.displayFrIfArNull(t.codeRecommendation,t.codeRecommendationAr)," ")}}function at(t,e){1&t&&(a.TgZ(0,"th",53),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&t&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"admin.recommandation.list.nom")))}function st(t,e){if(1&t&&(a.TgZ(0,"td",54),a._uU(1),a.qZA()),2&t){const t=e.$implicit,i=a.oxw();a.xp6(1),a.Oqu("fr"===i.mytranslate.langSync?t.nom:i.displayFrIfArNull(t.nom,t.nomAr))}}function lt(t,e){1&t&&(a.TgZ(0,"th",53),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&t&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"admin.recommandation.list.mecanisme")))}function mt(t,e){if(1&t&&(a.TgZ(0,"td",54),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.lnq(" ",t.organe," ",t.cycle," ",t.visite," ")}}function ct(t,e){1&t&&(a.TgZ(0,"th",53),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&t&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"admin.recommandation.list.Axe")))}function rt(t,e){if(1&t&&(a.TgZ(0,"td",54),a._uU(1),a.qZA()),2&t){const t=e.$implicit,i=a.oxw();a.xp6(1),a.Oqu(t[i.columnDefs[3].columnDef])}}function ut(t,e){1&t&&(a.TgZ(0,"th",53),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&t&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"admin.recommandation.list.Sousaxe")))}function dt(t,e){if(1&t&&(a.TgZ(0,"td",54),a._uU(1),a.qZA()),2&t){const t=e.$implicit,i=a.oxw();a.xp6(1),a.Oqu(t[i.columnDefs[4].columnDef])}}function gt(t,e){1&t&&(a.TgZ(0,"th",53),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&t&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"admin.recommandation.list.DEPARTEMENT")))}function pt(t,e){if(1&t&&(a.TgZ(0,"td",54),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Oqu(t.organismes)}}function ht(t,e){1&t&&(a.TgZ(0,"th",53),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&t&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"admin.recommandation.list.Etatdemisenoeuvre")))}function ft(t,e){if(1&t&&(a.TgZ(0,"td",54),a._uU(1),a.qZA()),2&t){const t=e.$implicit,i=a.oxw();a.xp6(1),a.Oqu(i.displayMulti(t.mecanisme,t.etat).e)}}function Zt(t,e){1&t&&(a.TgZ(0,"th",55),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&t&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"admin.recommandation.list.OBSERVATIONS")))}function At(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",57),a.NdJ("click",function(){a.CHM(t);const e=a.oxw().$implicit;return a.oxw().showPieceJoin(e.pieceJointe)}),a.TgZ(1,"mat-icon"),a._uU(2,"cloud_download"),a.qZA(),a.qZA()}if(2&t){const t=a.oxw().$implicit;a.Q6J("disabled",""===t.pieceJointe)("matTooltip",t.pieceJointe)}}function xt(t,e){if(1&t&&(a.TgZ(0,"td",54),a.YNc(1,At,3,2,"button",56),a.qZA()),2&t){const t=e.$implicit,i=a.oxw();a.xp6(1),a.Q6J("ngIf",i.showDownload(t.idsOrganisme))}}function qt(t,e){1&t&&(a.TgZ(0,"th",53),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&t&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"admin.recommandation.list.complement")))}function yt(t,e){if(1&t&&(a.TgZ(0,"td",54),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.Oqu(t.complement)}}function Tt(t,e){1&t&&a._UZ(0,"th",55)}const wt=function(t){return["/admin/recommendation/update",t]};function Ot(t,e){if(1&t&&(a.TgZ(0,"button",62),a.TgZ(1,"mat-icon"),a._uU(2,"create"),a.qZA(),a.qZA()),2&t){const t=a.oxw(2).$implicit;a.Q6J("routerLink",a.VKq(1,wt,t.id))}}function _t(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",63),a.NdJ("click",function(){a.CHM(t);const e=a.oxw(2).$implicit;return a.oxw().delete(e)}),a.TgZ(1,"mat-icon"),a._uU(2,"delete_sweep"),a.qZA(),a.qZA()}}function vt(t,e){if(1&t&&(a.TgZ(0,"div",59),a.YNc(1,Ot,3,3,"button",60),a.YNc(2,_t,3,0,"button",61),a.qZA()),2&t){const t=a.oxw(2);a.xp6(1),a.Q6J("ngIf",!t.session.isSuperViseur),a.xp6(1),a.Q6J("ngIf",!t.session.isPointFocal&&!t.session.isSuperViseur)}}function bt(t,e){if(1&t&&(a.TgZ(0,"td",54),a.YNc(1,vt,3,2,"div",58),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.Q6J("ngIf",!t.session.isPublic)}}function Ct(t,e){1&t&&a._UZ(0,"tr",64)}function Ut(t,e){1&t&&a._UZ(0,"tr",65)}const Nt=function(t){return[10,25,50,100,250,t]};let Jt=(()=>{class t{constructor(t,e,i,n,o,s,l,m,c){this.uow=t,this.dialog=e,this.mydialog=i,this.mytranslate=n,this.fb=o,this.session=s,this.route=l,this.bottomSheet=m,this.excel=c,this.update=new a.vpe,this.isLoadingResults=!0,this.resultsLength=0,this.isRateLimitReached=!1,this.dataSource=[],this.columnDefs=[{columnDef:"codeRecommendation",show:!0},{columnDef:"nom",show:!0},{columnDef:"mecanisme",show:!0},{columnDef:"axe",show:!0},{columnDef:"sousAxe",show:!0},{columnDef:"organismes",show:!1},{columnDef:"etat",show:!1},{columnDef:"complement",show:!1},{columnDef:"option",show:!0}],this.displayedColumns=["codeRecommendation","nom","mecanisme","axe","sousAxe","organismes","etat","complement","option"],this.panelOpenState=!1,this.organismes=this.uow.organismes.get(),this.axes=this.uow.axes.get(),this.sousAxes=[],this.annees=[],this.mecanismes=this.uow.mecanismes,this.visites=this.uow.visites.get(),this.organes=this.uow.organes.get(),this.pays=this.uow.pays.get(),this.cycles=this.uow.cycles.get(),this.etats=this.uow.etats,this.departementList=[],this.progress=0,this.formData=new FormData,this.o=new St,this.myAuto=new Z.NI(""),this.session.isPublic&&(this.columnDefs=this.columnDefs.filter(t=>t.show),this.displayedColumns=this.columnDefs.map(t=>t.columnDef))}ngOnInit(){this.createForm(),this.isLoadingResults=!1,this.uow.recommendations.annee().subscribe(t=>{this.annees=t}),this.o.idOrganisme=this.session.isPointFocal?this.session.user.idOrganisme:0,this.myForm.get("idOrganisme").setValue(this.o.idOrganisme),(0,f.T)(this.sort.sortChange,this.paginator.page,this.update).subscribe(t=>{!0===t?this.paginator.pageIndex=0:t=t,this.paginator.pageSize?t=t:this.paginator.pageSize=10,this.o.startIndex=this.paginator.pageIndex*this.paginator.pageSize,this.o.pageSize=this.paginator.pageSize,this.o.sortBy=this.sort.active?this.sort.active:"id",this.o.sortDir=this.sort.direction?this.sort.direction:"desc",this.isLoadingResults=!0,this.searchAndGet(this.o)}),this.route.queryParams.subscribe(t=>{const e=t.data;e&&this.uow.recommendations.getDetail(e).subscribe(t=>{this.openDialog(t)})}),this.autoComplete()}showDownload(t){return!t||!1===this.session.isPointFocal||t.includes(this.session.user.idOrganisme)}generateExcel(){const t=this.dataSource.map((t,e)=>{var i,n,o,a,s,l;return{[this.mytranslate.get("admin.recommandation.list.code")]:"fr"===this.mytranslate.langSync?t.codeRecommendation:t.codeRecommendationAr,[this.mytranslate.get("admin.recommandation.list.nom")]:"fr"===this.mytranslate.langSync?t.nom:t.nomAr,[this.mytranslate.get("admin.recommandation.list.mecanisme")]:`${null!==(i=t.organe)&&void 0!==i?i:""}${null!==(n=t.cycle)&&void 0!==n?n:""}${null!==(o=t.visite)&&void 0!==o?o:""}`,[this.mytranslate.get("admin.recommandation.list.Axe")]:null===(a=t.axe)||void 0===a?void 0:a.join("; "),[this.mytranslate.get("admin.recommandation.list.Sousaxe")]:null===(s=t.sousAxe)||void 0===s?void 0:s.join("; "),[this.mytranslate.get("admin.recommandation.list.DEPARTEMENT")]:null===(l=t.organismes)||void 0===l?void 0:l.join("; "),[this.mytranslate.get("admin.recommandation.list.Etatdemisenoeuvre")]:this.displayMulti(t.mecanisme,t.etat).e,[this.mytranslate.get("admin.recommandation.list.complement")]:t.complement}});this.excel.json_to_sheet(t)}displayFrIfArNull(t,e){return null==e||""===e||"null"===e?t:e}displayMulti(t,e){const i=[{fr:"Non R\xe9alis\xe9",ar:"\u063a\u064a\u0631 \u0645\u0646\u062c\u0632"},{fr:"En cours",ar:"\u0641\u064a \u0637\u0648\u0631 \u0627\u0644\u0625\u0646\u062c\u0627\u0632"},{fr:"Recommendation continue",ar:"\u062a\u0646\u0641\u064a\u0630 \u0645\u0633\u062a\u0645\u0631"},{fr:"R\xe9alis\xe9",ar:"\u0645\u0646\u062c\u0632"}];if("fr"===this.mytranslate.langSync)return{m:t,e};{const n=[{fr:"Examen p\xe9riodique universal",ar:"\u0627\u0644\u0627\u0633\u062a\u0639\u0631\u0627\u0636 \u0627\u0644\u062f\u0648\u0631\u064a \u0627\u0644\u0634\u0627\u0645\u0644"},{fr:"Organes de Trait\xe9s",ar:"\u0647\u064a\u0626\u0627\u062a \u0627\u0644\u0645\u0639\u0627\u0647\u062f\u0627\u062a"},{fr:"Proc\xe9dures sp\xe9ciales",ar:"\u0627\u0644\u0627\u062c\u0631\u0627\u0621\u0627\u062a \u0627\u0644\u062e\u0627\u0635\u0629"}].find(e=>t.toLowerCase().includes(e.fr.toLowerCase().substring(0,6))),o=i.find(t=>t.fr.toLowerCase()===e.toLowerCase());return{m:n?n.ar:t,e:o?o.ar:e}}}autoComplete(){this.filteredOptions=this.myAuto.valueChanges.pipe((0,A.w)(t=>t.length>1?this.uow.organismes.autocompletePost("label",t):[]))}selected(t){const e=t.option.value;this.myAuto.setValue(e.label),this.myForm.get("idOrganisme").setValue(e.id)}createForm(){this.myForm=this.fb.group({idOrganisme:this.o.idOrganisme,mecanisme:this.o.mecanisme,idCycle:this.o.idCycle,idOrgane:this.o.idOrgane,idVisite:this.o.idVisite,idAxe:this.o.idAxe,nom:this.o.nom,etat:this.o.etat,idPays:this.o.idPays,idSousAxe:this.o.idSousAxe,annee:this.o.annee,startIndex:this.o.startIndex,pageSize:this.o.pageSize,sortBy:this.o.sortBy,sortDir:this.o.sortDir})}get mecanisme(){return this.myForm.get("mecanisme")}get idVisite(){return this.myForm.get("idVisite")}get idCycle(){return this.myForm.get("idCycle")}get idOrgane(){return this.myForm.get("idOrgane")}get cycleActive(){return"Examen p\xe9riodique universal"===this.mecanisme.value}get visiteActive(){return"Proc\xe9dure sp\xe9ciale"===this.mecanisme.value}get organeActive(){return"Organes de trait\xe9s"===this.mecanisme.value}selectChange(t){this.idVisite.setValue(0),this.idCycle.setValue(0),this.idOrgane.setValue(0)}reset(){this.o=new St,this.createForm(),this.searchAndGet(this.o)}search(t){this.searchAndGet(t)}detail(t){this.uow.recommendations.getDetail(t.id).subscribe(t=>{this.openDialog(t)})}openDialog(t){return this.dialog.open(g,{width:"7100px",disableClose:!0,data:{model:t,title:"Recommdandation"}}).afterClosed()}searchAndGet(t){this.o=t,this.uow.recommendations.searchAndGet(this.o).subscribe(t=>{this.dataSource=t.list,this.resultsLength=t.count,this.isLoadingResults=!1},t=>this.isLoadingResults=!1)}delete(t){return(0,n.mG)(this,void 0,void 0,function*(){if("ok"===(yield this.mydialog.openDialog("recommandation").toPromise())){let e=[];""!==t.pieceJointe?e.push(...this.uow.decoupe(t.pieceJointe)):e=e,this.uow.files.deleteFiles(e,"recommandation").subscribe(e=>{this.uow.recommendations.delete(t.id).subscribe(()=>this.update.next(!0))})}})}showPieceJoin(t){this.bottomSheet.open(x.x,{data:{fileName:t,folder:"recommandation"}})}axeChange(t){this.uow.sousAxes.getByIdAxe(t).subscribe(t=>{this.sousAxes=t})}get isAllEmpty(){var t;return"0"===this.myForm.get("idAxe").value.toString()&&"0"===this.myForm.get("idCycle").value.toString()&&"0"===this.myForm.get("idSousAxe").value.toString()&&"0"===this.myForm.get("idOrganisme").value.toString()&&"0"===this.myForm.get("idOrgane").value.toString()&&"0"===this.myForm.get("idPays").value.toString()&&""===this.myForm.get("nom").value.toString()&&""===this.myForm.get("etat").value.toString()&&"0"===this.myForm.get("idVisite").value.toString()&&""===(null===(t=this.myForm.get("annee").value)||void 0===t?void 0:t.toString())&&""===this.myForm.get("mecanisme").value.toString()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(q.Z),a.Y36(o.uw),a.Y36(y.b),a.Y36(T.n),a.Y36(Z.qu),a.Y36(w.m),a.Y36(O.gz),a.Y36(_.ch),a.Y36(v.x))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-list"]],viewQuery:function(t,e){if(1&t&&(a.Gf(p.NW,7),a.Gf(h.YE,7),a.Gf(P,7)),2&t){let t;a.iGM(t=a.CRH())&&(e.paginator=t.first),a.iGM(t=a.CRH())&&(e.sort=t.first),a.iGM(t=a.CRH())&&(e.table=t.first)}},decls:139,vars:65,consts:[[1,"host"],[3,"title"],[1,"right"],[1,"d-flex","flex-row-reverse","pt-3","mb-3"],["mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],["mat-raised-button","","color","warn",3,"disabled","click"],[1,"expension"],["expanded","",3,"opened","closed"],[3,"formGroup"],[1,"inputs2"],["appearance","fill"],["matInput","","formControlName","nom","required",""],["formControlName","idPays"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill",4,"ngIf"],["formControlName","mecanisme",3,"selectionChange"],["formControlName","etat"],["formControlName","idAxe",3,"selectionChange"],["formControlName","idSousAxe"],["formControlName","idOrganisme"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","",3,"click"],[1,"example-container","mat-elevation-z8"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container"],["mat-table","","multiTemplateDataRows","","aria-label","Elements","matSort","",3,"dataSource"],["mytable",""],["matColumnDef","codeRecommendation"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nom"],["matColumnDef","mecanisme"],["matColumnDef","axe"],["matColumnDef","sousAxe"],["matColumnDef","organismes"],["matColumnDef","etat"],["matColumnDef","pieceJointe"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","complement"],["matColumnDef","option",2,"flex-direction","row-reverse"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageIndex","0","pageSize","10","showFirstLastButtons","",3,"length","pageSizeOptions"],["paginator",""],["mat-raised-button","","color","primary",3,"routerLink"],[3,"value"],["formControlName","annee"],["formControlName","idCycle"],["formControlName","idVisite"],["formControlName","idOrgane"],[1,"example-loading-shade"],[4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","","color","accent",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","","color","accent",3,"disabled","matTooltip","click"],["class","button-row",4,"ngIf"],[1,"button-row"],["mat-icon-button","","color","primary",3,"routerLink",4,"ngIf"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"routerLink"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a._UZ(1,"app-title",1),a.ALo(2,"translate"),a.TgZ(3,"div",2),a.TgZ(4,"div",3),a.YNc(5,k,5,5,"button",4),a._uU(6," \xa0 "),a.TgZ(7,"button",5),a.NdJ("click",function(){return e.generateExcel()}),a.TgZ(8,"mat-icon"),a._uU(9,"cloud_download"),a.qZA(),a._uU(10," Excel "),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"div",6),a.TgZ(12,"mat-accordion"),a.TgZ(13,"mat-expansion-panel",7),a.NdJ("opened",function(){return e.panelOpenState=!0})("closed",function(){return e.panelOpenState=!1}),a.TgZ(14,"mat-expansion-panel-header"),a.TgZ(15,"mat-panel-title"),a.TgZ(16,"mat-icon"),a._uU(17,"search"),a.qZA(),a.TgZ(18,"p"),a._uU(19),a.ALo(20,"translate"),a.qZA(),a.qZA(),a._UZ(21,"mat-panel-description"),a.qZA(),a._UZ(22,"mat-divider"),a.TgZ(23,"form",8),a.TgZ(24,"div",9),a.TgZ(25,"mat-form-field",10),a.TgZ(26,"mat-label"),a._uU(27),a.ALo(28,"translate"),a.qZA(),a._UZ(29,"input",11),a.qZA(),a.qZA(),a.TgZ(30,"div",9),a.TgZ(31,"mat-form-field",10),a.TgZ(32,"mat-label"),a._uU(33),a.ALo(34,"translate"),a.qZA(),a.TgZ(35,"mat-select",12),a.TgZ(36,"mat-option",13),a._uU(37,"..."),a.qZA(),a.YNc(38,I,2,2,"mat-option",14),a.ALo(39,"async"),a.qZA(),a.qZA(),a.YNc(40,$,8,4,"mat-form-field",15),a.qZA(),a.TgZ(41,"div",9),a.TgZ(42,"mat-form-field",10),a.TgZ(43,"mat-label"),a._uU(44),a.ALo(45,"translate"),a.qZA(),a.TgZ(46,"mat-select",16),a.NdJ("selectionChange",function(t){return e.selectChange(t.value)}),a.TgZ(47,"mat-option",13),a._uU(48,"..."),a.qZA(),a.YNc(49,E,2,2,"mat-option",14),a.ALo(50,"async"),a.qZA(),a.qZA(),a.YNc(51,B,9,6,"mat-form-field",15),a.YNc(52,z,9,6,"mat-form-field",15),a.YNc(53,H,9,6,"mat-form-field",15),a.TgZ(54,"mat-form-field",10),a.TgZ(55,"mat-label"),a._uU(56),a.ALo(57,"translate"),a.qZA(),a.TgZ(58,"mat-select",17),a.YNc(59,W,2,2,"mat-option",14),a.ALo(60,"async"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(61,"div",9),a.TgZ(62,"mat-form-field",10),a.TgZ(63,"mat-label"),a._uU(64),a.ALo(65,"translate"),a.qZA(),a.TgZ(66,"mat-select",18),a.NdJ("selectionChange",function(t){return e.axeChange(t.value)}),a.TgZ(67,"mat-option",13),a._uU(68,"..."),a.qZA(),a.YNc(69,X,2,2,"mat-option",14),a.ALo(70,"async"),a.qZA(),a.qZA(),a.TgZ(71,"mat-form-field",10),a.TgZ(72,"mat-label"),a._uU(73),a.ALo(74,"translate"),a.qZA(),a.TgZ(75,"mat-select",19),a.TgZ(76,"mat-option",13),a._uU(77,"..."),a.qZA(),a.YNc(78,K,2,2,"mat-option",14),a.qZA(),a.qZA(),a.TgZ(79,"mat-form-field",10),a.TgZ(80,"mat-label"),a._uU(81),a.ALo(82,"translate"),a.qZA(),a.TgZ(83,"mat-select",20),a.TgZ(84,"mat-option",13),a._uU(85,"..."),a.qZA(),a.YNc(86,tt,2,2,"mat-option",14),a.ALo(87,"async"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(88,"div",2),a.TgZ(89,"button",21),a.NdJ("click",function(){return e.search(e.myForm.value)}),a.TgZ(90,"mat-icon"),a._uU(91,"search"),a.qZA(),a._uU(92),a.ALo(93,"translate"),a.qZA(),a._uU(94," \xa0 "),a.TgZ(95,"button",22),a.NdJ("click",function(){return e.reset()}),a.TgZ(96,"mat-icon"),a._uU(97,"refresh"),a.qZA(),a._uU(98),a.ALo(99,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(100,"div",23),a.YNc(101,it,2,1,"div",24),a.TgZ(102,"div",25),a.TgZ(103,"table",26,27),a.ynx(105,28),a.YNc(106,nt,3,3,"th",29),a.YNc(107,ot,2,1,"td",30),a.BQk(),a.ynx(108,31),a.YNc(109,at,3,3,"th",29),a.YNc(110,st,2,1,"td",30),a.BQk(),a.ynx(111,32),a.YNc(112,lt,3,3,"th",29),a.YNc(113,mt,2,3,"td",30),a.BQk(),a.ynx(114,33),a.YNc(115,ct,3,3,"th",29),a.YNc(116,rt,2,1,"td",30),a.BQk(),a.ynx(117,34),a.YNc(118,ut,3,3,"th",29),a.YNc(119,dt,2,1,"td",30),a.BQk(),a.ynx(120,35),a.YNc(121,gt,3,3,"th",29),a.YNc(122,pt,2,1,"td",30),a.BQk(),a.ynx(123,36),a.YNc(124,ht,3,3,"th",29),a.YNc(125,ft,2,1,"td",30),a.BQk(),a.ynx(126,37),a.YNc(127,Zt,3,3,"th",38),a.YNc(128,xt,2,1,"td",30),a.BQk(),a.ynx(129,39),a.YNc(130,qt,3,3,"th",29),a.YNc(131,yt,2,1,"td",30),a.BQk(),a.ynx(132,40),a.YNc(133,Tt,1,0,"th",38),a.YNc(134,bt,2,1,"td",30),a.BQk(),a.YNc(135,Ct,1,0,"tr",41),a.YNc(136,Ut,1,0,"tr",42),a.qZA(),a.qZA(),a._UZ(137,"mat-paginator",43,44),a.qZA(),a.qZA()),2&t&&(a.xp6(1),a.s9C("title",a.lcZ(2,31,"admin.recommandation.list.Recommandations")),a.xp6(4),a.Q6J("ngIf",!e.session.isPointFocal&&!e.session.isSuperViseur&&!e.session.isPublic),a.xp6(2),a.Q6J("disabled",0===e.dataSource.length),a.xp6(12),a.Oqu(a.lcZ(20,33,"admin.recommandation.list.Recherche")),a.xp6(4),a.Q6J("formGroup",e.myForm),a.xp6(4),a.Oqu(a.lcZ(28,35,"admin.recommandation.list.nom")),a.xp6(6),a.Oqu(a.lcZ(34,37,"admin.recommandation.list.Pays")),a.xp6(5),a.Q6J("ngForOf",a.lcZ(39,39,e.pays)),a.xp6(2),a.Q6J("ngIf",!e.session.isPublic),a.xp6(4),a.Oqu(a.lcZ(45,41,"admin.recommandation.list.mecanisme")),a.xp6(5),a.Q6J("ngForOf",a.lcZ(50,43,e.mecanismes)),a.xp6(2),a.Q6J("ngIf",e.cycleActive),a.xp6(1),a.Q6J("ngIf",e.visiteActive),a.xp6(1),a.Q6J("ngIf",e.organeActive),a.xp6(3),a.Oqu(a.lcZ(57,45,"admin.recommandation.list.Etatdemisenoeuvre")),a.xp6(3),a.Q6J("ngForOf",a.lcZ(60,47,e.etats)),a.xp6(5),a.Oqu(a.lcZ(65,49,"admin.recommandation.list.Axe")),a.xp6(5),a.Q6J("ngForOf",a.lcZ(70,51,e.axes)),a.xp6(4),a.Oqu(a.lcZ(74,53,"admin.recommandation.list.Sousaxe")),a.xp6(5),a.Q6J("ngForOf",e.sousAxes),a.xp6(3),a.Oqu(a.lcZ(82,55,"admin.recommandation.list.DEPARTEMENT")),a.xp6(5),a.Q6J("ngForOf",a.lcZ(87,57,e.organismes)),a.xp6(3),a.Q6J("disabled",e.isAllEmpty),a.xp6(3),a.hij(" ",a.lcZ(93,59,"admin.recommandation.list.Rechercher")," "),a.xp6(6),a.hij(" ",a.lcZ(99,61,"admin.recommandation.list.R\xe9initialiser")," "),a.xp6(3),a.Q6J("ngIf",e.isLoadingResults),a.xp6(2),a.Q6J("dataSource",e.dataSource),a.xp6(32),a.Q6J("matHeaderRowDef",e.displayedColumns),a.xp6(1),a.Q6J("matRowDefColumns",e.displayedColumns),a.xp6(1),a.Q6J("length",e.resultsLength)("pageSizeOptions",a.VKq(63,Nt,e.resultsLength)))},directives:[b.r,m.O5,c.lW,C.Hw,U.pp,U.ib,U.yz,U.yK,U.u4,l.d,Z._Y,Z.JL,Z.sg,N.KE,N.hX,J.Nt,Z.Fj,Z.JJ,Z.u,Z.Q7,S.gD,Y.ey,m.sg,D.BZ,h.YE,D.w1,D.fO,D.Dz,D.as,D.nj,p.NW,O.rH,L.$g,D.ge,h.nU,D.ev,Q.gM,D.XQ,D.Gk],pipes:[F.X$,m.Ov],styles:["section[_ngcontent-%COMP%]{display:flex!important;justify-content:space-between!important;align-items:center!important}  h3{margin:0!important}.host[_ngcontent-%COMP%]{margin:1em!important}.inputs2[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(25vw,1fr));grid-column-gap:6px;grid-row-gap:6px;align-items:center}form[_ngcontent-%COMP%]{padding:20px}.expension[_ngcontent-%COMP%]{margin:20px 0}.right[_ngcontent-%COMP%]{margin:0 20px 20px}mat-panel-title[_ngcontent-%COMP%]{display:flex;align-items:center}mat-panel-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 0 10px}mat-panel-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-top:5px}"]}),t})();class St{constructor(){this.idAxe=0,this.idSousAxe=0,this.idOrganisme=0,this.mecanisme="",this.idCycle=0,this.idOrgane=0,this.idVisite=0,this.nom="",this.etat="",this.idPays=0,this.startIndex=0,this.pageSize=10,this.sortBy="id",this.sortDir="desc",this.annee=0}}}}]);