<div class="host">
  <app-title title="{{ 'admin.ps.Procédure_spéciales' | translate}}"></app-title>
  <div class="right">
    <button class="mt-3" mat-raised-button color="primary" (click)="add()">
      <mat-icon>add</mat-icon>
      {{ 'admin.ps.Procédure_spéciale' | translate}}
    </button>
  </div>
  <section>
    <!-- <h3>Accueil</h3> -->
    <ng-container *ngIf="(mytranslate.langSync) === 'fr'; else elseTemplate">
      <p>Les procédures spéciales sont des mécanismes mis en place par le Conseil des droits de l’Homme qui s’occupent
        de la situation spécifique d’un pays ou des questions thématiques relatives aux des droits de l’homme.
        Les mandats des procédures spéciales chargent en général les titulaires de ces mandats d’examiner, de
        superviser, conseiller et faire rapport sur les situations des droits de l’homme dans des pays ou territoires
        donnés ( mandats par pays), ou sur des questions thématiques relatives aux droits de l’homme dans le monde
        entier ( mandats thématiques). Les titulaires des mandats sont des experts indépendants qui peuvent s’appeler
        rapporteurs spéciaux, représentants, représentants spéciaux, experts indépendants ou membres de groupes de
        travail.
      </p>
    </ng-container>
    <ng-template #elseTemplate>
      <p>
        لتتواصل معه السيدة جيهان
      </p>
    </ng-template>
  </section>
  <div class="right">
    <button mat-raised-button>
      <mat-icon>add</mat-icon>
      Lire la suite
    </button>
  </div>
  <div class="row justify-content-center">
    <!-- <div class="col-md-6">
      <app-pie-chart [obs]="pieChartSubject"></app-pie-chart>
    </div>
    <div class="col-md-6">
      <app-pie-chart [obs]="pieChartSubjectC"></app-pie-chart>
    </div> -->

    <div class="col-md-10 mb-5 mt-5">
      <div *ngFor="let e of visitePage; let i=index">
        <app-progress-bar [widthThree]="e.r" [widthOne]="e.p" [widthTwo]="e.t" [title]="e.name"></app-progress-bar>
      </div>

      <div class="d-flex flex-column justify-content-center mt-4">
        <img src="assets/line.png" height="10px" width="280px" [style.transform]="'rotateY(' + retate + 'deg)'">
        <h5 style="color: #737473; margin: 5px 0 10px 5px;">
          {{ 'admin.ps.Mise_en_œuvre_des_recommandations_par_Procédures_spéciales' | translate}}
        </h5>
      </div>
    </div>
  </div>

  <div class="example-container mat-elevation-z8">
    <div class="example-loading-shade" *ngIf="isLoadingResults">
      <mat-spinner *ngIf="isLoadingResults"></mat-spinner>
    </div>
    <div class="example-table-container">
      <table mat-table #table [dataSource]="dataSource" multiTemplateDataRows aria-label="Elements" matSort>

        <ng-container [matColumnDef]="columnDefs[0].columnDef">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'admin.ps.list.MANDAT' | translate}}</th>
          <td mat-cell *matCellDef="let row">{{mytranslate.langSync === 'fr' ? row.mandat : row.mandatAr}}</td>
        </ng-container>
        <ng-container [matColumnDef]="columnDefs[1].columnDef">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'admin.ps.list.Date_de_la_visite' | translate}}</th>
          <td mat-cell *matCellDef="let row">{{row[columnDefs[1].columnDef] | date : "dd/MM/yyyy"}}</td>
        </ng-container>

        <ng-container [matColumnDef]="columnDefs[2].columnDef">
          <th mat-header-cell *matHeaderCellDef>{{ 'admin.ps.list.RAPPORT_NATIONAL_DE_LA_VISITE' | translate}}</th>
          <td mat-cell *matCellDef="let row">
            <!-- {{row[columnDefs[4].columnDef]}} -->

            <button mat-icon-button [disabled]="row.lienUpload === ''" [matTooltip]="row.lienUpload" color="accent"
              (click)="showPieceJoin(row.lienUpload)">
              <mat-icon>cloud_download</mat-icon>
            </button>
          </td>
        </ng-container>

        <ng-container [matColumnDef]="columnDefs[3].columnDef">
          <th mat-header-cell *matHeaderCellDef>
            {{ 'admin.ps.list.RAPPORT_DE_LA_PROCEDURE_REACTION_NATIONALE' | translate}}</th>
          <td mat-cell *matCellDef="let row">
            <button mat-icon-button [disabled]="row.discours === ''" [matTooltip]="row.discours" color="accent"
              (click)="showPieceJoin(row.discours)">
              <mat-icon>cloud_download</mat-icon>
            </button>
          </td>
        </ng-container>

        <ng-container [matColumnDef]="columnDefs[4].columnDef">
          <th mat-header-cell *matHeaderCellDef>{{ 'admin.ps.list.PLAN_DE_MISE_EN_OEUVRE' | translate}}</th>
          <td mat-cell *matCellDef="let row">
            <button class="center" mat-icon-button [disabled]="row.miseOeuvrePiece === ''"
              [matTooltip]="row.miseOeuvrePiece" color="accent" (click)="showPieceJoin(row.miseOeuvrePiece)">
              <mat-icon>cloud_download</mat-icon>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="option" style="flex-direction: row-reverse;">
          <th mat-header-cell *matHeaderCellDef> </th>
          <td mat-cell *matCellDef="let row">
            <div class="button-row">
              <button mat-icon-button color="primary" (click)="openDialogDetail(row)">
                <mat-icon>visibility</mat-icon>
              </button>
              <button mat-icon-button color="primary" (click)="edit(row)"
                *ngIf="!session.isPointFocal && !session.isSuperViseur">
                <mat-icon>create</mat-icon>
              </button>
              <button mat-icon-button color="accent" (click)="archive(row)"
                *ngIf="!session.isPointFocal && !session.isSuperViseur">
                <mat-icon>unarchive</mat-icon>
              </button>
              <button mat-icon-button color="warn" (click)="delete(row)"
                *ngIf="!session.isPointFocal && !session.isSuperViseur">
                <mat-icon>delete_sweep</mat-icon>
              </button>



            </div>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

      </table>
    </div>

    <mat-paginator #paginator [length]="resultsLength" pageIndex="0" pageSize="10"
      [pageSizeOptions]="[10, 25, 50, 100, 250]" showFirstLastButtons>
    </mat-paginator>
  </div>
</div>
