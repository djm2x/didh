

<div class="expension">
    <mat-accordion>
        <mat-expansion-panel expanded (opened)="panelOpenState = true" (closed)="panelOpenState = false">
            <!-- <mat-expansion-panel-header>
                <mat-panel-title>
                    <mat-icon>search</mat-icon>
                    <p>{{ 'admin.state.Recherche' | translate }}</p>
                </mat-panel-title>
                <mat-panel-description> </mat-panel-description>
            </mat-expansion-panel-header> -->
            <mat-divider>
            </mat-divider>

            <!-- <form [formGroup]="myForm">
                <div class="row m-2">

                    <mat-form-field appearance="fill" *ngIf="selectedIndex === 0" class="col-md-5">
                        <mat-label>{{ 'admin.state.Cycle' | translate }}</mat-label>
                        <mat-select formControlName="idCycle">
                            <mat-option value="0">...</mat-option>
                            <mat-option *ngFor="let e of cycles | async" [value]="e.id">{{ e.label }}</mat-option>
                        </mat-select>
                    </mat-form-field>
                    <mat-form-field appearance="fill" *ngIf="selectedIndex === 1" class="col-md-5">
                        <mat-label>{{ 'admin.state.Organe' | translate }}</mat-label>
                        <mat-select formControlName="idOrgane">
                            <mat-option value="0">...</mat-option>
                            <mat-option *ngFor="let e of organes | async" [value]="e.id">
                                {{ mytranslate.langSync === 'fr' ? e.label : e.labelAr }}</mat-option>
                        </mat-select>
                    </mat-form-field>

                    <mat-form-field appearance="fill" *ngIf="selectedIndex === 2" class="col-md-5">
                        <mat-label>{{ 'admin.state.Visite' | translate }}</mat-label>
                        <mat-select formControlName="idVisite">
                            <mat-option value="0">...</mat-option>
                            <mat-option *ngFor="let e of visites | async" [value]="e.id">
                                {{ mytranslate.langSync === 'fr' ? e.mandat : e.mandatAr }}</mat-option>
                        </mat-select>
                    </mat-form-field>


                    <mat-form-field appearance="fill" class="col-md-5">
                        <mat-label>{{ 'admin.state.Etat_de_mis_en_oeuvre' | translate }}</mat-label>
                        <mat-select formControlName="etat">

                            <mat-option value="">...</mat-option>
                            <mat-option *ngFor="let e of etats | async" [value]="e.name">
                                {{ mytranslate.langSync === 'fr' ? e.name : e.nameAr }}</mat-option>
                        </mat-select>
                    </mat-form-field>

                    <mat-form-field appearance="fill" class="col-md-5">
                        <mat-label>{{ 'admin.state.Axe' | translate }}</mat-label>
                        <mat-select formControlName="idAxe" (selectionChange)="axeChange($event.value)">
                            <mat-option value="0">...</mat-option>
                            <mat-option *ngFor="let e of axes | async" [value]="e.id">
                                {{ mytranslate.langSync === 'fr' ? e.label : e.labelAr }}</mat-option>
                        </mat-select>
                    </mat-form-field>

                    <mat-form-field appearance="fill" class="col-md-5">
                        <mat-label>{{ 'admin.state.Sous_axe' | translate }}</mat-label>
                        <mat-select formControlName="idSousAxe">
                            <mat-option value="0">...</mat-option>
                            <mat-option *ngFor="let e of sousAxes" [value]="e.id">
                                {{ mytranslate.langSync === 'fr' ? e.label : e.labelAr }}</mat-option>
                        </mat-select>
                    </mat-form-field>

                    <mat-form-field appearance="fill" class="col-md-5">
                        <mat-label>{{ 'admin.state.Organisme' | translate }}</mat-label>
                        <mat-select formControlName="idOrganisme" (selectionChange)="axeChange($event.value)">
                            <mat-option value="0">...</mat-option>
                            <mat-option *ngFor="let e of organismes | async" [value]="e.id">
                                {{ mytranslate.langSync === 'fr' ? e.label : e.labelAr }}</mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>





                <div class="right">
                    <button mat-raised-button color="primary" type="button" (click)="search(myForm.value)"
                        [disabled]="isAllEmpty">
                        <mat-icon>search</mat-icon>
                        {{ 'admin.state.Rechercher' | translate }}
                    </button>
                    &nbsp;
                    <button mat-raised-button (click)="reset()" type="button" [disabled]="isAllEmpty">
                        <mat-icon>refresh</mat-icon>
                        {{ 'admin.state.Réinitialiser' | translate }}
                    </button>
                </div>


            </form> -->

            <form [formGroup]="myForm">
              <mat-form-field *ngIf="!session.isPointFocal" appearance="fill" style="width: 100%;margin-bottom: 5px;">
                <mat-label>{{ 'admin.recommandation.list.Recherche' | translate }}</mat-label>
                <input matInput [formControl]="myAuto" [matAutocomplete]="auto" placeholder="auto complétion">
                <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
                  <mat-option *ngFor="let e of filteredOptions | async" [value]="e">{{ e.label }} </mat-option>
                </mat-autocomplete>
              </mat-form-field>
              <!-- <mat-form-field *ngIf="!session.isPointFocal" appearance="fill" style="width: 100%;margin-bottom: 5px;">
                <mat-label>Organisme</mat-label>
                <mat-select formControlName="idOrganisme">
                  <mat-option value="0">...</mat-option>
                  <mat-option *ngFor="let e of organismes | async" [value]="e.id">{{ e.label }}</mat-option>
                </mat-select>
              </mat-form-field> -->
              <div class="inputs2">
                <mat-form-field appearance="fill">
                  <mat-label>{{ 'admin.recommandation.list.Pays' | translate }}</mat-label>
                  <mat-select formControlName="idPays">
                    <mat-option value="0">...</mat-option>
                    <mat-option *ngFor="let e of pays | async" [value]="e.id">{{ mytranslate.langSync === 'fr' ? e.nom : e.nomAr }}</mat-option>
                  </mat-select>
                </mat-form-field>

                <mat-form-field appearance="fill">
                  <mat-label>{{ 'admin.recommandation.list.nom' | translate }}</mat-label>
                  <!-- <textarea matInput rows="0" formControlName="nom" required></textarea> -->
                  <input matInput formControlName="nom" required>
                </mat-form-field>
              </div>
              <div class="inputs2">



                <mat-form-field appearance="fill">
                  <mat-label>{{ 'admin.recommandation.list.mecanisme' | translate }}</mat-label>
                  <mat-select formControlName="mecanisme" (selectionChange)="selectChange($event.value)">
                    <mat-option value="0">...</mat-option>
                    <mat-option *ngFor="let e of mecanismes | async" [value]="e.name">{{ mytranslate.langSync === 'fr' ? e.name : e.nameAr }}</mat-option>
                  </mat-select>
                </mat-form-field>

                <mat-form-field appearance="fill" *ngIf="cycleActive">
                  <mat-label>{{ 'admin.recommandation.list.Cycle' | translate }}</mat-label>
                  <mat-select formControlName="idCycle">
                    <mat-option value="0">...</mat-option>
                    <mat-option *ngFor="let e of cycles" [value]="e.id">{{ e.label }}</mat-option>
                  </mat-select>
                </mat-form-field>

                <mat-form-field appearance="fill" *ngIf="visiteActive">
                  <mat-label>{{ 'admin.recommandation.list.Visite' | translate }}</mat-label>
                  <mat-select formControlName="idVisite">
                    <mat-option value="0">...</mat-option>
                    <mat-option *ngFor="let e of visites | async" [value]="e.id">{{ mytranslate.langSync === 'fr' ? e.mandat : e.mandatAr }}</mat-option>
                  </mat-select>
                </mat-form-field>

                <mat-form-field appearance="fill" *ngIf="organeActive">
                  <mat-label>{{ 'admin.recommandation.list.Organe' | translate }}</mat-label>
                  <mat-select formControlName="idOrgane">
                    <mat-option value="0">...</mat-option>
                    <mat-option *ngFor="let e of organes | async" [value]="e.id">{{ mytranslate.langSync === 'fr' ? e.label : e.labelAr }}</mat-option>
                  </mat-select>
                </mat-form-field>

                <mat-form-field appearance="fill">
                  <mat-label>{{ 'admin.recommandation.list.Etatdemisenoeuvre' | translate }}</mat-label>
                  <mat-select formControlName="etat">
                    <!-- <mat-option value="0">...</mat-option> -->
                    <mat-option *ngFor="let e of etats | async" [value]="e.name">{{ mytranslate.langSync === 'fr' ? e.name : e.nameAr }}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="inputs2">

                <mat-form-field appearance="fill">
                  <mat-label>{{ 'admin.recommandation.list.Axe' | translate }}</mat-label>
                  <mat-select formControlName="idAxe" (selectionChange)="axeChange($event.value)">
                    <mat-option value="0">...</mat-option>
                    <mat-option *ngFor="let e of axes | async" [value]="e.id">{{ mytranslate.langSync === 'fr' ? e.label : e.labelAr }}</mat-option>
                  </mat-select>
                </mat-form-field>

                <mat-form-field appearance="fill">
                  <mat-label>{{ 'admin.recommandation.list.Sousaxe' | translate }}</mat-label>
                  <mat-select formControlName="idSousAxe">
                    <mat-option value="0">...</mat-option>
                    <mat-option *ngFor="let e of sousAxes" [value]="e.id">{{ mytranslate.langSync === 'fr' ? e.label : e.labelAr }}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </form>
            <div class="right">

              <button mat-raised-button color="primary" (click)="search(myForm.value)" [disabled]="isAllEmpty">
                <mat-icon>search</mat-icon>
                {{ 'admin.recommandation.list.Rechercher' | translate }}
              </button>
              &nbsp;
              <button mat-raised-button (click)="reset()" [disabled]="isAllEmpty">
                <mat-icon>refresh</mat-icon>
                {{ 'admin.recommandation.list.Réinitialiser' | translate }}
              </button>
            </div>

            <mat-divider> </mat-divider>

            <mat-tab-group class="example-stretched-tabs" #matgroup (selectedTabChange)="selectedTabChange(matgroup)">
              <mat-tab label="{{ 'admin.epu.list.Examenpériodiqueuniversal' | translate }}">
                  <ng-template matTabContent>
                  </ng-template>
              </mat-tab>

              <mat-tab label="{{ 'admin.organe.list.Organesdetraité' | translate }}">
                  <ng-template matTabContent>
                  </ng-template>
              </mat-tab>

              <mat-tab label="{{ 'admin.ps.Procédure_spéciale' | translate }}">
                  <ng-template matTabContent>

                  </ng-template>
              </mat-tab>
          </mat-tab-group>

            <div class="row justify-content-center">
                <div class="col-md-8">
                    <app-bar [dataSubject]="mecanismeSubject"></app-bar>
                    <!-- <div class="d-flex flex-column justify-content-center mt-4">
            <img src="assets/line.png" height="10px" width="280px">
            <h5 style="color: #737473; margin: 5px 0 10px 5px;">
                Mise en œuvre des recommandations par Mecanisme
            </h5>
          </div> -->
                </div>

                <div class="col-md-10 mb-5 mt-5">
                    <div *ngFor="let e of axesList; let i=index">
                        <app-progress-bar [widthOne]="e.p" [widthTwo]="e.t" [title]="e.name"></app-progress-bar>
                    </div>

                    <div class="d-flex flex-column justify-content-center align-items-center mt-4">
                        <img src="assets/line.png" height="10px" width="280px"
                            [style.transform]="'rotateY(' +  rotateY + 'deg)'">
                        <h5 style="color: #737473; margin: 5px 0 10px 5px; text-align: center;">
                            {{ 'admin.state.Mise_en_œuvre_des_recommandations_par_Axe' | translate }}
                        </h5>
                    </div>
                </div>

                <div class="col-md-10 mt-5">

                    <div class="d-flex flex-wrap justify-content-center ">

                        <div *ngFor="let e of departementList; let i=index">
                            <!-- <app-progress-cercle [diameter]="90" [isInForLoop]="true" [widthText]="'160px'" [fontSize]=".7" [width]="170" [o]="e"></app-progress-cercle> -->
                            <app-progress-cercle [transform]="(mytranslate.lang | async) === 'fr' ? 22 : -10"
                                [diameter]="200" [isInForLoop]="true" [widthText]="'160px'" [fontSize]=".7"
                                [width]="170" [o]="e">
                            </app-progress-cercle>

                            <!-- <app-doughnut [isInForLoop]="true" [widthText]="'160px'" [fontSize]=".7" [width]="170" [elementFromForLoop]="e" [pieChartType]="'doughnut'"></app-doughnut> -->
                        </div>
                    </div>

                    <div class="d-flex flex-column justify-content-center align-items-center mt-4">
                        <img src="assets/line.png" height="10px" width="280px"
                            [style.transform]="'rotateY(' +  rotateY + 'deg)'">
                        <h5 style="color: #737473; margin: 5px 0 10px 5px; text-align: center;">
                            {{ 'admin.state.Mise_en_œuvre_des_recommandations_par_départements' | translate }}
                        </h5>
                    </div>

                </div>

                <div class="col-md-10 mt-5">

                    <div class="d-flex flex-wrap justify-content-center ">
                        <div *ngFor="let e of payeList; let i=index">
                            <app-progress-cercle [transform]="(mytranslate.lang | async) === 'fr' ? 22 : -10"
                                [diameter]="200" [isInForLoop]="true" [widthText]="'160px'" [fontSize]=".7"
                                [width]="170" [o]="e">
                            </app-progress-cercle>
                        </div>
                    </div>

                    <div class="d-flex flex-column justify-content-center align-items-center mt-4">
                        <img src="assets/line.png" height="10px" width="280px"
                            [style.transform]="'rotateY(' +  rotateY + 'deg)'">
                        <h5 style="color: #737473; margin: 5px 0 10px 5px; text-align: center;">
                            {{ 'admin.state.Mise_en_œuvre_des_recommandations_par_pays' | translate }}
                        </h5>
                    </div>

                </div>

                <div class="mx-2 mt-2">
                  <app-recomm [fromParent]="toChild"></app-recomm>
              </div>

                <!-- <div class="col-md-5">
        <app-state-pie [obs]="listAxes"></app-state-pie>

    </div>
    <div class="col-md-5">
        <app-state-pie [obs]="listOrganisme"></app-state-pie>

    </div> -->
            </div>
            <!-- <mat-card>

</mat-card> -->
        </mat-expansion-panel>
    </mat-accordion>
</div>
