<div class="expension">
    <mat-accordion>
        <mat-expansion-panel expanded (opened)="panelOpenState = true" (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <mat-icon>search</mat-icon>
                    <p>Recherche</p>
                </mat-panel-title>
                <mat-panel-description> </mat-panel-description>
            </mat-expansion-panel-header>
            <mat-divider>
            </mat-divider>
            <form [formGroup]="myForm">
                <div class="row m-2">


                    <mat-form-field appearance="outline" class="col-md-5">
                        <mat-label>Mecanisme</mat-label>
                        <mat-select formControlName="mecanisme" (selectionChange)="selectChange($event.value)">
                            <mat-option value="0">...</mat-option>
                            <mat-option *ngFor="let e of mecanismes" [value]="e">{{ e }}</mat-option>
                        </mat-select>
                    </mat-form-field>

                    <mat-form-field appearance="outline" *ngIf="cycleActive" class="col-md-5">
                        <mat-label>Cycle</mat-label>
                        <mat-select formControlName="idCycle">
                            <mat-option value="0">...</mat-option>
                            <mat-option *ngFor="let e of cycles" [value]="e.id">{{ e.label }}</mat-option>
                        </mat-select>
                    </mat-form-field>

                    <mat-form-field appearance="outline" *ngIf="visiteActive" class="col-md-5">
                        <mat-label>Visite</mat-label>
                        <mat-select formControlName="idVisite">
                            <mat-option value="0">...</mat-option>
                            <mat-option *ngFor="let e of visites | async" [value]="e.id">{{ e.mandat }}</mat-option>
                        </mat-select>
                    </mat-form-field>

                    <mat-form-field appearance="outline" *ngIf="organeActive" class="col-md-5">
                        <mat-label>Organe</mat-label>
                        <mat-select formControlName="idOrgane">
                            <mat-option value="0">...</mat-option>
                            <mat-option *ngFor="let e of organes | async" [value]="e.id">{{ e.label }}</mat-option>
                        </mat-select>
                    </mat-form-field>

                    <mat-form-field appearance="outline" class="col-md-5">
                        <mat-label>Etat de mis en oeuvre</mat-label>
                        <mat-select formControlName="etat">
                            <!-- <mat-option value="0">...</mat-option> -->
                            <mat-option *ngFor="let e of etats" [value]="e">{{ e }}</mat-option>
                        </mat-select>
                    </mat-form-field>
                    <!-- <mat-form-field appearance="outline" class="col-md-5">
                        <mat-label>Mecanismes</mat-label>
                        <mat-select formControlName="mecanisme" (selectionChange)="selectChange($event.value)">
                            <mat-option *ngFor="let e of mecanismes" [value]="e">{{ e }}</mat-option>
                        </mat-select>
                    </mat-form-field> -->

                    <mat-form-field appearance="outline" class="col-md-5">
                        <mat-label>Axe</mat-label>
                        <mat-select formControlName="idAxe" (selectionChange)="axeChange($event.value)">
                            <mat-option value="0">...</mat-option>
                            <mat-option *ngFor="let e of axes | async" [value]="e.id">{{ e.label }}</mat-option>
                        </mat-select>
                    </mat-form-field>

                    <mat-form-field appearance="outline" class="col-md-5">
                        <mat-label>Sous axe</mat-label>
                        <mat-select formControlName="idSousAxe">
                            <mat-option value="0">...</mat-option>
                            <mat-option *ngFor="let e of sousAxes" [value]="e.id">{{ e.label }}</mat-option>
                        </mat-select>
                    </mat-form-field>

                    <mat-form-field appearance="outline" class="col-md-5">
                        <mat-label>Organisme</mat-label>
                        <mat-select formControlName="idAxe" (selectionChange)="axeChange($event.value)">
                            <mat-option value="0">...</mat-option>
                            <mat-option *ngFor="let e of organismes | async" [value]="e.id">{{ e.label }}</mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>

                <div class="right">
                    <button mat-raised-button color="primary" type="button" (click)="search(myForm.value)"
                        [disabled]="isAllEmpty">
                        <mat-icon>search</mat-icon>
                        Rechercher
                    </button>
                    &nbsp;
                    <button mat-raised-button (click)="reset()" type="button" [disabled]="isAllEmpty">
                        <mat-icon>refresh</mat-icon>
                        Réinitialiser
                    </button>
                </div>
            </form>

        </mat-expansion-panel>
    </mat-accordion>
</div>

<div class="row justify-content-center">
    <div class="col-md-8">
        <app-bar [dataSubject]="mecanismeSubject"></app-bar>
        <!-- <div class="d-flex flex-column justify-content-center mt-4">
            <img src="assets/line.png" height="10px" width="280px">
            <h5 style="color: #737473; margin: 5px 0 10px 5px;">
                Mise en œuvre des recommandations par Mecanisme
            </h5>
          </div> -->
      </div>

      <div class="col-md-10 mb-5 mt-5">
        <div *ngFor="let e of axesList; let i=index">
          <app-progress-bar [widthOne]="e.p + '%'" [widthTwo]="e.t + '%'" [title]="e.name"></app-progress-bar>
        </div>
  
        <div class="d-flex flex-column justify-content-center align-items-center mt-4">
          <img src="assets/line.png" height="10px" width="280px">
          <h5 style="color: #737473; margin: 5px 0 10px 5px; text-align: center;">
            Mise en œuvre des recommandations par Axe
          </h5>
        </div>
      </div>

      <div class="col-md-10 mt-5">
        
          <div class="d-flex flex-wrap justify-content-center ">
  
            <div *ngFor="let e of departementList; let i=index">
              <app-doughnut [isInForLoop]="true" [widthText]="'160px'" [fontSize]=".7" [width]="170" [elementFromForLoop]="e" [pieChartType]="'doughnut'"></app-doughnut>
            </div>
          </div>

          <div class="d-flex flex-column justify-content-center align-items-center mt-4">
            <img src="assets/line.png" height="10px" width="280px">
            <h5 style="color: #737473; margin: 5px 0 10px 5px; text-align: center;">
                Mise en œuvre des recommandations par départements
            </h5>
          </div>
        
      </div>
    <!-- <div class="col-md-5">
        <app-state-pie [obs]="listAxes"></app-state-pie>

    </div>
    <div class="col-md-5">
        <app-state-pie [obs]="listOrganisme"></app-state-pie>

    </div> -->
</div>
<!-- <mat-card>

</mat-card> -->